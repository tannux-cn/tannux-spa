var CU={BASEFLAG_COUNTER:0,userAgent:navigator.userAgent.toLowerCase(),activeX:["MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],getId:function(){return CU.BASEFLAG_COUNTER++},isOpera:function(){return/opera/.test(CU.userAgent)},isIE:function(){return!CU.isOpera()&&/msie/.test(CU.userAgent)},isIE6:function(){return CU.isIE()&&/msie 6/.test(CU.userAgent)},isEmpty:function(b,a,c){if(null===b||void 0===b)return!0;!1!==c&&"string"==typeof b&&(b=CU.trim(b));
return CU.isArray(b)&&!b.length||(a?!1:""===b)},isEmptyObject:function(b,a,c){return CU.isEmpty(b,a,c)||!CU.isObject(b)||0>=Object.keys(b).length},isArray:function(b){return"[object Array]"===Object.prototype.toString.apply(b)},clearArray:function(b){for(;0<b.length;)b.pop()},isObject:function(b){return b&&"object"==typeof b},isPrimitive:function(b){b=typeof b;return"string"==b||"number"==b||"boolean"==b},isInteger:function(b){var a=!1;CU.isEmpty(b)||("number"==typeof b?(b+="",a=0>b.indexOf(".")&&
9>b.length):"string"==typeof b&&(a=/^[-]?[0-9]{1,8}$/.test(CU.trim(b))));return a},isLong:function(b){var a=!1;CU.isEmpty(b)||("number"==typeof b?a=0>(b+"").indexOf("."):"string"==typeof b&&(a=/^[-]?[0-9]{1,16}$/.test(CU.trim(b))));return a},isNumber:function(b){var a=!1;CU.isEmpty(b)||("number"==typeof b?a=!0:"string"==typeof b&&(a=/^[-]?[0-9]{1,16}(([.][0-9]+)?)$/.test(CU.trim(b))));return a},isFunction:function(b){return"function"==typeof b},undef:function(b){return void 0!==b?b:""},toObject:function(b){return(new Function("return "+
b))()},toString:function(b){return JSON.stringify(b)},parseParams:function(b,a){var c=[],d;for(d in b){var g=b[d];if(!CU.isEmpty(g,!1,!1))if(CU.isArray(g))for(var h=0;h<g.length;h++){var k=g[h];CU.isEmpty(k,!1,!1)||(a&&(k=encodeURIComponent(k)),c.push(d+"="+k))}else a&&(g=encodeURIComponent(g)),c.push(d+"="+g)}return c.join("&")},parseUrlParams:function(b){var a={};b=CU.getQueryString(b);if(!CU.isEmpty(b)){b=b.split("&");for(var c=0;c<b.length;c++)if(idx=b[c].indexOf("="),0<idx){var d=CU.trim(b[c].substring(0,
idx)),g=CU.trim(b[c].substring(idx+1));if(!CU.isEmpty(d)){var h=a[d];null===h||void 0===h?a[d]=g:CU.isArray(h)?h.push(g):a[d]=[h,g]}}}return a},insert:function(b,a,c){CU.isEmpty(a)&&(a=b.length);if(!(0>a||a>b.length)){for(var d=b.length;d>a;d--)b[d]=b[d-1];return b[a]=c}},remove:function(b,a){if(!(0>a||a>=b.length)){var c=b[a];b.splice(a,1);return c}},createXmlHttp:function(){try{return new XMLHttpRequest}catch(a){for(var b=0;b<CU.activeX.length;b++)try{return new ActiveXObject(CU.activeX[b])}catch(c){}}alert("No browser XMLHttpRequest (AJAX) support")},
createEl:function(b,a){if("string"==typeof b)var c=document.createElement(b);else if(CU.isEmpty(b)&&(b={}),CU.isEmpty(b.tagName)&&(b.tagName="DIV"),c=document.createElement(b.tagName),CU.isEmpty(b.id)||(c.id=b.id),CU.isEmpty(b.name)||(c.name=b.name),CU.isEmpty(b.cls)||(c.className=b.cls),CU.isEmpty(b.style)||(c.style.cssText=b.style),CU.isEmpty(b.html)||(c.innerHTML=b.html),CU.isArray(b.items))for(var d=0;d<b.items.length;d++)c.appendChild(b.items[d]);if(CU.isObject(a))for(var g in a)c[g]=a[g];return c},
getEl:function(b){return document.getElementById(b)},getEls:function(b){return document.getElementsByName(b)},trim:function(b){return void 0==b||null==b?b:$.trim(b)},getDate:function(){return CU.toDateString(new Date)},getTime:function(){return CU.toTimeString(new Date)},toDate:function(b){return new Date(Date.parse(b.replace(/-/g,"/")))},toDateString:function(b){var a=b.getFullYear(),c=b.getMonth()+1;10>c&&(c="0"+c);b=b.getDate();10>b&&(b="0"+b);return a+"-"+c+"-"+b},toTimeString:function(b){var a=
b.getFullYear(),c=b.getMonth()+1;10>c&&(c="0"+c);var d=b.getDate();10>d&&(d="0"+d);var g=b.getHours();10>g&&(g="0"+g);var h=b.getMinutes();10>h&&(h="0"+h);b=b.getSeconds();10>b&&(b="0"+b);return a+"-"+c+"-"+d+" "+g+":"+h+":"+b},getDateDiff:function(b,a){return(a-b)/1E3/60/60/24},getBeforeDate:function(b){return new Date((new Date).getTime()-864E5*b)},getBeforeDateString:function(b){var a=CU.getBeforeDate(b);b=a.getFullYear();var c=a.getMonth()+1;a=a.getDate();10>c&&(c="0"+c);10>a&&(a="0"+a);return b+
"-"+c+"-"+a},getAfterDate:function(b){return new Date((new Date).getTime()+864E5*b)},getAfterDateString:function(b){var a=CU.getAfterDate(b);b=a.getFullYear();var c=a.getMonth()+1;a=a.getDate();10>c&&(c="0"+c);10>a&&(a="0"+a);return b+"-"+c+"-"+a},getDaysInMonth:function(b,a){switch(a){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 4:case 6:case 9:case 11:return 30;case 2:return 0==b%4&&0!=b%100||0==b%400?29:28;default:return-1}},clone:function(b){if(null==b||void 0==b)return b;
var a=b.constructor==Object?new b.constructor:new b.constructor(b.valueOf());for(key in b){var c=b[key];a[key]!=b[key]&&(a[key]="object"==typeof c?CU.clone(c):c)}a.toString=b.toString;a.valueOf=b.valueOf;return a},isTrue:function(b){return!0===b||"true"==b||1==b||"1"==b||"yes"==b||"on"==b},isFalse:function(b){return!1===b||"false"==b||0==b||"0"==b||"no"==b||"off"==b},leftPad:function(b,a,c){if(!CU.isEmpty(a)&&!CU.isEmpty(c))for(b+="",a=parseInt(a,10);b.length<a;)b=c+b;return b},rightPad:function(b,
a,c){if(!CU.isEmpty(a)&&!CU.isEmpty(c))for(b+="",a=parseInt(a,10);b.length<a;)b+=c;return b},leftPadZero:function(b,a){return CU.leftPad(b,a,"0")},rightPadZero:function(b,a){return CU.rightPad(b,a,"0")},seal:function(b){CU.isEmpty(b)&&(b="base_elementid_backid_"+CU.getId());var a=parseInt(document.documentElement.scrollWidth),c=parseInt(document.documentElement.scrollHeight);b=CU.createEl({id:b,style:"top:0px;left:0px;position:absolute;background:#e6e6e6;width:"+a+"px;height:"+c+"px;filter:alpha(opacity=40);"+
(CU.isIE()?"filter:alpha(opacity=40);":"opacity:0.40;")});document.body.appendChild(b);return b},createTableHtml:function(b){CU.isEmpty(b.id)&&(b.id="common_table_html_"+CU.getId());var a=b.cm,c=[];c.push("<table id='"+b.id+"' border='1' cellspacing='0' class='table_queryList' bordercolorlight='#FFB951' bordercolordark='#ffffff'>");c.push("<tr class='tr_queryListHead'>");for(b=0;b<a.length;b++){var d=CU.isEmpty(a[b].width)?100:a[b].width,g=CU.isEmpty(a[b].header)?"&nbsp;":a[b].header,h=CU.isEmpty(a[b].align)?
"left":a[b].align;c.push("<td style='padding-top:4px;' width='"+d+"' align='"+h+"'>"+g+"</td>")}c.push("</tr></table>");return c.join("")},refreshPage:function(){window.location.reload()},setCookie:function(b,a,c){if(void 0==c||null==c)c={};if(void 0==c.expires||null==c.expires){var d=new Date;d.setTime(d.getTime()+12096E5);c.expires=d}if(void 0==c.path||null==c.path)c.path="/";b=b+"="+escape(a)+";expires="+c.expires.toGMTString()+";path="+c.path;void 0!=c.domain&&null!=c.domain&&(b+=";domain="+c.domain);
-1<window.navigator.userAgent.indexOf("Chrome")&&(window.location.href+"").startsWith("https://")&&(b+=";SameSite=None",c.secure=!0);1==c.secure&&(b+=";secure");document.cookie=b},getCookieValue:function(b){var a=document.cookie.indexOf(";",b);-1==a&&(a=document.cookie.length);return unescape(document.cookie.substring(b,a))},getCookie:function(b){b+="=";for(var a=b.length,c=document.cookie.length,d=0,g;d<c;){g=d+a;if(document.cookie.substring(d,g)==b)return CU.getCookieValue(g);d=document.cookie.indexOf(" ",
d)+1;if(0==d)break}return null},removeCookie:function(b){if(CU.getCookie(b)){var a=new Date;a.setTime(a.getTime()-864E5);CU.setCookie(b,"",a)}},request:function(b){CU.isEmpty(b.method)&&(b.method="POST");CU.isEmpty(b.async)&&(b.async=!0);var a=CU.createXmlHttp();b.async&&(CU.isFunction(b.success)||CU.isFunction(b.failure))&&(a.onreadystatechange=function(){4==a.readyState&&(200==a.status?CU.isFunction(b.success)&&b.success(a):CU.isFunction(b.failure)&&b.failure(a))});a.open(b.method,b.url,b.async);
a.setRequestHeader("x-requested-with","XMLHttpRequest");var c=null;CU.isObject(b.params)&&(a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),c=CU.parseParams(b.params),0<c.length&&(c=c.substring(1)));a.send(c);if(!b.async)if(200==a.status)if(CU.isFunction(b.success))b.success(a);else return a;else if(CU.isFunction(b.failure))b.failure(a);else return Error(a.responseText)},getTopOpener:function(b){CU.isEmpty(b)&&(b=window);return CU.isEmpty(b.opener)?b:CU.getTopOpener(b.opener)},
getTopParent:function(){for(var b=window,a=null;!CU.isEmpty(a=b.parent)&&b!=a;)b=a;return CU.isEmpty(a)?b:a},getParent:function(){var b=window.parent;CU.isEmpty(b)&&(b=window);return b},toByteUnit:function(b,a){if(CU.isEmpty(b))return"";b=parseFloat(""+b);if(null===a||void 0===a||!1!==a)a=" ";b=0x4000000000000<=b?parseInt(100*b/0x4000000000000,10)/100+a+"P":1099511627776<=b?parseInt(100*b/1099511627776,10)/100+a+"T":1073741824<=b?parseInt(100*b/1073741824,10)/100+a+"G":1048576<=b?parseInt(100*b/1048576,
10)/100+a+"M":1024<=b?parseInt(100*b/1024,10)/100+a+"K":b+a;return b+"B"},toMegaByteUnit:function(b,a){if(CU.isEmpty(b))return"";b=parseFloat(""+b);if(null===a||void 0===a||!1!==a)a=" ";return b=0x4000000000000<=b?parseInt(100*b/0x4000000000000,10)/100+a+"Z":1099511627776<=b?parseInt(100*b/1099511627776,10)/100+a+"E":1073741824<=b?parseInt(100*b/1073741824,10)/100+a+"P":1048576<=b?parseInt(100*b/1048576,10)/100+a+"T":1024<=b?parseInt(100*b/1024,10)/100+a+"G":b+a+"M"},getNumberDate:function(b){CU.isEmpty(b)&&
(b=new Date);var a=b.getFullYear(),c=b.getMonth()+1;b=b.getDate();return 1E4*a+100*c+b},getNumberDateTime:function(b){CU.isEmpty(b)&&(b=new Date);var a=b.getFullYear(),c=b.getMonth()+1,d=b.getDate(),g=b.getHours(),h=b.getMinutes();b=b.getSeconds();return 1E10*a+1E8*c+1E6*d+1E4*g+100*h+b},toStringDate:function(b){if(CU.isEmpty(b))return"";b+="";return 8!=b.length?"":b.substring(0,4)+"-"+b.substring(4,6)+"-"+b.substring(6,8)},toStringTime:function(b){if(CU.isEmpty(b))return"";b+="";if(6>b.length)for(var a=
0;a<6-b.length;a++)b="0"+b;return b.substring(0,2)+":"+b.substring(2,4)+":"+b.substring(4,6)},toStringDateTime:function(b){if(CU.isEmpty(b))return"";b+="";return 14!=b.length?"":b.substring(0,4)+"-"+b.substring(4,6)+"-"+b.substring(6,8)+" "+b.substring(8,10)+":"+b.substring(10,12)+":"+b.substring(12,14)},toShortDateTime:function(b){if(CU.isEmpty(b))return"";b+="";return 14!=b.length?"":b.substring(4,6)+"-"+b.substring(6,8)+" "+b.substring(8,10)+":"+b.substring(10,12)},toNumberDateTime:function(b){return CU.isEmpty(b)?
"":parseInt((b+"").replace(/[-:\s]/g,""),10)},toNumberDate:function(b){return CU.isEmpty(b)?"":parseInt((b+"").replace(/[-]/g,""),10)},toNumberTime:function(b){if(!/^(\d{1,2}):(\d{1,2})(:(\d{1,2}))?$/.test(b))return"";b=(b+"").split(":");for(var a="",c=0;c<b.length;c++){if(0===c&&23<parseInt(b[c],10)||0!==c&&59<parseInt(b[c],10))return"";a+=(1==b[c].length?"0":"")+b[c]}4==a.length&&(a+="00");return a},numberDate2Seconds:function(b){if(CU.isEmpty(b)||!/^[0-9]{8}$/.test(b+=""))return"";b=(new Date(CU.toStringDate(b)+
" 00:00:00")).getTime()/1E3;return parseInt(b,10)},numberDateTime2Seconds:function(b){if(CU.isEmpty(b)||!/^[0-9]{14}$/.test(b+=""))return"";b=(new Date(CU.toStringDateTime(b))).getTime()/1E3;return parseInt(b,10)},toTimeUnit:function(b){if(CU.isEmpty(b))return"";var a="";86400<=b&&(a+=parseInt(b/86400,10)+"\u5929",b%=86400,3600>b&&(a+="0\u5c0f\u65f6"),60>b&&(a+="0\u5206"));3600<=b&&(a+=parseInt(b/3600,10)+"\u5c0f\u65f6",b%=3600,60>b&&(a+="0\u5206"));60<=b&&(a+=parseInt(b/60,10)+"\u5206",b%=60);return a+
(b+"\u79d2")},timeDifference:function(b,a){b=CU.toDate(CU.toStringDateTime(b));a=CU.toDate(CU.toStringDateTime(a));return parseInt((b.getTime()-a.getTime())/1E3,10)},getDropItemRecord:function(b,a){b=DROP[b];if(!CU.isEmpty(b)){a+="";for(var c=0;c<b.length;c++)if(b[c].code==a)return b[c]}return null},getDropItemRecordByName:function(b,a){b=DROP[b];if(!CU.isEmpty(b))for(var c=0;c<b.length;c++)if(b[c].name==a)return b[c];return null},getDropItemRecordByAlias:function(b,a){b=DROP[b];if(!CU.isEmpty(b))for(var c=
0;c<b.length;c++)if(b[c].alias==a)return b[c];return null},getDropChildItems:function(b,a){b=DROP[b];if(!CU.isEmpty(b)&&!CU.isEmpty(a)){a+="";for(var c=[],d=0;d<b.length;d++){var g=b[d];g.parentCode==a&&c.push(g)}return c}return null},addArrayDropList:function(b,a){if(!CU.isEmpty(b)&&!CU.isEmpty(a)&&("string"==typeof a&&(a=a.split(",")),CU.isArray(a))){for(var c=[],d=0;d<a.length;d++){var g=CU.trim(a[d]+"");0!=g.length&&c.push({code:g,name:g})}DROP[CU.trim(b+"")]=c}},addNumberDropList:function(b,
a,c){if(!(CU.isEmpty(b)||CU.isEmpty(a)||CU.isEmpty(c))){a=parseInt(a,10);c=parseInt(c,10);for(var d=[];a<=c;a++)d.push({code:a,name:a});DROP[CU.trim(b+"")]=d}},clearlyElement:function(b){return CU.isEmpty(b)?null:b="string"==typeof b?$("#"+b):$(b)},ip2String:function(b){b=parseInt(b,10);3E11<b&&(b-=3E11);b=""+b;for(var a="",c=0;0<b.length;c++){0<c&&(a="."+a);if(3<b.length){var d=b.substring(b.length-3,b.length);b=b.substring(0,b.length-3)}else d=b,b="";a=parseInt(d,10)+a}return a},toStoreObject:function(b,
a,c){if(CU.isObject(b)&&CU.isObject(a))for(var d in b){var g=b[d];CU.isEmpty(c)||(d=c+"."+d);CU.isObject(g)?CU.toStoreObject(g,a,d):a[d]=g}},toStoreData:function(b){var a=[];if(!CU.isEmpty(b)&&CU.isArray(b))for(var c=0;c<b.length;c++){var d={};CU.toStoreObject(b[c],d,"");a.push(d)}return a},upfirstChar:function(b){return CU.upperFirstChar(b)},onlyInteger:function(b){b=$(b);0>=b.length||(b.keypress(function(a){a=a||e;a=a.keyCode||a.which;return 48<=a&&57>=a}),b.keyup(function(a){/^\d+$/.test($(this).val())||
$(this).val("")}))},format:function(b,a,c,d){if(CU.isEmpty(b)||CU.isEmpty(a))return b;if(CU.isFunction(a))return a(b,c,d);a=CU.trim(a+"").toLowerCase();b=CU.trim(b+"");if("byte"==a)b=CU.toByteUnit(b);else if("time"==a)b=CU.toStringTime(b);else if("date"==a)b=CU.toStringDate(b);else if("datetime"==a)b=CU.toStringDateTime(b);else if("f2"==a)b=parseFloat(b)/100;else if("f4"==a)b=parseFloat(b)/1E4;else if("fee2"==a)b=(parseFloat(b)/100).toFixed(2);else if("fee4"==a)b=(parseFloat(b)/1E4).toFixed(4);else if("3num"==
a)b=CU.to3BitNumberFormat(b);else if("dict"==a||"enum"==a)CU.isEmpty(c)||(d=CU.isTrue(d),b=PU.getDropValue(c,b,d));else throw"The format is wrong : "+a+".";return b},format3BitNumberField:function(b){b=$(b);if(!(0>=b.length))if(1<b.length)for(var a=0;a<b.length;a++)CU.format3BitNumberField(b[a]);else{a=b[0].selectionStart;var c=b.val(),d=CU.to3BitNumberFormat(c);b.val(d);a+=d.length-c.length;CU.setInputCursorPosition(b,a)}},to3BitNumberFormat:function(b){if(CU.isEmpty(b))return b;var a=CU.trim(b+
"");b=[];for(var c=0;c<a.length;c++){var d=a.charAt(c);/\d+/.test(d)&&b.push(d)}a=[];c=b.length-1;for(d=0;0<=c;c--,d++)a.push(b[c]),0!=d&&2==d%3&&d<b.length-1&&a.push(",");b=[];for(c=a.length-1;0<=c;c--)b.push(a[c]);return a=b.join("")},encodeBase64:function(b){if(CU.isEmpty(b))return b;b=encodeURIComponent(b);return btoa(b)},decodeBase64:function(b){if(CU.isEmpty(b))return b;b=atob(b);0<=b.indexOf("%")&&(b=decodeURIComponent(b));return b},confuse:function(b){if(CU.isEmpty(b))return b;b=encodeURIComponent(b);
var a=CU.getUUID().substring(0,5);b=a.substring(0,1)+b.substring(0,1)+a.substring(1,2)+b.substring(1,2)+a.substring(2,3)+b.substring(2,3)+a.substring(3,4)+b.substring(3,4)+a.substring(4,5)+b.substring(4,5)+b.substring(5);b=btoa(b);return b=a.substring(0,1)+b.substring(0,1)+a.substring(1,2)+b.substring(1,2)+a.substring(2,3)+b.substring(2,3)+a.substring(3,4)+b.substring(3,4)+a.substring(4,5)+b.substring(4,5)+b.substring(5)},getDefaultIconStyle:function(){return"max-width:20px;max-height:20px;"},getIconHtml:function(b,
a,c){if(CU.isEmpty(b))return"";b=$.trim(b);return b.startsWith("http://")||b.startsWith("https://")||b.startsWith("/")||b.startsWith("./")||b.startsWith("../")?(b.startsWith("/")&&!b.startsWith(ContextPath)&&(b=ContextPath+b),'<img src="'+b+'" style="'+CU.getDefaultIconStyle()+(CU.isEmpty(a)?"":a)+'"></img>'):'<i class="'+b+'" '+(CU.isEmpty(a)||!0===c?"":'style="'+a+'"')+"></i>"},text2Html:function(b){return CU.isEmpty(b)?"":b.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/ /g,
"&nbsp;").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")},correctUrl:function(b){if(CU.isEmpty(b))return"/";b=CU.trim(b);if(b.startsWith("http://")||b.startsWith("https://"))return b;b.startsWith("/")||(b="/"+b);b.startsWith(ContextPath)||(b=ContextPath+b);return b},setInputCursorRange:function(b,a,c){b=$(b)[0];"selectionStart"in b?(b.selectionStart=a,b.selectionEnd=c):b.setSelectionRange?b.setSelectionRange(a,c):b.createTextRange&&(b=b.createTextRange(),b.collapse(!0),b.moveStart("character",a),b.moveEnd("character",
c),b.select())},setInputCursorPosition:function(b,a){CU.setInputCursorRange(b,a,a)},getUUID:function(){var b=(new Date).getTime();window.performance&&"function"===typeof window.performance.now&&(b+=performance.now());return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=(b+16*Math.random())%16|0;b=Math.floor(b/16);return("x"==a?c:c&3|8).toString(16)})},toHtmlAttrs:function(b,a){if(CU.isEmpty(b))return"";if(CU.isEmpty(a)){a=[];for(var c in b)CU.isEmpty(c)||CU.isFunction(b[c])||
a.push(c)}c=[];for(var d=0;d<a.length;d++){var g=b[a[d]];CU.isEmpty(g)||c.push("data-"+a[d]+'="'+g+'"')}return c.join(" ")},getHtmlAttrs:function(b,a){if(!CU.isEmpty(b)&&!CU.isEmpty(a)){b=$(b);for(var c={},d=0;d<a.length;d++){var g=b.attr("data-"+a[d]);CU.isEmpty(g)||(c[a[d]]=g)}return c}},getDateSeries:function(b,a){var c=[b];if(b<a){b=(new Date(CU.toStringDate(b)+" 00:00:00")).getTime()/1E3*1E3;for(var d=0;;d++){var g=CU.getNumberDate(new Date(b+864E5*(d+1)));c.push(g);if(g>=a)break}}return c},
getBeforeDateSeries:function(b,a){if(CU.isEmpty(a)||0>=a)a=CU.getNumberDate();a=[a];for(var c=(new Date).getTime()/1E3*1E3,d=0;d<b;d++)a.push(CU.getNumberDate(new Date(c-864E5*(d+1))));b=[];for(d=a.length-1;0<=d;d--)b.push(a[d]);return b},getAfterDateSeries:function(b,a){if(CU.isEmpty(a)||0>=a)a=CU.getNumberDate();a=[a];for(var c=(new Date).getTime()/1E3*1E3,d=0;d<b;d++)a.push(CU.getNumberDate(new Date(c+864E5*(d+1))));return a},parseStyle2Object:function(b){var a={};if(!CU.isEmpty(b)){b=b.split(";");
for(var c=0;c<b.length;c++){var d=CU.trim(b[c]),g=d.indexOf(":");if(!(0>=g)){var h=CU.trim(d.substring(0,g));d=CU.trim(d.substring(g+1));0<h.length&&0<d.length&&(a[h]=d)}}}return a},parseObject2Style:function(b){if(!CU.isObject(b))return"";var a=[];for(d in b)if(!CU.isEmpty(d)){var c=b[d];if(!CU.isEmpty(c)){var d=CU.trim(d+"");c=CU.trim(c+"");0<d.length&&0<c.length&&a.push(d,":",c,";")}}return a.join("")},getContextPath:function(){var b=window.location.href+"",a="";if(b.startsWith("http://")||b.startsWith("https://")){b=
b.substring(8);var c=b.indexOf("/");0<=c&&(b=b.substring(c+1),c=b.indexOf("/"),0<=c&&(a="/"+b.substring(0,c)))}return a},getWebRoot:function(){var b=CU.trim(window.location.href+""),a=b.startsWith("https://")?8:7,c=b.substring(0,a),d=b.substring(a);a=d.indexOf("/");if(0>=a)return b;b=d.substring(0,a);d=d.substring(a);a=c+b;!CU.isEmpty(window.ContextPath)&&1<window.ContextPath.length&&d.startsWith(window.ContextPath)&&(a+=window.ContextPath);return a},getUri:function(b){CU.isEmpty(b)||(b=CU.trim(b+
""),idx=b.indexOf("?"),0<=idx&&(b=b.substring(0,idx)),idx=b.indexOf("#"),0<=idx&&(b=b.substring(0,idx)));return b},getQueryString:function(b){var a="";CU.isEmpty(b)||(b=CU.trim(b+""),idx=b.indexOf("?"),0<=idx&&(a=b.substring(idx+1),idx=a.indexOf("#"),0<=idx&&(a=a.substring(0,idx))));return a},getDomain:function(b){if(CU.isEmpty(b)||0==(b=CU.trim(b+"")).length||!b.startsWith("http://")&&!b.startsWith("https://"))return"";b=b.substring(b.indexOf("//")+2);var a=b.indexOf("/");return 0<=a?b.substring(0,
a):b},getMyDomain:function(){return CU.getDomain(window.location.href+"")},replaceDomain:function(b,a){if(CU.isEmpty(b)||0==(b=CU.trim(b+"")).length||!b.startsWith("http://")&&!b.startsWith("https://"))return b;CU.isEmpty(a)&&(a="");var c=b.indexOf("//"),d=b.substring(0,c+2);b=b.substring(c+2);c=b.indexOf("/");a=d+a;0<=c&&(a+=b.substring(c));return a},isCrossDomain:function(b){b=CU.getDomain(b);if(CU.isEmpty(b))return!1;var a=CU.getDomain(window.location.href+"");return b!=a},getObjectValue:function(b,
a,c,d){var g=null;if(CU.isObject(b)&&!CU.isEmpty(a))if(a=CU.trim(a+""),!1!==d&&0<=a.indexOf("."))for(a=a.split("."),d=0;d<a.length&&(0==d&&(g=b),g=CU.getObjectValue(g,a[d],null,!1),!CU.isEmpty(g));d++);else g=b[a];if(void 0===g||null===g)g=c;return g},getObjectFields:function(b,a){var c={};if(!CU.isObject(b)||CU.isEmpty(a))return c;CU.isArray(a)||(a=(a+"").split(","));for(var d=0;d<a.length;d++){var g=CU.trim(a[d]);if(0!=g.length){var h=CU.getObjectValue(b,g);void 0!==h&&null!==h&&(c[g]=h)}}return c},
getObjectArrayValues:function(b,a,c,d){var g=[];if(!CU.isEmpty(b)&&0<b.length)for(var h=0;h<b.length;h++)g.push(CU.getObjectValue(b[h],a,c,d));return g},getWindowCosyHeight:function(){var b=$(window).height();if(200>b)return 200;if(700>=b)return b-50;if(800>=b)return b-100;if(900>=b)return b-150;b-=200;800<b&&(b=800);return b},isWebHttps:function(){var b=CU.trim(window.location.href+"");return CU.isHttps(b)},isHttps:function(b){return CU.trim(b+"").startsWith("https://")},toHttps:function(b){if(CU.isEmpty(b))return b;
b=CU.trim(b);b.startsWith("http://")&&(b="https://"+b.substring(7));return b},standardizingProtocol:function(b){if(!CU.isEmpty(b)){b=CU.trim(b+"");var a=0;b.startsWith("http://")&&(a=1);0==a&&b.startsWith("https://")&&(a=2);var c=CU.trim(window.location.href+""),d=0;c.startsWith("http://")&&(d=1);0==d&&c.startsWith("https://")&&(d=2);0<a&&0<d&&a!=d&&(b=1==a?"https://"+b.substring(7):"http://"+b.substring(8))}return b},standardizingProtocolAndDomain:function(b){if(!CU.isEmpty(b)){b=CU.standardizingProtocol(b);
var a=CU.getMyDomain();b=CU.replaceDomain(b,a)}return b},standardizingProtocolGlobalUrls:function(b){if(!CU.isEmpty(b)){CU.isArray(b)||(b=(b+"").split(","));for(var a=0;a<b.length;a++){var c=b[a],d=window[c];CU.isEmpty(d)||(window[c]=CU.standardizingProtocol(d))}}},standardizingProtocolDomainGlobalUrls:function(b){if(!CU.isEmpty(b)){CU.isArray(b)||(b=(b+"").split(","));for(var a=0;a<b.length;a++){var c=b[a],d=window[c];CU.isEmpty(d)||(window[c]=CU.standardizingProtocolAndDomain(d))}}},upperFirstChar:function(b){return CU.isEmpty(b)?
b:b.substring(0,1).toUpperCase()+b.substring(1)},lowerFirstChar:function(b){return CU.isEmpty(b)?b:b.substring(0,1).toLowerCase()+b.substring(1)},parseVariable:function(b,a){if(CU.isEmpty(b))return b;for(var c=b.indexOf("${"),d="",g=CU.isObject(a);0<=c;){d+=b.substring(0,c);b=b.substring(c+2);c=b.indexOf("}");if(0<=c){var h=CU.trim(b.substring(0,c));b=b.substring(c+1);0<h.length&&g&&(c=a[h],CU.isEmpty(c)||(d+=c))}c=b.indexOf("${")}0<b.length&&(d+=b);return d},getDefaultLangName:function(){return CU.isEmpty(window.LANGS)?
null:window.LANGS.DEFAULT_LANG},getCurrentLangName:function(){var b="";CU.isEmpty(window.LANGS)||(b=window.LANGS.CURRENT_LANG);CU.isEmpty(b)&&CU.isObject(window.SU)&&(b=window.SU.language);return b},getLang:function(b,a,c){if(CU.isEmpty(b))return"";b=CU.trim(b);var d=null;if(!CU.isEmpty(window.LANGS)){var g=CU.getCurrentLangName(),h=CU.getDefaultLangName(),k=null,f=null;CU.isEmpty(g)||(k=window.LANGS[g]);CU.isEmpty(h)||(f=window.LANGS[h]);CU.isEmpty(k)||(d=k[b]);CU.isEmpty(d)&&!CU.isEmpty(f)&&(d=
f[b])}CU.isEmpty(d)&&(d=a);CU.isEmpty(d)||(d=CU.parseVariable(d,c));CU.isEmpty(d)&&(d="");return d},getLangByDval:function(b){if(CU.isEmpty(b))return"";b=CU.trim(b);if(!CU.isEmpty(window.LANGS)){var a=CU.getCurrentLangName(),c=CU.getDefaultLangName();if(!CU.isEmpty(c)&&a!=c){a=window.LANGS.R_DEFAULT;if(CU.isEmpty(a)){a={};c=window.LANGS[c];if(!CU.isEmpty(c))for(var d in c){var g=c[d];CU.isEmpty(d)||CU.isEmpty(g)||(a[CU.trim(g)]=d)}window.LANGS.R_DEFAULT_LANG=a}d=a[b];CU.isEmpty(d)||(b=CU.getLang(d,
b))}}CU.isEmpty(b)&&(b="");return b},translatePageLang:function(b){b=CU.isEmpty(b)?$(".tannux-language"):CU.clearlyElement(b).find(".tannux-language");if(!CU.isEmpty(b)&&0<b.length)for(var a=0;a<b.length;a++){var c=$(b[a]),d=c.attr("tannux-lang-code");if(!CU.isEmpty(d)){var g=c.attr("tannux-lang-default"),h=c.attr("tannux-lang-params"),k=null,f=c.attr("tannux-lang-assign");if(!CU.isEmpty(h)&&0<(h=CU.trim(h)).length&&"{"==h.substring(0)&&"}"==h.substring(h.length-1))try{k=CU.toObject(h)}catch(l){console.error("parse tannux-lang-params '"+
h+"' error : "+l)}CU.isEmpty(f)&&(f="html");d=CU.getLang(d,g,k);0<=f.indexOf("html")&&c.html(d);0<=f.indexOf("value")&&c.val(d);0<=f.indexOf("title")&&c.attr("title",d)}}},getClientId:function(){var b=window.localStorage.getItem("TANNUX_CLIENT_ID");if(CU.isEmpty(b)||64!=b.length){b=CU.getUUID().replace(/-/g,"");var a=$.md5(b);if(32!=b.length||32!=a.length)throw"get client id error.";for(var c=[],d=0;32>d;d++)c.push(b.charAt(d)),c.push(a.charAt(d));b=c.join("");window.localStorage.setItem("TANNUX_CLIENT_ID",
b)}return b},parseChartLineData:function(b){for(var a=b.data,c=b.x,d=b.y,g=b.z,h=b.yempty,k=CU.isFunction(c),f=CU.isFunction(d),l=CU.isFunction(g),m=CU.isFunction(h),n=[],q=[],p={},r=0;r<a.length;r++){var t=a[r],u=t.x,v=t.y,w=t.z;k&&(u=c(u,t));f&&(v=d(v,t));l&&(w=g(w,t));CU.isEmpty(u)||CU.isEmpty(w)||(0>n.indexOf(u)&&n.push(u),0>q.indexOf(w)&&q.push(w),p[u+"$"+w]=v)}a=[];for(r=0;r<q.length;r++){w=q[r];c=[];for(d=0;d<n.length;d++)u=n[d],v=p[u+"$"+w],CU.isEmpty(v)&&m&&(v=h(u,w)),CU.isEmpty(v)&&(v=0),
c.push(v);a.push({name:w,type:"line",data:c})}if(!0===b.summary||"true"==b.summary||1==b.summary||"1"==b.summary){b=b.sumzn;CU.isEmpty(b)&&(b="\u5408\u8ba1");h=Array(n.length);for(r=0;r<a.length;r++)for(c=a[r].data,d=0;d<c.length;d++)v=c[d],m=h[d],m=CU.isEmpty(m)?v:m+v,h[d]=m;q.push(b);a.push({name:b,type:"line",data:h})}return{xs:n,zs:q,series:a}},getThumbWidth:function(b,a){CU.isEmpty(b)&&(b=$(window).width());CU.isEmpty(a)&&(a=100);a=parseInt(b/a,10);return{width:parseInt(b/a),cols:a}}};
function Queue(){var b=this;this.queue={};this.popIndex=1;this.size=this.pushIndex=0;this.add=function(a){if(null===a||void 0===a)return!1;b.pushIndex++;b.queue[b.pushIndex]=a;b.size++;return!0};this.del=function(a){if(null===a||void 0===a)return!1;var c=[],d;for(d in b.queue)b.queue[d]==a&&c.push(d);if(0<c.length)for(a=0;a<c.length;a++)delete b.queue[c[a]],b.size--;return c.length};this.delByKey=function(a,c){if(null===a||void 0===a||null===c||void 0===c)return!1;var d=[],g;for(g in b.queue){var h=
b.queue[g];CU.isObject(h)&&h[a]==c&&d.push(g)}if(0<d.length)for(a=0;a<d.length;a++)delete b.queue[d[a]],b.size--;return d.length};this.push=function(a){if(null!==a&&void 0!==a)if(CU.isArray(a))for(var c=0;c<a.length;c++)b.add(a[c]);else b.add(a)};this.pop=function(){for(var a=null;0<b.size&&b.popIndex<=b.pushIndex;){var c=b.popIndex;a=b.queue[c];if(null!==a&&void 0!==a){b.popIndex++;b.size--;delete b.queue[c];break}else b.popIndex++}return a};this.remove=function(a){if(null===a||void 0===a)return 0;
var c=0;if(CU.isArray(a))for(var d=0;d<a.length;d++){var g=b.del(a[d]);c+=g}else g=b.del(a),c+=g;return c};this.removeByKey=function(a,c){if(null===a||void 0===a||null===c||void 0===c)return!1;var d=0;if(CU.isArray(c))for(var g=0;g<c.length;g++){var h=b.delByKey(a,c[g]);d+=h}else h=b.delByKey(a,c),d+=h;return d};this.clear=function(){delete b.queue;b.queue={};b.popIndex=1;b.pushIndex=0;b.size=0};this.each=function(a,c){if(CU.isFunction(c))if(!1!==a){a=b.popIndex;for(var d=0;0<b.size&&a<=b.pushIndex;){var g=
b.queue[a];if(null!==g&&void 0!==g){g=c(g,d);if(!1===g)break;d++}a++}}else for(a=b.pushIndex,d=0;0<b.size&&a>=b.popIndex;){g=b.queue[a];if(null!==g&&void 0!==g){g=c(g,d);if(!1===g)break;d++}a--}};this.start=function(a){if(!(CU.isEmpty(a)||"number"!=typeof a||0>=a)){var c=[];b.each(!0,function(d,g){c.push(d);if(c.length==a)return!1});return c}};this.end=function(a){if(!(CU.isEmpty(a)||"number"!=typeof a||0>=a)){var c=[];b.each(!1,function(d,g){c.push(d);if(c.length==a)return!1});return c}};this.find=
function(a,c,d,g,h){if(!(CU.isEmpty(a)||CU.isEmpty(c)||0>=g)){var k=[],f=!1;b.each(h,function(l,m){if(l[a]==c){if(f=!0,d&&(k.push(l),k.length==g))return!1}else if(f&&(k.push(l),k.length==g))return!1});return k}};this.page=function(a,c,d){if(!(CU.isEmpty(a)||"number"!=typeof a||0>=a||CU.isEmpty(c)||"number"!=typeof c||0>=c)){var g=(a-1)*c,h=[];b.each(d,function(k,f){f>=g&&h.push(k);if(h.length==c)return!1});return h}}}
function Stack(){var b=this;this.stack={};this.size=this.pushIndex=0;this.add=function(a){if(null===a||void 0===a)return!1;b.pushIndex++;b.stack[b.pushIndex]=a;b.size++;return!0};this.push=function(a){if(null!==a&&void 0!==a)if(CU.isArray(a))for(var c=0;c<a.length;c++)b.add(a[c]);else b.add(a)};this.pop=function(){var a=null;if(0<b.size&&0<b.pushIndex){var c=b.pushIndex;a=b.stack[c];b.pushIndex--;b.size--;delete b.stack[c]}return a};this.clear=function(){delete b.stack;b.stack={};b.pushIndex=0;b.size=
0}};/*
 tannux-web v3.1.0 (http://tannux.com)
 Copyright 2014-2025 Tannux Technology Co., LTD
 Licensed under the Apache License, Version 2.0.
*/
var PU={getDefaultIndexPage:function(){return""},getSuffix:function(b){return 0<b.indexOf(".")?$.trim(b.substring(b.lastIndexOf(".")+1).toLowerCase()):""},getSourceType:function(b){var a=","+PU.getSuffix(b)+",";return 0<=",doc,docx,xls,xlsx,ppt,pptx,pdf,".indexOf(a)?1:0<=",bmp,tif,tiff,gif,jpg,jpeg,png,svg,ico,icon,".indexOf(a)?2:0<=",mp4,m4v,mov,qt,avi,flv,wmv,asf,mpeg,mpg,vob,mkv,rm,rmvb,vob,ts,mxf,".indexOf(a)?3:0<=",mp3,wma,wav,midi,aiff,".indexOf(a)?4:b.startsWith("data:image")?2:99},openTabModule:function(b){return window.top.THS.openTabModule(b)},
openModule:function(b){return RS.openModule(b)},openModal:function(b){if(CU.isEmpty(b)||CU.isEmpty(b.url)&&CU.isEmpty(b.mc))CC.showTip({type:"error",msg:"\u53c2\u6570\u65e0\u6548."});else{CU.isEmpty(PU.GLOBAL_WIN)&&(PU.GLOBAL_WIN=$('<div class="modal fade" role="dialog" aria-hidden="true">   <div class="modal-dialog" style="width:800px;">      <div class="modal-content">         <div class="modal-header">            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>            <h4 class="modal-title"></h4>         </div>         <div class="modal-body">         \t<iframe frameborder="0" width="100%" src="" style="height:600px;overflow:hidden;" scrolling="yes"></iframe>         </div>      </div>\t</div></div>'),
$("body").append(PU.GLOBAL_WIN),PU.GLOBAL_WIN.bind("hide.bs.modal",function(){$(PU.GLOBAL_WIN.find("iframe")[0]).attr("src","");var h=PU.GLOBAL_WIN[0].callback;PU.GLOBAL_WIN[0].config=null;PU.GLOBAL_WIN[0].callback=null;CU.isFunction(h)&&h(PU.GLOBAL_WIN,PU.GLOBAL_WIN)}));var a=b.url;CU.isEmpty(a)&&(a="/sysframe/dispatch/mc/"+b.mc);a=RS.getRemoteUrl({addroot:b.addroot,act:"simple",url:a});if(CU.isObject(b.ps)){var c=CU.parseParams(b.ps);CU.isEmpty(c)||(a+=(0>a.indexOf("?")?"?":"&")+c)}!1!==b.autoDefaultParams&&
"false"!=b.autoDefaultParams&&(a+=(0>a.indexOf("?")?"?":"&")+"hl=true&ht=true&hb=true&bgcolor=%23ffffff%3b&ppad=0&pad=0");CU.isCrossDomain(a)&&(a=RS.autoFillToken(a));var d=CU.isEmpty(b.width)?800:b.width;c=CU.isEmpty(b.height)?600:b.height;var g=b.title;CU.isEmpty(g)&&(g="");PU.GLOBAL_WIN.find(".modal-dialog").css("width",d+"px");d=$(PU.GLOBAL_WIN.find("iframe")[0]);d.css("height",c+"px");d.attr("src",a);PU.GLOBAL_WIN.find(".modal-title").html(g);PU.GLOBAL_WIN[0].config=b;PU.GLOBAL_WIN[0].callback=
b.cb;PU.GLOBAL_WIN.modal("show")}},closeModal:function(){CU.isEmpty(PU.GLOBAL_WIN)||PU.GLOBAL_WIN.modal("hide")},forwardModule:function(b){RS.forwardModule(b)},getCodeRegex:function(){return/^(([a-zA-Z])([a-zA-Z0-9]|[_]){0,39})$/},getCodeRegexText:function(){return"1-40\u4f4d\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u5408,\u5e76\u4e14\u5fc5\u987b\u4ee5\u5b57\u6bcd\u5f00\u5934!"},getDropName:function(b,a){b=DROP[b];if(CU.isEmpty(b))return"";for(var c=0;c<b.length;c++)if(b[c].code==
a)return b[c].name;return""},setRadioGroupValue:function(b,a){b=$("input[name="+b+"]");b.attr("checked",!1);if(!CU.isEmpty(a)){a+="";for(var c=0;c<b.length;c++)if($(b[c]).val()==a){b[c].checked=!0;break}}},getRadioGroupValue:function(b){return $("input[name="+b+"]:checked").val()},extractDropValue:function(b,a){return CU.isEmpty(b)?"":a&&!CU.isEmpty(b.color)?"<font color='"+b.color+"'>"+b.name+"</font>":b.name},getDropValue:function(b,a,c){b=CU.getDropItemRecord(b,a);return PU.extractDropValue(b,
c)},getDropValueByName:function(b,a,c){b=CU.getDropItemRecordByName(b,a);return PU.extractDropValue(b,c)},getDropValueByAlias:function(b,a,c){b=CU.getDropItemRecordByAlias(b,a);return PU.extractDropValue(b,c)},getDropColor:function(b,a){b=CU.getDropItemRecord(b,a);return CU.isEmpty(b)?"":b.color},getSelectOptionsHtml:function(b,a,c,d){var g=[],h=null;CU.isArray(b)&&(h=b);"string"==typeof b&&(h=DROP[b]);if(!CU.isEmpty(h))for(!1!==c&&(CU.isEmpty(d)&&(d="&nbsp;"),g.push('<option value="" '+k+">"+d+"</option>")),
b=!CU.isEmpty(a),c=0;c<h.length;c++)if(d=h[c],!(CU.isEmpty(d)||!CU.isEmpty(d.status)&&1!=d.status||!CU.isEmpty(d.isDisp)&&1!=d.isDisp)){var k=b&&a==d.code?"selected":"";g.push('<option value="'+d.code+'" '+k+">"+d.name+"</option>")}return g.join("")},filterPrefix:function(b,a){CU.isEmpty(b)||CU.isEmpty(a)||(b=b.startsWith(a)?b.substring(a.length):"");return b},addPrefix:function(b,a){CU.isEmpty(b)||CU.isEmpty(a)||(b=a+b);return b},formatValue:function(b,a){b=CU.clearlyElement(b);var c=b.attr("tannux-format");
CU.isEmpty(a)&&(a=b.attr("default-value"));if(!CU.isEmpty(a)&&!CU.isEmpty(c)){var d=null,g=null;if("dict"==c||"enum"==c)d=b.attr("dict"),CU.isEmpty(d)&&(d=b.attr("view")),g=b.attr("addcolor");else if("fun"==c&&(b=b.attr("fun"),CU.isEmpty(b)||(b=CU.getObjectValue(window,b),CU.isFunction(b)&&(c=b)),!CU.isFunction(c)))throw new "Not setting fun.";a=CU.format(a,c,d,g)}return a},getValue4Format:function(b){b=CU.clearlyElement(b);var a=b.val();b=b.attr("tannux-format");if(!CU.isEmpty(a)&&!CU.isEmpty(b))if(b=
CU.trim(b+"").toLowerCase(),a=CU.trim(a+""),"time"==b)a=CU.toNumberTime(a);else if("date"==b)a=CU.toNumberDate(a);else if("datetime"==b)a=CU.toNumberDateTime(a);else if("f2"==b||"fee2"==b)a=parseInt(100*parseFloat(a),10);else if("f4"==b||"fee4"==b)a=parseInt(1E4*parseFloat(a),10);return a},setValue4Format:function(b,a){b=CU.clearlyElement(b);a=PU.formatValue(b,a);b.val(a)},getFormData:function(b,a,c,d,g){c=!1!==c;var h=CU.isEmpty(a)?["input","select","textarea"]:CU.isArray(a)?a:(a+"").split(",");
var k=null;CU.isEmpty(g)||(k=CU.isArray(g)?g:(g+"").split(","));var f=!CU.isEmpty(k);g={};var l=CU.clearlyElement(b);if(CU.isEmpty(l))return g;for(var m=0;m<h.length;m++)for(var n=l.find(h[m]),q=0;q<n.length;q++)if(!CU.isEmpty(n[q].name)){var p="";CU.isEmpty(n[q].type)||(p=n[q].type.toLowerCase());var r=$(n[q]),t=PU.filterPrefix(n[q].name,d);if(!CU.isEmpty(t)){var u="checkbox"==p?r.is(":checked")?1:0:"radio"==p?r.is(":checked")?r.val():g[t]:r.hasClass("bootstrap-slider")?r.data("slider").getValue():
PU.getValue4Format(r);if(null===u||void 0===u){if(!c)continue;u=null}p=r.attr("displayName");var v=null;CU.isEmpty(u)||CU.isEmpty(p)||"select"!=CU.trim(h[m]).toLowerCase()||(v=r.find("option:selected").text());f&&0<=k.indexOf(t)?(r=g[t],CU.isEmpty(r)&&(r=[],g[t]=r),r.push(u),!CU.isEmpty(p)&&0<=k.indexOf(p)&&(t=g[p],CU.isEmpty(t)&&(t=[],g[p]=t),t.push(v))):(g[t]=u,CU.isEmpty(v)||(g[p]=v))}}CU.isFunction(PU.externalGetFormData)&&(b=PU.externalGetFormData(g,b,a,c,d),CU.isObject(b)&&(g=b));return g},
setFormData:function(b,a,c,d,g){if(CU.isObject(b)){var h=CU.isEmpty(c)?["input","select","textarea"]:CU.isArray(c)?c:(c+"").split(",");var k=CU.clearlyElement(a);if(!CU.isEmpty(k)){d=!0===d;for(var f=0;f<h.length;f++)for(var l=k.find(h[f]),m=0;m<l.length;m++){var n=l[m].name;if(!CU.isEmpty(n)&&(n=PU.filterPrefix(n,g),!CU.isEmpty(n))){n=b[n];if(null===n||void 0===n){if(d)continue;n=""}var q="";CU.isEmpty(l[m].type)||(q=l[m].type.toLowerCase());var p=$(l[m]);"checkbox"==q?p.prop("checked",1==n||"1"==
n||"true"==n||1==n):"radio"==q?(q=p.val()+"",p.prop("checked",q==n+"")):p.hasClass("bootstrap-slider")?p.data("slider").setValue(n):p.hasClass("item-form-colorpicker")?p.colorpicker("setValue",n):PU.setValue4Format(p,n)}}CU.isFunction(PU.externalSetFormData)&&PU.externalSetFormData(b,a,c,d,g)}}},clearFormData:function(b,a,c){var d=CU.isEmpty(a)?["input","select","textarea"]:CU.isArray(a)?a:(a+"").split(",");var g=CU.clearlyElement(b);if(!CU.isEmpty(g)&&0!=g.length){for(var h=0;h<d.length;h++)for(var k=
g.find(d[h]),f=0;f<k.length;f++){var l=k[f].name;CU.isEmpty(l)||!CU.isEmpty(c)&&!l.startsWith(c)||(l="",CU.isEmpty(k[f].type)||(l=k[f].type.toLowerCase()),"checkbox"==l||"radio"==l?$(k[f]).prop("checked",!1):$(k[f]).val(""))}CU.isFunction(PU.externalClearFormData)&&PU.externalClearFormData(b,a,c)}},setFormDisabled:function(b,a,c){var d=CU.isEmpty(c)?["input","select","textarea"]:CU.isArray(c)?c:(c+"").split(",");var g=CU.clearlyElement(b);if(!CU.isEmpty(g)){a=CU.isTrue(a);for(var h=0;h<d.length;h++)for(var k=
g.find(d[h]),f=0;f<k.length;f++)if(!CU.isEmpty(k[f].name)){var l="";CU.isEmpty(k[f].type)||(l=k[f].type.toLowerCase());var m=$(k[f]);"textarea"!=d[h]&&("input"!=d[h]||"checkbox"==l||"radio"==l||!CU.isEmpty(m.attr("data-provide"))||m.hasClass("item-form-datepicker")||m.hasClass("item-form-datetimepicker")||m.hasClass("item-form-timepicker")||m.hasClass("item-form-colorpicker"))?m.prop("disabled",a):m.hasClass("bootstrap-slider")?a?m.slider("disable"):m.slider("enable"):m.prop("readOnly",a)}g.find(".tannux-classify-upload-field").attr("data-editable",
!a);CU.isFunction(PU.externalSetFormDisabled)&&PU.externalSetFormDisabled(b,a,c)}},getFormDataBatchRecords:function(b,a,c,d,g){if(!CU.isEmpty(a)){a=CU.isArray(a)?a:(a+"").split(",");d=CU.isTrue(d);for(var h=[],k=0;k<a.length;k++){var f=a[k],l=b[f];var m=f==g?"id":PU.filterPrefix(f,c);if(!CU.isEmpty(l))for(var n=0;n<l.length;n++){var q=l[n];if(h.length<=n){var p={};h.push(p)}else p=h[n];p[m]=q}d&&delete b[f]}return h}},getCdtVal:function(b,a){b=$("#"+b);var c=b.val();!CU.isEmpty(c)&&b.is("input")&&
(c=CU.isEmpty(a)||0==a?"%"+c+"%":0<a?c+"%":"%"+c);return c},getCdtVals:function(b,a){var c={};if(!CU.isEmpty(b))for(var d=0;d<b.length;d++){var g=PU.getCdtVal(b[d],a);if(!CU.isEmpty(g)){var h=b[d];0==h.indexOf("cdt_")&&(h=h.substring(4));c[h]=g}}return c},getCustomPrefixVals:function(b,a,c){var d={};if(!CU.isEmpty(b))for(var g=a.length,h=0;h<b.length;h++){var k=$("#"+b[h]).val();if(!0===c||!CU.isEmpty(k)){var f=b[h];0==f.indexOf(a)&&(f=f.substring(g));d[f]=k}}return d},setCustomPrefixVals:function(b,
a,c){if(!CU.isEmpty(b))for(var d=a.length,g=0;g<b.length;g++){var h=b[g];0==h.indexOf(a)&&(h=h.substring(d));h=c[h];if(null==h||void 0==h)h="";$("#"+b[g]).val(h)}},clearCustomPrefixVals:function(b,a){if(!CU.isEmpty(b))for(var c=a.length,d=0;d<b.length;d++){var g=b[d];0==g.indexOf(a)&&g.substring(c);$("#"+b[d]).val("")}},getShortString:function(b,a){if(CU.isEmpty(b))return"";CU.isEmpty(a)&&(a=6);b.length>a&&(b=b.substring(0,a)+"...");return b},submitEditable:function(b){var a=new $.Deferred;RS.ajax({url:b.url,
ps:b.ps,msg:b.msg,cb:function(c){a.resolve();CU.isFunction(b.cb)&&b.cb(c)},errcb:function(c,d){CU.isFunction(b.errcb)&&!1===b.errcb(c,d,a)||a.reject(d)}});return a.promise()},getElementObject:function(b){return CU.clearlyElement(b)},getElementAttrs:function(b,a){"string"==typeof a&&(a=a.split(","));if(!CU.isArray(a))return null;b=PU.getElementObject(b);for(var c={},d=0;d<a.length;d++){var g=a[d],h=b.attr(g);CU.isEmpty(h,!0,!1)||(c[g]=h)}return c},setElementAttrs:function(b,a){if(CU.isObject(a)){b=
PU.getElementObject(b);for(var c in a){var d=a[c];CU.isEmpty(d,!0,!1)||b.attr(c,d)}}},setPageData:function(b,a,c,d,g){if(!CU.isEmpty(b)&&!CU.isEmptyObject(b))if(a=CU.clearlyElement(a),CU.isEmpty(d)&&(d="for-name"),d=CU.trim(d),CU.isEmpty(c)){var h=CU.isEmpty(a)?$("["+d+"]"):a.find("["+d+"]");PU.setPageItemData(h,b,d,g)}else{CU.isArray(c)||(c=(c+"").split(","));for(var k=0;k<c.length;k++)h=c[k],CU.isEmpty(h)||(h=CU.trim(h)+"["+d+"]",h=CU.isEmpty(a)?$(h):a.find(h),PU.setPageItemData(h,b,d,g))}},setPageItemData:function(b,
a,c,d){if(!(CU.isEmpty(b)||0>=b.length||CU.isEmpty(a)||CU.isEmptyObject(a))){CU.isEmpty(c)&&(c="for-name");c=CU.trim(c);for(var g=0;g<b.length;g++){var h=$(b[g]),k=h.attr(c);if(!CU.isEmpty(k)){k=CU.trim(k);k=CU.getObjectValue(a,k);k=PU.formatValue(h,k);if(CU.isEmpty(k)){if(!0===d||"true"==d)continue;k=""}var f=h[0].tagName.toLowerCase();"input"!=f&&"select"!=f&&"textarea"!=f||h.val(k);if("img"==f||"image"==f){if(!(CU.isEmpty(k)||CU.isEmpty(window.ContextPath)||k.startsWith(window.ContextPath)||k.startsWith("http://")||
k.startsWith("https://"))){f=h.attr("data-ps");if(!CU.isEmpty(f)&&2<(f=CU.trim(f+"")).length&&"{"==f.charAt(0)&&"}"==f.charAt(f.length-1))try{f=CU.toObject(f)}catch(l){console.error("image-ps toObject error: ["+f+"] "+l)}k=PU.toRsmImageUrl(k,f)}h.attr("src",k)}else h.html(k)}}}},verifyToken:function(b){var a=window.localStorage.getItem("token");if(CU.isEmpty(b)){if(CU.isEmpty(b)&&(b=a),CU.isEmpty(b)&&CU.isEmpty(window.SU))return PU.getCC().logout(),!1}else PU.setToken(b);a!=b&&PU.removeMenuTreeData();
return!0},setRefreshTokenTimer:function(b){CU.isEmpty(b)||0>=parseInt(CU.trim(b+""),10)||setTimeout(function(){PU.refreshToken(function(a){PU.setRefreshTokenTimer(b)},function(a){PU.setRefreshTokenTimer(b);throw" refresh-token failure! "+a;})},36E5*b)},refreshToken:function(b,a,c){var d={};CU.isEmpty(c)||(d.upsu=c);RS.ajax({url:"/sso/client/oauth/refreshToken",ps:d,cb:function(g){PU.setToken(g);PU.removeMenuTreeData();CU.isFunction(b)&&b(g)},errcb:function(g){if(CU.isFunction(a))a(g);else throw" refresh-token failure! "+
g;}})},getTokenTimeoutHour:function(){},verifyRefreshToken:function(){var b=PU.getTokenTimeoutHour();if(CU.isEmpty(b)||0>=b)return!1;var a=PU.getToken();if(CU.isEmpty(a))return!1;a=window.localStorage.getItem("TANNUX_SET_TOKEN_TIME");if(!CU.isEmpty(a)&&(a=parseInt(a,10),((new Date).getTime()-a)/1E3/60/60<b))return!1;PU.refreshToken();return!0},getToken:function(){return token=window.localStorage.getItem("token")},setToken:function(b){CU.isEmpty(b)&&(b="");window.localStorage.setItem("token",b);window.localStorage.setItem("TANNUX_SET_TOKEN_TIME",
(new Date).getTime()+"")},removeToken:function(){window.localStorage.removeItem("token");window.localStorage.removeItem("TANNUX_SET_TOKEN_TIME");CU.removeCookie("token")},removeUrlToken:function(){for(var b=window.location.href+"",a=null;;){var c=b.indexOf("token");if(1>c)break;var d=CU.trim(b.substring(0,c));b=CU.trim(b.substring(c+5));c=!1;if(1<d.length){var g=d.charAt(d.length-1);"?"!=g&&"&"!=g||"="!=b.charAt(0)||(b=CU.trim(b.substring(1)),c=b.indexOf("&"),0<=c?(b=CU.trim(b.substring(c+1)),a=d+
b):a=d.substring(0,d.length-1),c=!0)}if(c)b=a;else break}if(!CU.isEmpty(a))try{window.history.pushState({},"",a)}catch(h){console.error("window.history.pushState error : "+a)}},getThumbTable:function(b){return new PrettyThumbTable(b)},getDataTable:function(b){return new PrettyDataTable(b)},getDataTableChildExpander:function(b){return new PrettyDataTableChildExpander(b)},getTree:function(b){return new PrettyTree(b)},getForm:function(b){return new PrettyForm(b)},getSelect2:function(b){var a=$.extend({placeholder:"",
minimumInputLength:0,maximumInputLength:20,language:"zh-CN"},b);if(!1!==b.remote){var c=a.ajax;CU.isEmpty(c)&&(c=$.extend({},a));c=$.extend({dataType:"json",type:"post",delay:500,cache:!0,act:"rest2"},c);c.url=RS.getRemoteUrl(c);CU.isEmpty(c.headers)&&(c.headers={});c.headers.REQUEST_HEADER="tannux-http-client-header";c.headers["Content-Type"]="application/json";RS.onBeforeHeaders(c.headers,b);RS.appendToken(c.url,c.headers);a.ajax=c}return CU.clearlyElement(b.bid).select2(a)},getColumnTable:function(b){return new PrettyColumnTable(b)},
getImagePreview:function(){CU.isEmpty(PU.IMAGE_PREVIEW)&&(PU.IMAGE_PREVIEW=new PrettyImagePreview);return PU.IMAGE_PREVIEW},getTextPreview:function(){CU.isEmpty(PU.TEXT_PREVIEW)&&(PU.TEXT_PREVIEW=new PrettyTextPreview);return PU.TEXT_PREVIEW},showImagePreview:function(b,a){PU.getImagePreview().show(b,a)},showTextPreview:function(b){PU.getTextPreview().show(b)},refreshImagePreview:function(b,a){PU.refreshImagePreview(b,a)},getRsmChooser:function(){CU.isEmpty(PU.RSM_CHOOSER)&&(PU.RSM_CHOOSER=new PrettyRsmChooser);
return PU.RSM_CHOOSER},showRsmChooser:function(b,a){PU.getRsmChooser().show(b,a)},getOmstdChooser:function(){CU.isEmpty(PU.OMSTD_CHOOSER)&&(PU.OMSTD_CHOOSER=new PrettyOmstdChooser);return PU.OMSTD_CHOOSER},showOmstdChooser:function(b,a){PU.getOmstdChooser().show(b,a)},getUploadField:function(b){return new PrettyUploadField(b)},getClassifyUploadDirRoot:function(){},getUpdateClassifyAttachNumRoot:function(b,a,c){},classifyUploadCallback:function(b,a,c){if(!0===a||"true"==a)a=PU.getUpdateClassifyAttachNumRoot(b,
a,c),RS.ajax({addroot:a,url:"/tannux/common/tool/updateClassifyAttachNum",ps:{classify:b},cb:function(d){console.log("--------------------- classify:"+b+", count:"+d+" -----------------------");var g=c.field;CU.isEmpty(g)||CU.isEmpty(d)||PU.setClassifyUploadFieldValue(g,d)}})},showClassifyUploadWin:function(b){if(CU.isEmpty(b)||CU.isEmpty(b.tableCode)||CU.isEmpty(b.tableName)||CU.isEmpty(b.attachCode)||CU.isEmpty(b.attachName)||CU.isEmpty(b.key))PU.getCC().showTip({type:"error",msg:"\u53c2\u6570\u65e0\u6548."});
else{var a=!0===b.editable||"true"==b.editable;CU.isEmpty(PU.CLASSIFY_UPLOAD_WIN)&&(PU.CLASSIFY_UPLOAD_WIN=$(['<div class="modal fade" role="dialog" aria-hidden="true">   <div class="modal-dialog" style="width:',a?"1100":"800",'px;">      <div class="modal-content">         <div class="modal-header">            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>            <h4 class="modal-title">\u8d44\u6e90\u6587\u4ef6\u4e0a\u4f20</h4>         </div>         <div class="modal-body">         \t<iframe frameborder="0" width="100%" src="" style="height:650px;overflow:hidden;" scrolling="yes"></iframe>         </div>      </div>\t</div></div>'].join("")),
$("body").append(PU.CLASSIFY_UPLOAD_WIN),PU.CLASSIFY_UPLOAD_WIN.bind("hide.bs.modal",function(){PU.CLASSIFY_UPLOAD_WIN.find("iframe").attr("src","");var g=PU.CLASSIFY_UPLOAD_WIN.attr("classify"),h=PU.CLASSIFY_UPLOAD_WIN.attr("editable");h=!0===h||"true"==h;var k=PU.CLASSIFY_UPLOAD_WIN[0].callback;CU.isFunction(k)||(k=PU.CLASSIFY_UPLOAD_CALLBACK);CU.isFunction(k)||(k=PU.classifyUploadCallback);CU.isFunction(k)&&k(g,h,PU.CLASSIFY_UPLOAD_WIN[0].config);PU.CLASSIFY_UPLOAD_WIN[0].config=null;PU.CLASSIFY_UPLOAD_WIN[0].callback=
null;PU.CURRENT_CLASSIFY_UPLOAD=null}));var c=(CU.trim(b.tableCode+"")+"-"+CU.trim(b.attachCode+"")+"-"+CU.trim(b.key+"")).toUpperCase(),d=CU.isEmpty(b.dirRoot)?PU.getClassifyUploadDirRoot():CU.trim(b.dirRoot+"");CU.isEmpty(d)&&(d="");d=encodeURIComponent(d+"/"+CU.trim(b.tableName+"")+"/"+CU.trim(b.attachName+""));d=(CU.isEmpty(window.RsmWebRoot)?window.RsmServerRoot:window.RsmWebRoot)+"/api/simple/sysframe/dispatch/mc/06810202?hl=true&ht=true&hb=true&ppad=0&pad=0&bgcolor=%23ffffff%3b&dirPath="+d+
"&oup="+a+"&orm="+a+"&classify="+c+"&token="+PU.getToken();CU.isEmpty(b.title)&&(b.title="\u8d44\u6e90\u6587\u4ef6\u4e0a\u4f20&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;"+b.tableName+"&nbsp;/&nbsp;"+b.attachName);PU.CLASSIFY_UPLOAD_WIN.find("iframe").attr("src",d);PU.CLASSIFY_UPLOAD_WIN.find(".modal-title").html(b.title);PU.CLASSIFY_UPLOAD_WIN.attr("classify",c);PU.CLASSIFY_UPLOAD_WIN.attr("editable",a+"");PU.CLASSIFY_UPLOAD_WIN[0].config=b;PU.CLASSIFY_UPLOAD_WIN[0].callback=b.cb;PU.CLASSIFY_UPLOAD_WIN.modal("show")}},
onClassifyUploadClick:function(b){b=$(this);var a=b.attr("data-table-code"),c=b.attr("data-table-name"),d=b.attr("data-attach-code"),g=b.attr("data-attach-name"),h=b.attr("data-key"),k=b.attr("data-editable");b={tableCode:a,tableName:c,attachCode:d,attachName:g,key:h,editable:k,field:b};CU.isEmpty(b.key)?CC.showTip({type:"error",msg:"\u8bf7\u5148\u4fdd\u5b58\u6570\u636e\u540e\u518d\u4e0a\u4f20\u9644\u4ef6."}):PU.showClassifyUploadWin(b)},setClassifyUploadFieldValue:function(b,a,c){CU.isEmpty(b)||
(CU.isEmpty(a)&&(a="0"),b=CU.clearlyElement(b),b.attr("data-value",a),void 0!==c&&null!==c&&b.attr("data-key",c),b.trigger("value-change"))},clearClassifyUploadFieldValue:function(b){PU.setClassifyUploadFieldValue(b,"0","")},onClassifyUploadChange:function(b){b=$(this);var a=b.attr("data-value");CU.isEmpty(a)&&(a=0);b.find(".tannux-classify-upload-field-value").html(a)},bindClassifyUploadClick:function(b){CU.isEmpty(b)?b=$(".tannux-classify-upload-field"):(b=CU.clearlyElement(b),b=b.find(".tannux-classify-upload-field"));
if(!CU.isEmpty(b)&&0<b.length)for(var a=0;a<b.length;a++){var c=$(b[a]);c.css("cursor","pointer");var d=c.attr("data-value");CU.isEmpty(d)&&(d="0");if(CU.isEmpty(c.html())){var g=c.css("padding");(CU.isEmpty(g)||0==g||"0"==g||"0px"==g)&&c.css("padding-top","5px");c.html('<i class="fa fa-upload fa-lg"></i>&nbsp;&nbsp;(<span class="tannux-classify-upload-field-value">'+d+"</span>)")}c.bind("click",PU.onClassifyUploadClick);c.bind("value-change",PU.onClassifyUploadChange)}},buildSelectFields:function(b){CU.isEmpty(b)?
b=$(".tannux-input-select"):(b=CU.clearlyElement(b),b=b.find(".tannux-input-select"));if(!CU.isEmpty(b)&&0<b.length)for(var a=0;a<b.length;a++){var c=$(b[a]),d=c.attr("dict");CU.isEmpty(d)&&(d=c.attr("view"));if(!CU.isEmpty(d)){var g=c.attr("selectValue"),h=c.attr("addEmpty"),k=c.attr("emptyName");h=CU.isEmpty(h)||1==h||"1"==h||!0===h||"true"==h;c.html(PU.getSelectOptionsHtml(d,g,h,k))}}},toRsmUrl:function(b,a){return RS.toRsmUrl(b,a)},toRsmImageUrl:function(b,a){return RS.toRsmImageUrl(b,a)},appendBreadLineParams:function(b,
a){if(!CU.isEmpty(b)&&CU.isObject(a)&&(a=CU.parseParams(a),!CU.isEmpty(a)&&(b=$(".breadcrumb a[menuCode='"+b+"']"),!CU.isEmpty(b)&&0<b.length))){b=$(b[0]);var c=b.attr("href");CU.isEmpty(c)||(c+=(0>c.indexOf("?")?"?":"&")+a,b.attr("href",c))}},onSummernoteUploadFiles:function(b,a,c,d){if(!CU.isEmpty(a)&&0!=a.length){CU.isEmpty(d)&&(d="files");for(var g=new FormData,h=0;h<a.length;h++)g.append(d,a[h]);RS.ajax({url:c,act:"form",ps:g,bscfg:{processData:!1,contentType:!1},upload:!0,cb:function(k){if(!CU.isEmpty(k))for(var f=
0;f<k.length;f++)b.summernote("insertImage",RsmAccessRoot+k[f])}})}},getSummernote:function(b,a){if(CU.isEmpty(b))throw"'selector' is empty!";CU.isEmpty(a)&&(a={});CU.isEmpty(a.height)&&(a.height=600);CU.isEmpty(a.focus)&&(a.focus=!1);CU.isEmpty(a.toolbar)&&(a.toolbar=[["undo",["undo","redo","clear"]],["fontname",["fontname","fontsize"]],["style",["bold","italic","underline","strikethrough"]],["color",["color"]],["para",["ol","ul","\u589e\u52a0\u7f29\u8fdb","\u51cf\u5c11\u7f29\u8fdb"]],["style",["paragraph",
"height","style"]],["table",["table","hr","link"]],["insert",["picture"]],["fullscreen",["fullscreen","codeview"]]]);CU.isEmpty(a.fontSizes)&&(a.fontSizes="5 6 7 8 9 10 11 12 13 14 15 16 18 20 22 24 26 28 30 32 34 36 38 40 42 44 46 48".split(" "));if(!CU.isEmpty(a.insertButtons)){for(var c=!1,d=0;d<a.toolbar.length;d++){var g=a.toolbar[d];if("insert"==g[0]){g[1]=a.insertButtons;c=!0;break}}c||a.toolbar.push(["insert",a.insertButtons])}CU.isEmpty(a.fontNames)&&(a.fontNames="Arial;Arial Black;Comic Sans MS;Courier New;\u4eff\u5b8b;\u5b8b\u4f53;\u5fae\u8f6f\u96c5\u9ed1;\u65b0\u5b8b\u4f53;\u6977\u4f53;\u9ed1\u4f53;\u7b49\u7ebf;\u7b49\u7ebf Light".split(";"));
CU.isEmpty(a.callbacks)&&(a.callbacks={onImageUpload:function(h){PU.onSummernoteUploadFiles($(this),h,"/sys/upload/uploadFiles")},onPaste:function(h){var k=((h.originalEvent||h).clipboardData||window.clipboardData).getData("text/plain");h.preventDefault?h.preventDefault():h.returnValue=!1;setTimeout(function(){document.execCommand("insertText",!1,k)},10)}});CU.isEmpty(a.lang)&&(a.lang="zh-CN");return $(b).summernote(a)},getDynamicFormSelectOptionsHtml:function(b){var a=[];switch(b){case 1:a.push('<option value="2">\u6570\u503c\u6846</option>');
break;case 2:a.push('<option value="2">\u6570\u503c\u6846</option>');break;case 3:a.push('<option value="1">\u6587\u672c\u6846</option>');a.push('<option value="3">\u65e5\u671f\u6846</option>');break;case 4:a.push('<option value="1">\u6587\u672c\u6846</option>');a.push('<option value="5">\u6587\u672c\u57df</option>');a.push('<option value="6">\u5bcc\u6587\u672c</option>');break;case 5:a.push('<option value="5">\u6587\u672c\u57df</option>');a.push('<option value="6">\u5bcc\u6587\u672c</option>');break;
case 6:a.push('<option value="7">\u4e0b\u62c9\u5217\u8868</option>'),a.push('<option value="8">\u5355\u9009\u6846</option>')}return a.join("")},getDynamicFormWidth:function(b,a,c){CU.isEmpty(a)&&(a=120);CU.isEmpty(c)&&(c=250);return(a+c)*b+35},getDynamicFormDom:function(b){if(CU.isEmpty(b))throw"the config is empty!";var a=[],c=b.attrs,d=b.conf;if(!CU.isEmpty(c)&&!CU.isEmpty(d)){var g=b.labelWidth,h=b.fieldWidth,k=b.textAreaHeight,f=b.richTextHeight;CU.isEmpty(g)&&(g=120);CU.isEmpty(h)&&(h=250);var l=
g+h;CU.isEmpty(k)&&(k=100);CU.isEmpty(f)&&(f=300);var m={};for(h=0;h<c.length;h++){var n=c[h];m["attr_"+n.id]=n}for(h=0;h<d.length;h++){c=d[h];a.push('<div class="form-group">');if(!(CU.isEmpty(c)||CU.isEmpty(c[0])&&CU.isEmpty(c[1])&&CU.isEmpty(c[2])))for(var q=0;q<c.length;q++)if(n=c[q],CU.isEmpty(n)||CU.isEmpty(n.f)||CU.isEmpty(m["attr_"+n.f]))a.push('<div class="pull-left" style="width:',l,'px;"></div>');else{var p=m["attr_"+n.f],r=parseInt(n.c,10);n=parseInt(n.w,10)*l;var t=n-g;a.push('<div class="pull-left" style="width:'+
n+'px;">','<label for="',p.proStdCode,'" class="control-label pull-left" style="width:',g,'px;">',p.proName);1==p.isRequired&&a.push('<font color="red">*</font>');a.push("\uff1a</label>");a.push('<div class="pull-left" style="width:',t,'px;">');switch(r){case 1:a.push('<input type="text" id="',p.proStdCode,'" name="',p.proStdCode,'" ',1==p.isRequired?"required":"",' class="form-control" maxLength=65 style="width:',t,'px;">');break;case 2:a.push('<input type="number" id="',p.proStdCode,'" name="',
p.proStdCode,'" ',1==p.isRequired?"required":"",' class="form-control" maxLength=20 style="width:',t,'px;">');break;case 3:a.push('<input id="',p.proStdCode,'" name="',p.proStdCode,'" ',1==p.isRequired?"required":"",' class="form-control" maxLength=20 style="width:',t,'px;" data-provide="datepicker" data-date-autoclose="true" data-date-format="yyyy-mm-dd">');break;case 5:a.push('<textarea id="',p.proStdCode,'" name="',p.proStdCode,'" ',1==p.isRequired?"required":"",' class="form-control" maxLength=333 style="width:',
t,"px;height:",k,'px;"></textarea>');break;case 6:a.push('<div id="',p.proStdCode,'" name="',p.proStdCode,'" ',1==p.isRequired?"required":"",' class="summernote" style="width:',t,'px;"></div>');break;case 7:a.push('<select id="',p.proStdCode,'" name="',p.proStdCode,'" ',1==p.isRequired?"required":"",' class="form-control" style="width:',t,'px;">');a.push('<option value="">&nbsp;</option>');r=p.enumVals;if(!CU.isEmpty(r))for(r=r.split("|"),n=0;n<r.length;n++)a.push('<option value="',r[n],'">',r[n],
"</option>");a.push("</select>");break;case 8:if(r=p.enumVals,!CU.isEmpty(r))for(r=r.split("|"),n=0;n<r.length;n++)a.push('<label class="fancy-radio custom-color-blue" style="margin-top:7px;"><input name="',p.proStdCode,'" value="',r[n],'" type="radio" '+(0==n?"checked":"")+"><span><i></i>",r[n],"</span></label>")}a.push("</div>");a.push("</div>")}a.push("</div>")}a=$(a.join(""));d=a.find(".summernote");if(!CU.isEmpty(d)&&0<d.length)for(h=0;h<d.length;h++)$(d[h]).summernote({height:f,lang:"zh-CN",
focus:!0,callbacks:{onImageUpload:function(u){PU.onSummernoteUploadFiles($(this),u,b.uploadUrl,b.uploadFileName)}}});return a}return $("")},getDataTableByConfig:function(b,a,c,d,g){if(CU.isEmpty(b))PU.getCC().showTip({type:"error",msg:"\u7ed1\u5b9a\u9875\u9762\u5143\u7d20ID\u4e3a\u7a7a!"});else if(CU.isEmpty(a)||CU.isEmpty(a.grid))PU.getCC().showTip({type:"error",msg:"\u5217\u8868\u914d\u7f6e\u4e3a\u7a7a!"});else if(CU.isEmpty(a.cols))PU.getCC().showTip({type:"error",msg:"\u67e5\u8be2\u5217\u8868\u6ca1\u6709\u914d\u7f6e\u5217!"});
else if(CU.isEmpty(a.attrs))PU.getCC().showTip({type:"error",msg:"\u67e5\u8be2\u5217\u8868\u914d\u7f6e\u6a21\u578b\u6ca1\u6709\u5c5e\u6027!"});else{var h=$.extend({showSearchFilter:!0},a.grid);CU.isEmpty(a.grid.gridConfig)||(h=$.extend(h,CU.toObject(a.grid.gridConfig)));h.bid=b;if(1===a.grid.modelType||"1"==a.grid.modelType)h.url="/omdb/ominst/queryInfoPage";b=a.cols;var k=a.attrs;a=a.dictMap;if(!CU.isEmpty(a))for(var f in a)DROP["FV_DICT_DROP_"+f]=a[f];f={};for(a=0;a<k.length;a++){var l=k[a];f[l.id]=
l}k=[];if(!CU.isEmpty(g))for(CU.isArray(g)||(g=(g+"").split(",")),a=0;a<g.length;a++){l=CU.trim(g[a]);var m="";switch(l){case "code":m="\u6570\u636e\u4ee3\u7801";break;case "dispShort":m="\u7b80\u79f0";break;case "dispFull":m="\u5168\u79f0";break;case "ownerCode":m="\u7528\u6237\u7f16\u7801";break;case "ownerName":m="\u7528\u6237\u540d\u79f0"}CU.isEmpty(m)||k.push({title:m,data:"inst."+l,align:"center"})}for(a=0;a<b.length;a++)if(g=b[a],l=f[g.attrId],!CU.isEmpty(l)){l="data."+l.attrStdCode;var n=
1===g.align?"left":3==g.align?"right":"center",q=1===g.visible||!0===g.visible||"1"==g.visible||"true"==g.visible,p=1===g.cdtable||!0===g.cdtable||"1"==g.cdtable||"true"==g.cdtable,r=1===g.dtime||!0===g.dtime||"1"==g.dtime||"true"==g.dtime,t=1===g.colorable||!0===g.colorable||"1"==g.colorable||"true"==g.colorable;m=CU.isEmpty(g.dictId)?"":"FV_DICT_DROP_"+g.dictId;var u="";if(!CU.isEmpty(g.ctype))switch(g.ctype=parseInt(g.ctype,10)){case 1:u="string";break;case 2:u="number";break;case 3:u="enum";break;
case 4:u="date";break;case 5:u="dateinval";break;case 6:u="numinval"}l={title:g.title,data:l,align:n,visible:q,cdtable:p,orderable:!1,ctype:u,decbit:g.decbit,dtime:r,colorable:t,view:m,cdtMaxLength:g.cdtMaxLength,render:g.render};6==g.fieldType&&!CU.isEmpty(m)&&CU.isEmpty(l.render)&&(l.render=PrettyDataTable_DefaultRenderer);k.push(l)}k.push({title:"\u521b\u5efa\u65f6\u95f4",data:"inst.createTime",align:"center",visible:!0,cdtable:!0,ctype:"dateinval",dtime:!0,orderable:!1,render:function(v,w,y,z){return CU.isFunction(d)?
d(v,w,y,z):CU.toStringDateTime(v)}});h.columns=k;CU.isEmpty(h.getParams)&&(h.getParams=PrettyDataTable_Omdb_getParams);if(CU.isObject(c)){if(!CU.isEmpty(c.columns))for(a=0;a<c.columns.length;a++)h.columns.push(c.columns[a]);delete c.columns;$.extend(h,c)}for(a=0;a<h.columns.length;a++)g=h.columns[a],CU.isEmpty(g.width)&&(g.width=160);return new PrettyDataTable(h)}},getDataFormByConfig:function(b,a){if(CU.isEmpty(b))PU.getCC().showTip({type:"error",msg:"\u7ed1\u5b9a\u9875\u9762\u5143\u7d20ID\u4e3a\u7a7a!"});
else if(CU.isEmpty(a)||CU.isEmpty(a.form))PU.getCC().showTip({type:"error",msg:"\u8868\u5355\u914d\u7f6e\u4e3a\u7a7a!"});else if(CU.isEmpty(a.items))PU.getCC().showTip({type:"error",msg:"\u8868\u5355\u914d\u7f6e\u5b57\u6bb5\u4e3a\u7a7a!"});else if(CU.isEmpty(a.attrs))PU.getCC().showTip({type:"error",msg:"\u8868\u5355\u914d\u7f6e\u6a21\u578b\u5c5e\u6027\u4e3a\u7a7a!"});else{var c=a.form;c.bid=b;c.items=a.items;c.attrs=a.attrs;c.dictDropMap=a.dictDropMap;return new PrettyDataForm(c)}},setTableSelectRow:function(b,
a){b=CU.clearlyElement(b);b=b.find("tr");if(!CU.isEmpty(b)&&0<b.length)for(var c=0;c<b.length;c++){var d=$(b[c]),g=d.attr("id");d.css("background-color",a==g?"#E8F4F8":"#ffffff")}},getPagePathKey:function(b){var a=window.location.pathname+"";CU.isEmpty(b,!0)&&(b="/api/simple");if(!CU.isEmpty(b)){var c=a.indexOf(b);0<=c&&(a=a.substring(c+b.length))}return a},parseSearchCondition:function(b){CU.isEmpty(b)&&(b={});var a=CU.trim(b.searchFieldFuzzy);!CU.isEmpty(a)&&/^[/][0-9]+([,][0-9]+)*[.].+$/.test(a)&&
(b.searchFieldFuzzy="",a=a.substring(1,a.indexOf(".")),0<a.indexOf(",")?b.ids=a.split(","):b.id=a);return b},getNewsRich:function(b){return new PrettyRichEditor(b)},getCC:function(){for(var b=window,a=null,c=CC;!CU.isEmpty(a=b.parent)&&b!=a;)try{b=a,CU.isEmpty(b.CC)||(c=b.CC)}catch(d){break}return c},getParentMethod:function(b){for(var a=window,c=null,d=window[b];!CU.isEmpty(c=a.parent)&&a!=c;)try{a=c;var g=a[b];CU.isFunction(g)&&(d=g)}catch(h){break}return d},showLoading:function(b,a){if(!CU.isEmpty(a))if(CU.isArray(a))for(var c=
0;c<a.length;c++)PU.showLoading(b,a[c]);else if(CU.isFunction(a))a(b,!0);else if(CU.isObject(a))$(a).button("loading");else if(!CU.isEmpty(a))for(b=a.split(","),c=0;c<b.length;c++)a=$("#"+b[c]),CU.isFunction(a.button)&&a.button("loading")},hideLoading:function(b,a){if(!CU.isEmpty(a))if(CU.isArray(a))for(var c=0;c<a.length;c++)PU.hideLoading(b,a[c]);else if(CU.isFunction(a))a(b,!1);else if(CU.isObject(a))$(a).button("reset");else if(!CU.isEmpty(a))for(b=a.split(","),c=0;c<b.length;c++)a=$("#"+b[c]),
CU.isFunction(a.button)&&a.button("reset")},initLayout:function(b){RS.onShowErrMsg=function(c,d){401==c?PU.getCC().logout():CU.isEmpty(d)?PU.getCC().showTip({type:"error",msg:"\u670d\u52a1\u5668\u8bbf\u95ee\u5931\u8d25!"}):PU.getCC().showTip({type:"error",msg:d.replace(/\n/g,"<br>").replace(/ /g,"&nbsp;").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")});return!1};RS.onFailure=function(c){401==c.status||501==c.status?PU.getCC().logout():PU.getCC().showTip({type:"error",msg:"\u670d\u52a1\u5668\u8bbf\u95ee\u5931\u8d25!"});
return!1};RS.onShowMsg=function(c,d){PU.showLoading(c,d)};RS.onHideMsg=function(c,d){PU.hideLoading(c,d)};RS.defstatus=function(c){if(!0===PU.REFRESH_TOKEN)return!0;PU.REFRESH_TOKEN=!0;if(210==c)PU.refreshToken(function(d){PU.REFRESH_TOKEN=!1},function(d){PU.REFRESH_TOKEN=!1;throw" refresh-token failure! "+d;});else if(401==c)return PU.getCC().logout(),!1;return!0};if($.fn.datepicker){$.fn.datepicker.dates.zhc=$.fn.datetimepicker.dates.zhc={days:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" "),
daysShort:"\u5468\u65e5 \u5468\u4e00 \u5468\u4e8c \u5468\u4e09 \u5468\u56db \u5468\u4e94 \u5468\u516d".split(" "),daysMin:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split(""),months:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),monthsShort:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),
meridiem:["\u4e0a\u5348","\u4e0b\u5348"],suffix:[],today:"\u4eca\u5929",clear:"\u6e05\u7a7a",titleFormat:"MM yyyy"};$.fn.datepicker.defaults.language=$.fn.datetimepicker.defaults.language="zhc";var a={autoclose:!0,todayBtn:"linked",todayHighlight:!0};$.extend($.fn.datepicker.defaults,a);$.extend($.fn.datetimepicker.defaults,a);$.fn.datepicker.defaults.format="yyyy-mm-dd";$.fn.datetimepicker.defaults.format="yyyy-mm-dd hh:ii:00";$.fn.datetimepicker.defaults.minView=0;$.fn.datetimepicker.defaults.minuteStep=
1}$.fn.modal&&($.fn.modal.Constructor.prototype.enforceFocus=function(){});$("#a_logout").bind("click",function(){PU.getCC().logout()});PU.refreshLayoutObject(b)},refreshLoginUser:function(b,a){var c={};CU.isEmpty(b)||(c.upsu=b);RS.ajax({url:"/sso/client/oauth/getLoginUser",ps:c,cb:function(d){SU=d;if(!0===b||"true"==b||"1"==b||1==b)PU.setToken(d.authCode),PU.removeMenuTreeData();CU.isFunction(a)&&a(d)}})},refreshLayoutObject:function(b){window.SU=null;window.OPT_CODES="";var a={};CU.isEmpty(window.MENU)||
(a.menuCode=MENU.menuCode);RS.ajax({addroot:window.SYS_LOADMENUS_ROOT,url:"/sysframe/auth/getLayoutObject.nlo",ps:a,cb:function(c){CU.isEmpty(c)||(SU=c.user,CU.isEmpty(c.rsmAccessRoot)||(RsmAccessRoot=c.rsmAccessRoot),CU.isEmpty(c.optCodes)||(OPT_CODES=","+c.optCodes+","));CU.isEmpty(SU)||$("#a_navbar_menu_user").find("span").html(SU.userName);CU.isFunction(b)&&b()}})},loadMenuTreeData:function(b){RS.ajax({addroot:window.SYS_LOADMENUS_ROOT,url:"/sysframe/auth/getMenuTree",cb:function(a){CU.isFunction(b)&&
b(a)}})},loadLoginUser:function(b){RS.ajax({addroot:window.SYS_LOADMENUS_ROOT,url:"/sysframe/auth/getLoginUser",cb:function(a){window.SU=a;CU.isFunction(b)&&b(a)}})},getLoginUser:function(b){CU.isObject(window.SU)?CU.isFunction(b)&&b(window.SU):PU.loadLoginUser(b)},loadDynamicDicts:function(b){var a=b.cb;CU.isEmpty(b.callback)||(a=b.callback);b=$.extend({},b);CU.isEmpty(b.url)&&(b.url="/tannux/common/tool/getDynamicDictBatch");b.callback=null;b.cb=function(c){CU.isEmpty(c)||(CU.isEmpty(window.DROP)&&
(window.DROP={}),$.extend(DROP,c));PU.buildSelectFields();CU.isFunction(a)&&a(c)};RS.ajax(b)},showTreeSelectWin:function(b){if(CU.isEmpty(b)||CU.isEmpty(b.name))CC.showTip({type:"error",msg:"\u53c2\u6570\u65e0\u6548."});else{var a=CU.trim(b.name+""),c=PU.SELECT_TREE_WIN_MAP;CU.isEmpty(c)&&(PU.SELECT_TREE_WIN_MAP=c={});var d=c[a];if(CU.isEmpty(d)){b=$.extend({title:"",width:500,height:400},b);d=$(['<div class="modal fade" role="dialog" aria-hidden="true">   <div class="modal-dialog" style="width:',
b.width,'px;">      <div class="modal-content">         <div class="modal-header">            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>            <h4 class="modal-title">',b.title,'</h4>         </div>         <div class="modal-body" style="min-height:',b.height,'px;max-height:600px;overflow:auto;">         </div>         <div class="modal-footer" style="text-align:center;">\t\t\t\t<button class="btn btn-success btn-select-submit" win="',a,'"> <i class="fa fa-check"></i>\u786e\u5b9a</button>\t\t\t\t<button class="btn btn-default btn-select-cancel" win="',
a,'"> \u53d6\u6d88</button>         </div>      </div>\t</div></div>'].join(""));$("body").append(d);c[a]=d;var g=d.find(".modal-body");a=d.find(".btn-select-submit");c=d.find(".btn-select-cancel");var h=b.getParams;CU.isEmpty(h)&&(h=PU.defaultTreeSelectGetParams);g=PU.getTree({bid:g,addroot:b.addroot,url:b.url,appendAttrs:b.appendAttrs,singleSelect:b.single,loading:a,getParams:h,render:b.render,ps:b.ps,cdt:b.cdt,beforeParams:b.beforeParams,loaded:b.loaded});d[0].tree=g;a.bind("click",function(){var k=
$(this).attr("win"),f=PU.SELECT_TREE_WIN_MAP[k];if(!CU.isEmpty(f)){var l=f[0].tree,m=l.isSingleSelect();var n=!m&&CU.isTrue(f[0].cascadeParent)?l.getCheckedNodes(!0):l.getSelectedNodes();if(CU.isEmpty(n)||0>=n.length)CC.showTip({type:"error",msg:"\u8bf7\u9009\u62e9\u6811\u4e0a\u8282\u70b9."});else{for(var q=[],p=0;p<n.length&&(k=n[p],q.push({code:k.id,name:k.text,data:k.data}),!m);p++);if(CU.isFunction(f[0].beforeFun)&&(k=f[0].beforeFun(q,n,l),!1===k||"false"==k))return;f.modal("hide");CU.isFunction(f[0].callback)&&
f[0].callback(q,n,l)}}});c.bind("click",function(){var k=$(this).attr("win");k=PU.SELECT_TREE_WIN_MAP[k];CU.isEmpty(k)||k.modal("hide")})}CU.isEmpty(b.title)||d.find(".modal-title").html(b.title);CU.isEmpty(b.width)||d.find("modal-dialog").css("width",b.width+"px");CU.isEmpty(b.height)||d.find("modal-body").css("min-height",b.height+"px");a=d[0];a.render=b.render;a.beforeFun=b.before;a.callback=b.cb;a.cascadeParent=b.cascadeParent;a.tree.ps=b.ps;a.tree.cdt=b.cdt;a.tree.beforeParams=b.beforeParams;
d.modal("show");!0!==b.reload&&"true"!=b.reload||a.tree.search();return d}},showGridSelectWin:function(b){if(CU.isEmpty(b)||CU.isEmpty(b.name)||CU.isEmpty(b.columns)||CU.isEmpty(b.dataCode)||CU.isEmpty(b.dataName))CC.showTip({type:"error",msg:"\u53c2\u6570\u65e0\u6548."});else{var a=CU.trim(b.name+""),c=PU.SELECT_GRID_WIN_MAP;CU.isEmpty(c)&&(PU.SELECT_GRID_WIN_MAP=c={});var d=c[a];if(CU.isEmpty(d)){b=$.extend({title:"",width:900,height:600},b);d=$(['<div class="modal fade" role="dialog" aria-hidden="true">   <div class="modal-dialog" style="width:',
b.width,'px;">      <div class="modal-content">         <div class="modal-header">            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>            <h4 class="modal-title">',b.title,'</h4>         </div>         <div class="modal-body" style="min-height:',b.height,'px;">         </div>      </div>\t</div></div>'].join(""));$("body").append(d);c[a]=d;var g=d.find(".modal-body");setTimeout(function(){var h=b.getParams;CU.isEmpty(h)&&(h=PU.defaultGridSelectGetParams);
h=PU.getDataTable({bid:g,addroot:b.addroot,url:b.url,showCheckbox:!0,keepCheckbox:!0,singleSelect:b.single,dataIdField:b.dataIdField,autoScrollX:b.autoScrollX,opbtns:['<button class="btn btn-success btn-select-submit" win="'+a+'" selectPropertyName="'+b.selectPropertyName+'"> <i class="fa fa-check"></i>\u786e\u5b9a\u9009\u62e9</button>'],columns:b.columns,getParams:h,dataCode:b.dataCode,dataName:b.dataName,ps:b.ps,cdt:b.cdt,beforeParams:b.beforeParams});h.el_base.find(".btn-select-submit").bind("click",
function(){var k=$(this).attr("win");k=PU.SELECT_GRID_WIN_MAP[k];if(!CU.isEmpty(k)){var f=k[0].grid,l=f.getSelectRecords();if(CU.isEmpty(l))CC.showTip({type:"error",msg:"\u8bf7\u5728\u5217\u8868\u4e2d\u9009\u62e9\u8bb0\u5f55."});else{var m=[],n=f.dataCode,q=f.dataName,p=null,r=null;CU.isFunction(n)&&(p=n);CU.isFunction(q)&&(r=q);for(var t=0;t<l.length;t++){var u=l[t];var v=null!=p?p(u,f):CU.getObjectValue(u,n);var w=null!=r?r(u,f):CU.getObjectValue(u,q);m.push({code:v,name:w,data:u})}if(CU.isFunction(k[0].beforeFun)&&
(l=k[0].beforeFun(m,f),!1===l||"false"==l))return;k.modal("hide");CU.isFunction(k[0].callback)&&k[0].callback(m,f)}}});d[0].grid=h},500)}CU.isEmpty(b.title)||d.find(".modal-title").html(b.title);CU.isEmpty(b.width)||d.find("modal-dialog").css("width",b.width+"px");CU.isEmpty(b.height)||d.find("modal-body").css("min-height",b.height+"px");c=d[0];c.render=b.render;c.beforeFun=b.before;c.callback=b.cb;CU.isEmpty(c.grid)||(c.grid.ps=b.ps,c.grid.cdt=b.cdt,c.grid.beforeParams=b.beforeParams);d.modal("show");
!1!==b.reload&&"false"!=b.reload&&(CU.isEmpty(c.grid)||c.grid.search());return d}},defaultTreeSelectGetParams:function(b,a,c){var d=b.id;if(CU.isEmpty(d)||"#"==d)d=0;CU.isEmpty(a.cdt)&&(a.cdt={});a.cdt.parentId=d;d=c.ps;var g=c.cdt,h=c.beforeParams;CU.isObject(d)&&$.extend(a,d);CU.isObject(g)&&(CU.isEmpty(a.cdt)&&(a.cdt={}),$.extend(a.cdt,g));return CU.isFunction(h)&&(b=h(b,a,c),!1===b||"false"==b)?!1:a},defaultGridSelectGetParams:function(b,a,c,d,g,h){b={pageNum:b,pageSize:a,orders:d,qs:g};a=h.ps;
d=h.cdt;g=h.beforeParams;CU.isObject(a)&&$.extend(b,a);b.cdt={};CU.isObject(d)&&$.extend(b.cdt,d);CU.isObject(c)&&$.extend(b.cdt,c);return CU.isFunction(g)&&(c=g(b,h),!1===c||"false"==c)?!1:b},setOpenSelectFieldValue:function(b,a){if(!CU.isEmpty(b)){b=CU.clearlyElement(b);var c=[],d=[];if(!CU.isEmpty(a)){CU.isArray(a)||(a=[a]);for(var g=0;g<a.length;g++){var h=a[g].code,k=a[g].name;CU.isEmpty(h)||(c.push(h),d.push(k))}}b.attr("select-value",c.join(","));b.val(d.join("\uff0c"))}},onOpenSelectFieldClick:function(b){b=
$(this);var a=$(b.parent().prev());b=a.attr("select-custom");if(CU.isEmpty(b)){b=a.attr("select-type");var c=a.attr("select-name");if(CU.isEmpty(c))throw new "select-name is not set.";var d=a.attr("select-addroot");CU.isEmpty(d)||(d=CU.trim(d)).startsWith("/")||d.startsWith("http://")||d.startsWith("https://")||(d=window[d]);var g=a.attr("select-url"),h=a.attr("select-single"),k=a.attr("select-getParams"),f=a.attr("select-beforeParams"),l=a.attr("select-ps"),m=a.attr("select-cdt"),n=a.attr("select-title"),
q=a.attr("select-width"),p=a.attr("select-height"),r=a.attr("select-before"),t=a.attr("select-cb");CU.isEmpty(t)||"string"!=typeof t||(t=window[t]);var u=a.attr("select-appendAttrs"),v=a.attr("select-columns"),w=a.attr("select-dataIdField"),y=a.attr("select-dataCode"),z=a.attr("select-dataName");!CU.isEmpty(y)&&y.startsWith("_")&&CU.isFunction(window[y])&&(y=window[y]);!CU.isEmpty(z)&&z.startsWith("_")&&CU.isFunction(window[z])&&(z=window[z]);CU.isEmpty(h)||(h="true"==h||!0===h||"1"==h||1==h);CU.isEmpty(u)||
(u="true"==u||!0===u||"1"==u||1==u);k=!CU.isEmpty(k)&&0<(k=CU.trim(k+"")).length&&CU.isFunction(window[k])?window[k]:null;f=!CU.isEmpty(f)&&0<(f=CU.trim(f+"")).length&&CU.isFunction(window[f])?window[f]:null;r=!CU.isEmpty(r)&&0<(r=CU.trim(r+"")).length&&CU.isFunction(window[r])?window[r]:null;CU.isEmpty(v)||(v=window[v]);CU.isEmpty(w)||(w=window[w]);CU.isFunction(v)&&(v=v(a));if(!CU.isEmpty(l)&&0<(l=CU.trim(l+"")).length&&"{"==l.substring(0,1)&&"}"==l.substring(l.length-1))try{l=CU.toObject(l)}catch(x){console.error(x),
l=null}else l=null;if(!CU.isEmpty(m)&&0<(m=CU.trim(m+"")).length&&"{"==m.substring(0,1)&&"}"==m.substring(m.length-1))try{m=CU.toObject(m)}catch(x){console.error(x),m=null}else m=null;if(CU.isEmpty(b))CC.showTip({type:"error",msg:"\u6ca1\u6709\u6307\u5b9a\u9009\u62e9\u7ec4\u4ef6\u7c7b\u578b."});else if("tree"==b)PU.showTreeSelectWin({addroot:d,url:g,name:c,single:h,appendAttrs:u,getParams:k,beforeParams:f,ps:l,cdt:m,title:n,width:q,height:p,before:r,cb:function(x,A,B){PU.setOpenSelectFieldValue(a,
x);CU.isFunction(t)&&t(x,A,B,a)}});else if("grid"==b)PU.showGridSelectWin({addroot:d,url:g,name:c,single:h,columns:v,dataIdField:w,dataCode:y,dataName:z,getParams:k,beforeParams:f,ps:l,cdt:m,title:n,width:q,height:p,before:r,cb:function(x,A){PU.setOpenSelectFieldValue(a,x);CU.isFunction(t)&&t(x,A,a)}});else throw"is wrong select-type:'"+b+"'.";}else b=CU.getObjectValue(window,b),CU.isFunction(b)&&b({bindField:a})},onOpenSelectFieldInputDblClick:function(b){b=$(this);var a=b.attr("select-disabled");
!0!==a&&"true"!=a&&PU.setOpenSelectFieldValue(b)},renderOpenSelectFields:function(b){CU.isEmpty(b)?b=$(".tannux-open-select-field"):(b=CU.clearlyElement(b),b=b.find(".tannux-open-select-field"));if(!CU.isEmpty(b)&&0<b.length)for(var a=0;a<b.length;a++){var c=$(b[a]),d=c.parent(),g=$('<div class="input-group"></div>');g.append(c);g.append('<span class="input-group-btn"><button class="btn btn-primary" type="button"><i class="fa fa-search"></i></button></span>');d.append(g);c.prop("readOnly",!0);g.find("button").bind("click",
PU.onOpenSelectFieldClick);c.bind("dblclick",PU.onOpenSelectFieldInputDblClick)}},externalGetFormData:function(b,a,c,d,g){a=CU.clearlyElement(a).find(".tannux-open-select-field");if(!CU.isEmpty(a)&&0<a.length)for(c=0;c<a.length;c++){var h=$(a[c]),k=h.attr("name");h=h.attr("select-value");k=PU.filterPrefix(k,g);if(!CU.isEmpty(k)){if(null===h||void 0===h){if(!d)continue;h=null}b[k]=h}}},externalSetFormData:function(b,a,c,d,g){a=CU.clearlyElement(a).find(".tannux-open-select-field");if(!CU.isEmpty(a)&&
0<a.length)for(c=0;c<a.length;c++){var h=$(a[c]),k=h.attr("name");if(!CU.isEmpty(k)&&(k=PU.filterPrefix(k,g),!CU.isEmpty(k))){k=b[k];if(null===k||void 0===k){if(d)continue;k=""}var f=[];if(CU.isArray(k))for(var l=0;l<k.length;l++)f.push({code:k[l],name:""});else f.push({code:k,name:""});PU.setOpenSelectFieldValue(h,f)}}},externalClearFormData:function(b,a,c){b=CU.clearlyElement(b).find(".tannux-open-select-field");if(!CU.isEmpty(b)&&0<b.length)for(a=0;a<b.length;a++)c=$(b[a]),PU.setOpenSelectFieldValue(c)},
externalSetFormDisabled:function(b,a,c){b=CU.clearlyElement(b).find(".tannux-open-select-field");if(!CU.isEmpty(b)&&0<b.length)for(c=0;c<b.length;c++){var d=$(b[c]);d.prop("readOnly",!0);d.attr("select-disabled",a);$(d.next().children()[0]).prop("disabled",!0===a||"true"==a)}},menuTreeInterceptor:function(b,a){return b},getMenuTree:function(b,a){var c=PU.getToken();CU.isEmpty(c)?(c=PU.menuTreeInterceptor([],a),CU.isFunction(b)&&b(c)):PU.getLoginUser(function(){var d="TANNUX_AUTHORITY_MENU_TREE"+window.ContextPath,
g=null,h=window.localStorage.getItem(d),k=(new Date).getTime();if(!CU.isEmpty(h))try{var f=CU.toObject(h),l=parseInt(f.time,10);72E5>k-l&&f.userId+""==window.SU.id+""&&(g=f.data)}catch(m){console.error(" Parse local menu-tree object error : "+m)}null!=g?(g=PU.menuTreeInterceptor(g,a),CU.isFunction(b)&&b(g)):PU.loadMenuTreeData(function(m){window.localStorage.setItem(d,CU.toString({userId:window.SU.id,time:k,data:m}));m=PU.menuTreeInterceptor(m,a);CU.isFunction(b)&&b(m)})})},removeMenuTreeData:function(){window.localStorage.removeItem("TANNUX_AUTHORITY_MENU_TREE");
CU.isEmpty(window.ContextPath)||window.localStorage.removeItem("TANNUX_AUTHORITY_MENU_TREE"+window.ContextPath)},getHomeMenuUrl:function(){var b=window.HOME_MENU_CODE;if(!CU.isEmpty(b))return ContextPath+"/api/simple/sysframe/dispatch/mc/"+b},getMenuTreeUrl:function(b){return ContextPath+"/api/simple/sysframe/dispatch/mi/"+b.id},getBreadLineUrl:function(b){return ContextPath+"/api/simple/sysframe/dispatch/mi/"+b.id},getCurrentMenuLevelPath:function(){var b="";CU.isEmpty(window.MENU)||(b=window.MENU.menuLvlPath,
CU.isEmpty(b)&&(b=""));return b},getMenuNodesByIds:function(b,a){if(!CU.isEmpty(b)){"string"==typeof b&&(b=b.split(","));for(var c={},d=0;d<b.length;d++){var g=CU.trim(b[d]+"");if(0!=g.length){var h=PU.findMenuNodeById(a,g);CU.isEmpty(h)||(c[g]=h)}}return c}},findMenuNodeById:function(b,a){if(!CU.isEmpty(b))for(var c=0;c<b.length;c++){var d=b[c];if(d.id==a)return d;d=d.children;if(!CU.isEmpty(d)&&(d=PU.findMenuNodeById(d,a),!CU.isEmpty(d)))return d}},buildLayoutMenuHtml:function(b,a,c,d){if(!CU.isEmpty(a))for(var g=
0;g<a.length;g++){var h=a[g],k=h.data,f=h.children,l=CU.isTrue(k.isDir);if(!CU.isFalse(k.isDisp)){h=0<=c.indexOf("#"+h.id+"#");b.push('<li class="panel">');if(l){if(CU.isEmpty(f))continue;l="menu_parent_"+k.id;b.push('<a menuCode="',k.menuCode,'" href="#',l,'" data-toggle="collapse" ',1==d?'data-parent="#sidebar-nav-menu"':"",' class="menu-dir ',h?"active":"collapsed",'">',CU.getIconHtml(k.menuImg,"margin: -6px 6px 0px -2px;",!0),' <span class="title">',k.menuName,'</span> <i class="icon-submenu ti-angle-left"></i></a>',
'<div id="',l,'" class="collapse ',h?"in":"",'"><ul class="submenu">');CU.isEmpty(f)||PU.buildLayoutMenuHtml(b,f,c,d+1);b.push("</ul></div>")}else f=PU.getMenuTreeUrl(k),b.push('<li><a menuCode="',k.menuCode,'" href="',f,'" class="menu-leaf',h?" active active-leaf":"",'" ',3<d?' style="margin-left:10px;" ':"",">",CU.getIconHtml(k.menuImg,"margin: -6px 6px 0px -2px;",!0),' <span class="title">',k.menuName,"</span>","</a></li>");b.push("</li>")}}},buildTopLayoutMenuHtml:function(b,a,c,d){if(!CU.isEmpty(a))for(var g=
0;g<a.length;g++){var h=a[g],k=h.data,f=h.children,l=1==k.isDir;CU.isFalse(k.isDisp)||(h=0<=c.indexOf("#"+h.id+"#"),l?CU.isEmpty(f)||(b.push('<li class="dropdown">','<a menuCode="',k.menuCode,'" href="###" class="',h?"active":"collapsed",'" data-toggle="dropdown">',CU.getIconHtml(k.menuImg,"margin: -6px 6px 0px -2px;",!0)," <span>",k.menuName,'</span> <i class="ti-angle-down icon-submenu"></i></a>','<ul class="dropdown-menu">'),CU.isEmpty(f)||PU.buildTopLayoutMenuHtml(b,f,c,d+1),b.push("</ul></li>")):
(f=PU.getMenuTreeUrl(k),b.push('<li><a menuCode="',k.menuCode,'" href="',f,'" class="menu-leaf',h?" active active-leaf":"",'">',CU.getIconHtml(k.menuImg,"margin: -6px 6px 0px -2px;",!0)," <span>",k.menuName,"</span>","</a></li>")))}},buildLayoutMenuTree:function(b){PU.getMenuTree(function(a){var c=[];if(!CU.isEmpty(a)){var d=PU.getCurrentMenuLevelPath();PU.buildLayoutMenuHtml(c,a,d,1)}$("#sidebar-nav-menu").append(c.join(""));CU.isFunction(b)&&b()},"menu")},buildTopLayoutMenuTree:function(b){PU.getMenuTree(function(a){var c=
[];if(!CU.isEmpty(a)){var d=PU.getCurrentMenuLevelPath();PU.buildTopLayoutMenuHtml(c,a,d,1)}$("#navbar-menu-container-left").append(c.join(""));CU.isFunction(b)&&b()},"menu")},buildLayoutBreadLine:function(b){var a=window.MENU;CU.isEmpty(a)||PU.getMenuTree(function(c){var d=[],g=PU.getHomeMenuUrl();d.push('<div class="heading-left"><span class="menu-symbol">&nbsp;</span><span class="page-title">',a.menuName,"</span></div>");if(window.HOME_MENU_CODE!=a.menuCode){d.push('<ul class="breadcrumb">');CU.isEmpty(g)||
d.push('<li><a menuCode="',window.HOME_MENU_CODE,'" href="',g,'"><i class="fa fa-home"></i>  \u4e3b\u9875</a></li>');if(!CU.isEmpty(c)&&(g=PU.getCurrentMenuLevelPath(),!CU.isEmpty(g)&&(g=g.split("#"),c=PU.getMenuNodesByIds(g,c),0<Object.keys(c).length)))for(var h=window.MENU.id+"",k=0;k<g.length;k++){var f=CU.trim(g[k]+"");if(0!=f.length&&(f=c[f],!CU.isEmpty(f))){f=f.data;var l=f.id;1==f.isDir?d.push("<li> ",f.menuName,"</li>"):l==h?d.push('<li class="active"> ',f.menuName,"</li>"):(l=PU.getBreadLineUrl(f),
d.push('<li><a menuCode="',f.menuCode,'" href="',l,'"> ',f.menuName,"</a></li>"))}}d.push("</ul>")}$("#div-base-main-content-breadlink").html(d.join(""));CU.isFunction(b)&&b()},"breadLine")},getBodyScrollTop:function(){var b=$("body").scrollTop();0==b&&(b=Math.round(document.documentElement.scrollTop));return b},getElementScrollTop:function(b){return CU.clearlyElement(b).scrollTop()},bindPageTouch:function(b){CU.isEmpty(b)&&(b={});var a=b,c=b.sensitiveValue;CU.isEmpty(c)&&(c=100);c=parseInt(c,10);
var d=null;d=CU.isEmpty(b.bind)?$(window.document):CU.clearlyElement(b.bind);d.bind("touchstart",function(g){var h=g.originalEvent||g;!CU.isEmpty(h.touches)&&0<h.touches.length&&(g=h.touches[0].pageX+"",h=h.touches[0].pageY+"",CU.isNumber(g)&&(a.startX=parseInt(g,10)),CU.isNumber(h)&&(a.startY=parseInt(h,10)),a.scroll=PU.getBodyScrollTop())});d.bind("touchmove",function(g){g=g.originalEvent||g;if(!CU.isEmpty(g.changedTouches)&&0<g.changedTouches.length){var h=g.changedTouches[0].pageX+"",k=g.changedTouches[0].pageY+
"";if(CU.isNumber(h)&&!CU.isEmpty(a.startX)){var f=parseInt(h,10);h={x1:a.startX,x2:f};f<a.startX?CU.isFunction(a.mvleft)&&a.mvleft(g,a,h):f>a.startX&&CU.isFunction(a.mvright)&&a.mvright(g,a,h)}CU.isNumber(k)&&!CU.isEmpty(a.startY)&&(k=parseInt(k,10),h={y1:a.startY,y2:k},PU.getBodyScrollTop(),$(document).height(),$(window).height(),k>a.startY?CU.isFunction(a.mvdown)&&a.mvdown(g,a,h):k<a.startY&&CU.isFunction(a.mvup)&&a.mvup(g,a,h))}});d.bind("touchend",function(g){g=g.originalEvent||g;if(!CU.isEmpty(g.changedTouches)&&
0<g.changedTouches.length){var h=g.changedTouches[0].pageX+"",k=g.changedTouches[0].pageY+"";if(CU.isNumber(h)&&!CU.isEmpty(a.startX)){var f=parseInt(h,10);h={x1:a.startX,x2:f};f<a.startX?CU.isFunction(a.left)&&a.startX-f>=c&&a.left(g,a,h):f>a.startX&&CU.isFunction(a.right)&&f-a.startX>=c&&a.right(g,a,h)}if(CU.isNumber(k)&&!CU.isEmpty(a.startY)){k=parseInt(k,10);h={y1:a.startY,y2:k};f=PU.getBodyScrollTop();var l=$(document).height(),m=$(window).height();k>a.startY?(CU.isFunction(a.down)&&a.down(g,
a,h),(0>f||0==f&&0==a.scroll)&&CU.isFunction(a.top)&&Math.abs(k-a.startY)>c&&a.top(g,a,h)):k<a.startY&&(CU.isFunction(a.up)&&a.up(g,a,h),m=f+m,(l<m||l==m&&a.scroll==f)&&CU.isFunction(a.bottom)&&Math.abs(k-a.startY)>c&&a.bottom(g,a,h))}}})},initPage:function(){CU.translatePageLang();CU.onlyInteger($(".tannux-input-number"));CU.format3BitNumberField($(".form-number-3bit"));PU.buildSelectFields();PU.bindClassifyUploadClick();$.fn.datetimepicker&&($(".item-form-datetimepicker").datetimepicker($.fn.datetimepicker.defaults),
$(".item-form-datetimepicker-addon").bind("click",function(){$($($(this).parent()[0]).children()[0]).focus()}));CU.isFunction(PU.externalInitPage)&&PU.externalInitPage()}},CC={BSMODEL_SHOWMSG_CALLBACK:null,showMsg:function(b,a){var c={};CU.isEmpty(b)&&(b={});c.title=CU.isEmpty(b.title)?"":b.title;CU.isEmpty(b.msg)||(c.text=b.msg);CU.isEmpty(b.hmsg)||(c.html=b.hmsg);c.type=CU.isEmpty(b.type)&&CU.isEmpty(b.input)?"none":b.type;"none"==c.type&&(c.type=null);c.showCancelButton=2===b.option||"2"==b.option;
c.confirmButtonText=CU.isEmpty(b.oktext)?"\u786e\u5b9a":b.oktext;c.cancelButtonText=CU.isEmpty(b.canceltext)?"\u53d6\u6d88":b.canceltext;CU.isEmpty(b.okcolor)||(c.confirmButtonColor=b.okcolor);CU.isEmpty(b.cancelcolor)||(c.cancelButtonColor=b.cancelcolor);CU.isEmpty(b.input)||(c.input=b.input);CU.isEmpty(b.inputValidator)||(c.inputValidator=b.inputValidator);CU.isEmpty(b.inputValue)||(c.inputValue=b.inputValue);CU.isObject(a)&&$.extend(c,a);CU.isEmpty(c.allowEscapeKey)&&(c.allowEscapeKey=!1);CU.isEmpty(c.allowOutsideClick)&&
(c.allowOutsideClick=!1);a=CU.isFunction(b.callback)?b.callback:b.cb;b=CU.isFunction(b.cacnelCallback)?b.cacnelCallback:b.ccb;swal(c).then(a,b).catch(swal.noop)},showTip:function(b){CU.isEmpty(b)&&(b={});CU.isEmpty(b.msg)&&(b.msg="");CU.isEmpty(b.type)&&(b.type="info");toastr[b.type](b.msg)},logout:function(){PU.removeToken();PU.removeMenuTreeData();var b=PU.getDefaultIndexPage();CU.isEmpty(b)&&(b=window.LogoutUrl);CU.isEmpty(b)&&(b=ContextPath+"/index.jsp");CU.isEmpty(b)||(window.location=CU.correctUrl(b))},
getRegionData:function(b,a,c){CU.isEmpty(b)&&(b=!1);CU.isEmpty(a)&&(a=!0);var d=window.localStorage.getItem("BASE_REGION_DATA");CU.isEmpty(d)?RS.ajax({url:"/sysframe/adapter/queryRegionDropList",ps:[{},b,a],cb:function(g){window.localStorage.setItem("BASE_REGION_DATA",CU.toString(g));CU.isFunction(c)&&c(g)}}):CU.isFunction(c)&&c(CU.toObject(d))},fillOperateBtns:function(b,a,c){CU.isEmpty(c)&&(c=[]);if(!CU.isEmpty(b)){!CU.isArray(b)&&CU.isObject(b)&&(b=[b]);for(var d=0;d<b.length;d++){var g=b[d];if(!(CU.isEmpty(g)||
CU.isEmpty(g.title)||CU.isEmpty(g.name))){0<c.length&&c.push('<span class="operate-btn-verline">|</span>');c.push('<a href="###" class="table-link" ');var h=CU.isTrue(g.ishtml)||CU.isTrue(g.isHtml),k;for(k in g){var f=g[k];CU.isEmpty(k)||CU.isEmpty(f)||h&&"title"==k||c.push(k,'="',f,'" ')}if(CU.isObject(a))for(k in a)f=a[k],CU.isEmpty(k)||CU.isEmpty(f)||c.push(k,'="',f,'" ');CU.isEmpty(g.color)||c.push('style="color:',g.color,';" ');c.push(">",g.title,"</a>")}}}return c},getGridRowImageTitle:function(b,
a){return CU.isEmpty(a)?b:'<div class="grid-row-img-title"><div class="img-container"><img src="'+PU.toRsmImageUrl(a,"small")+'"></img></div><div class="text">'+b+"</div></div>"},loadDynamicDropList:function(b,a,c){if(CU.isEmpty(b))CU.isFunction(c)&&c();else{"string"==typeof b&&(b=b.split(","));a=!0===a||"true"==a;var d=PU.getDynamicDropRoot(),g=PU.getDynamicDropUrl();PU.loadDynamicDicts({addroot:d,url:g,ps:{names:b,appAttrs:a},cb:c})}},getBodyScrollTop:function(){return PU.getBodyScrollTop()},getElementScrollTop:function(b){return PU.getElementScrollTop(b)},
bindPageTouch:function(b){PU.bindPageTouch(b)}};var PRQ={params:null,attributes:null,OpenArguments:window.dialogArguments,ParentWindow:CU.isObject(window.dialogArguments)&&CU.isObject(window.dialogArguments.ParentWindow)?window.dialogArguments.ParentWindow:window,OpenParams:CU.isObject(window.dialogArguments)?window.dialogArguments.OpenParams:null,pageInfo:null,get:function(b,a){var c=CU.isObject(PRQ.OpenParams)?PRQ.OpenParams[b]:null;CU.isEmpty(c)&&(c=PRQ.getParam(b,a));CU.isEmpty(c)&&(c=PRQ.getAttribute(b,a));return c},getParam:function(b,a){if(CU.isEmpty(PRQ.params))return null;
b=PRQ.params[b];CU.isArray(b)&&(b=0<b.length?b[0]:"");!0!==a||void 0!==b&&null!==b||(b="");return void 0===b?null:b},getParams:function(b){var a=null;CU.isObject(PRQ.params)&&(a=PRQ.params[b]);null!==a&&void 0!==a||!CU.isObject(PRQ.OpenParams)||(a=PRQ.OpenParams[b],null===a||void 0===a||CU.isArray(a)||(a=[a]));return CU.isArray(a)?a:null},setReturnValue:function(b){window.returnValue=b},getAttribute:function(b,a){if(CU.isEmpty(PRQ.attributes))return null;b=PRQ.attributes[b];!0!==a||void 0!==b&&null!==
b||(b="");return void 0===b?null:b},setAttribute:function(b,a){CU.isEmpty(b)||CU.isEmpty(a)||(CU.isEmpty(PRQ.attributes)&&(PRQ.attributes={}),PRQ.attributes[b]=a)},getParentWindow:function(){return PRQ.ParentWindow},closeWindow:function(b){void 0!==b&&PRQ.setReturnValue(b);window.close()},moveFirst:function(){PRQ.pageInfo.pageIndex=0;PRQ.refreshPage()},movePrevious:function(){PRQ.pageInfo.pageIndex--;PRQ.refreshPage()},moveNext:function(){PRQ.pageInfo.pageIndex++;PRQ.refreshPage()},moveLast:function(){PRQ.pageInfo.pageIndex=
PRQ.pageInfo.array.length-1;PRQ.refreshPage()},refreshPage:function(){var b=PRQ.pageInfo.array.length,a=PRQ.pageInfo.pageIndex;a=0>a?0:a>=b?b-1:a;var c=0==b;PRQ.pageInfo.buttons.first.setDisabled(c||0==a);PRQ.pageInfo.buttons.prev.setDisabled(c||0==a);PRQ.pageInfo.buttons.next.setDisabled(c||a==b-1);PRQ.pageInfo.buttons.last.setDisabled(c||a==b-1);PRQ.pageInfo.handler(c?"":PRQ.pageInfo.array[a],PRQ.pageInfo.array)},setPageInfo:function(b,a,c){CU.isEmpty(b)&&(b=CU.isEmpty(a)?[]:[a]);null==PRQ.pageInfo&&
PRQ.getPageButtons();"string"==typeof b&&(b=b.split(","));PRQ.pageInfo.array=b;var d=-1;PRQ.pageInfo.currid=CU.isEmpty(a)?b[0]:-1<(d=b.indexOf(a))?a:b[0];PRQ.pageInfo.handler=c;PRQ.pageInfo.pageIndex=-1==d?0:d;PRQ.refreshPage()},getPageInfo:function(){return PRQ.pageInfo},getPageButtons:function(){null==PRQ.pageInfo&&(PRQ.pageInfo={buttons:{first:EF.getButton({iconCls:"x-tbar-page-first",handler:PRQ.moveFirst}),prev:EF.getButton({iconCls:"x-tbar-page-prev",handler:PRQ.movePrevious}),next:EF.getButton({iconCls:"x-tbar-page-next",
handler:PRQ.moveNext}),last:EF.getButton({iconCls:"x-tbar-page-last",handler:PRQ.moveLast})}});return[PRQ.pageInfo.buttons.first,PRQ.pageInfo.buttons.prev,PRQ.pageInfo.buttons.next,PRQ.pageInfo.buttons.last]}};var RS={jx:null,PSK:"tx_ps",APSK:"tx_aps",RTK:"tx_rt",RT_FWR:"fwr",RT_FWR_RQ:"fwr-rq",RT_FWR_RP:"fwr-rp",RT_NAT:"naive",RT_DOWN:"down-g",headers:{},onShowMsg:function(b,a){return b},onHideMsg:function(b,a){},onShowErrMsg:function(b,a){},onFailure:function(b,a){},onBeforeHeaders:function(b,a){if(!CU.isEmpty(RS.headers)){CU.isEmpty(b)&&(b={});for(var c in RS.headers)b[c]=RS.headers[c]}return b},error:{code:null,message:null},defstatus:function(b){return!0},autoFillToken:function(b){var a=RS.getToken();
CU.isEmpty(a)||(b+=(0>b.indexOf("?")?"?":"&")+"token="+a);return b},getRemotePrefix:function(){return"/api"},getDefaultAddRoot:function(){},getDefaultActionType:function(){return"rest2"},getRemoteUrl:function(b){var a=b.addroot;CU.isEmpty(a)&&(a=RS.getDefaultAddRoot());var c=[];"string"==typeof a&&(a.startsWith("/")||a.startsWith("http://")||a.startsWith("https://"))?c.push(a):!1!==a&&(CU.isEmpty(window.RSForceContextPath)?c.push(ContextPath):c.push(window.RSForceContextPath));CU.isEmpty(b.url)||
!b.url.startsWith("http://")&&!b.url.startsWith("https://")?(CU.isEmpty(b.act)&&(b.act=RS.getDefaultActionType()),c.push(RS.getRemotePrefix(),"/",b.act),CU.isEmpty(b.url)?c.push("/"!=b.svc.substring(0,1)?"/":"",b.svc,"/"!=b.mod.substring(0,1)?"/":"",b.mod):c.push("/"!=b.url.substring(0,1)?"/":"",b.url)):c.push(b.url);a=!1;if(CU.isObject(b.ps)){var d=encodeURIComponent(CU.toString(b.ps));switch(b.act){case "simple":c.push("?",RS.PSK,"=",d);a=!0;break;case "form":c.push("?",RS.APSK,"=",d),a=!0}}CU.isEmpty(b.rt)||
c.push(a?"&":"?",RS.RTK,"=",b.rt);c=c.join("");if(!0===b.token||"true"==b.token||("simple"==b.act||"form"==b.act)&&!1!==b.token&&"false"!=b.token)c=RS.autoFillToken(c);return c},getModuleUrl:function(b,a,c,d){b=RS.getRemoteUrl({act:"simple",url:"/sysframe/dispatch/mc/"+b});!0===d&&(b=RS.autoFillToken(b));CU.isObject(a)&&(a=CU.parseParams(a,c),CU.isEmpty(a)||(b+=(0>b.indexOf("?")?"?":"&")+a));return b},toRsmUrl:function(b,a){if(CU.isEmpty(b))return b;b=CU.trim(b);if(b.startsWith("data:image"))return b;
b.startsWith("http://")||b.startsWith("https://")||CU.isEmpty(window.RsmAccessRoot)||(b=RsmAccessRoot+b);if(CU.isObject(a)){var c=!1,d;for(d in a)if(!CU.isEmpty(d)){var g=a[d];CU.isEmpty(g)||(c||(c=0<=b.indexOf("?")),b+=(c?"&":"?")+d+"="+g,c=!0)}}return b},toRsmImageUrl:function(b,a){var c={"x-oss-process":"image/auto-orient,1/resize,m_lfit,w_900/quality,Q_70"};"small"==a?c["x-oss-process"]="image/auto-orient,1/resize,m_lfit,w_60/quality,Q_70":"big"==a?c["x-oss-process"]="image/auto-orient,1/resize,m_lfit,w_300/quality,Q_70":
CU.isObject(a)&&$.extend(c,a);return RS.toRsmUrl(b,c)},defaultErrorCallback:function(b,a){!1!==RS.onShowErrMsg(b,a)&&alert("\u8bbf\u95ee\u8fdc\u7a0b\u670d\u52a1\u5668\u5931\u8d25!")},setBaseConfig:function(b,a){if(CU.isObject(a))for(var c in a)b[c]=a[c]},AjaxBS:function(){this.ajax=function(b,a,c,d,g,h,k,f){b={url:b,params:a,success:function(l){RS.onHideMsg(c,f);if((200<l.status&&300>l.status||401==l.status)&&CU.isFunction(RS.defstatus)){var m=RS.defstatus(l.status);if(!m)return}var n=null;try{n=
CU.toObject(l.responseText)}catch(q){n={success:!1,message:"CU.toObject error!"}}if((200<n.code&&300>n.code||401==n.code)&&CU.isFunction(RS.defstatus)&&(m=RS.defstatus(n.code),!m))return;!0===n.success||"true"===n.success?CU.isFunction(d)&&d(n.data):CU.isFunction(g)?g(n.code,n.message):RS.defaultErrorCallback(n.code,n.message)},failure:function(l){RS.onHideMsg(c,f);RS.onFailure(l)}};RS.setBaseConfig(b,k);CU.request(b)}},AjaxJQ:function(){this.ajax=function(b,a,c,d,g,h,k,f){b={url:b,type:"post",dataType:"json",
success:function(l,m,n){RS.onHideMsg(c,f);if((200<n.status&&300>n.status||401==n.status)&&CU.isFunction(RS.defstatus)&&(m=RS.defstatus(n.status),!m)||(200<l.code&&300>l.code||401==l.code)&&CU.isFunction(RS.defstatus)&&(m=RS.defstatus(l.code),!m))return;!0===l.success||"true"===l.success?CU.isFunction(d)&&d(l.data):CU.isFunction(g)?g(l.code,l.message):RS.defaultErrorCallback(l.code,l.message)},error:function(l){RS.onHideMsg(c,f);RS.onFailure(l)}};RS.setBaseConfig(b,k);if("post"==b.type||"POST"==b.type)b.data=
a,b.headers=h;$.ajax(b)}},ajax:function(b){CU.isEmpty(b.act)&&(b.act=RS.getDefaultActionType());if("rest2"==b.act)RS.rest2(b);else if("simple"==b.act)RS.simple(b);else if("form"==b.act)RS.form(b);else throw"unknown act '"+b.act+"'.";},getUrlDomain:function(b){if(CU.isEmpty(b))return"";b=CU.trim(b+"");var a="";if(b.startsWith("http://")||b.startsWith("https://"))a=b.substring(b.indexOf("//")+2),b=a.indexOf("/"),0<=b&&(a=a.substring(0,b));return a},getToken:function(){return token=window.localStorage.getItem("token")},
appendToken:function(b,a){!CU.isEmpty(b)&&CU.isObject(a)&&(b=RS.getToken(),CU.isEmpty(b)||(a.token=b))},simple:function(b){var a=RS.getRemoteUrl({url:b.url,svc:b.svc,mod:b.mod,act:"simple",addroot:b.addroot}),c={};!0===b.upload||"true"==b.upload?c=b.ps:CU.isEmpty(b.ps)||(c[RS.PSK]=CU.toString(b.ps));RS.error.code=null;RS.error.message=null;var d=RS.onShowMsg(b.msg,b.loading);CU.isEmpty(b.headers)&&(b.headers={});b.headers.REQUEST_HEADER="tannux-http-client-header";RS.onBeforeHeaders(b.headers,b);
RS.appendToken(a,b.headers);RS.jx.ajax(a,c,d,b.cb,b.errcb,b.headers,b.bscfg,b.loading)},rest2:function(b){var a=RS.getRemoteUrl({url:b.url,svc:b.svc,mod:b.mod,act:"rest2",addroot:b.addroot}),c=b.ps;CU.isEmpty(c)||(c=CU.toString(c));RS.error.code=null;RS.error.message=null;var d=RS.onShowMsg(b.msg,b.loading);CU.isEmpty(b.headers)&&(b.headers={});b.headers.REQUEST_HEADER="tannux-http-client-header";b.headers["Content-Type"]="application/json";RS.onBeforeHeaders(b.headers,b);RS.appendToken(a,b.headers);
RS.jx.ajax(a,c,d,b.cb,b.errcb,b.headers,b.bscfg,b.loading)},form:function(b){var a=RS.getRemoteUrl({url:b.url,svc:b.svc,mod:b.mod,act:"form",addroot:b.addroot});RS.error.code=null;RS.error.message=null;var c=RS.onShowMsg(b.msg,b.loading);CU.isEmpty(b.headers)&&(b.headers={});b.headers.REQUEST_HEADER="tannux-http-client-header";RS.onBeforeHeaders(b.headers,b);RS.appendToken(a,b.headers);RS.jx.ajax(a,b.ps,c,b.cb,b.errcb,b.headers,b.bscfg,b.loading)},forward:function(b){CU.isEmpty(b.url)||(b.rt=(CU.isEmpty(b.rrt)?
RT_FWR:!1!==b.rrt?RT_FWR_RP:RT_FWR_RQ)+":"+b.url);var a=RS.getRemoteUrl({url:b.url,svc:b.svc,mod:b.mod,ps:b.ps,rt:b.rt});CU.isEmpty(b.ops)||(a+=CU.parseParams(b.ops));RS.onShowMsg(b.msg,b.loading);window.location=a},submit:function(b){var a=RS.getRemoteUrl({url:b.url,act:"form",svc:b.svc,mod:b.mod}),c=CU.isEmpty(b.ps)?null:CU.toString(b.ps),d=!1,g=b.form;CU.isEmpty(g)?(g=CU.createEl("form"),g.style.display="none",d=!0):"string"==typeof g&&(g=CU.getEl(g));g.action=a;g.method="POST";if(CU.isObject(b.fm))for(var h in b.fm)if(a=
b.fm[h],!CU.isEmpty(a,!0))if(CU.isArray(a))for(var k=0;k<a.length;k++)g.appendChild(CU.createEl("input",{type:"hidden",name:h,value:a[k]}));else g.appendChild(CU.createEl("input",{type:"hidden",name:h,value:a}));null!=c&&g.appendChild(CU.createEl("input",{type:"hidden",name:RS.APSK,value:c}));document.body.appendChild(g);RS.onShowMsg(b.msg,b.loading);g.submit();d&&document.body.removeChild(g)},download:function(b){var a=CU.isEmpty(PRQ)?window:PRQ.getParentWindow();CU.isEmpty(b.rt)&&(b.rt=RS.RT_DOWN);
b=RS.getRemoteUrl(b);var c=a.open(b,"_blank","fullscreen=0,menubar=0,toolbar=0,location=0,scrollbars=0,status=1,left=300,top=100,width=200,height=200");setTimeout(function(){CU.isObject(c)&&!c.closed&&c.close()},5E3)},openModule:function(b){var a=RS.getModuleUrl(b.mc),c=CU.isEmpty(b.width)?800:b.width,d=CU.isEmpty(b.height)?600:b.height,g=0==b.resizable?"no":"yes";b.modal=!1;if(!1===b.modal)return CU.isObject(b.ops)&&(a+=CU.parseParams(b.ops)),window.open(a,"BaseFlag_OpenModule_"+b.mc+"_"+CU.getId(),
"fullscreen=0,menubar=0,toolbar=0,location=0,scrollbars=0,status=1,left=300,top=100,width="+c+",height="+d);CU.isIE6()&&(c+=6,d+=45);var h="undefined"==typeof PRQ||null===PRQ?window:PRQ.getParentWindow();if("less"==b.modal)return window.showModelessDialog(a,{ParentWindow:h,OpenParams:b.ops},"dialogWidth:"+c+"px;dialogHeight:"+d+"px;center:yes;help:no;resizable:"+g+";status:no;");a=window.showModalDialog(a,{ParentWindow:h,OpenParams:b.ops},"dialogWidth:"+c+"px;dialogHeight:"+d+"px;center:yes;help:no;resizable:"+
g+";status:no;");CU.isFunction(b.cb)&&b.cb(a)},forwardModule:function(b){"GET"==b.rmod?RS.forward({svc:"SysResMVC",mod:"openModule",ps:[b.mc],ops:b.ops}):RS.submit({svc:"SysResMVC",mod:"openModule",ps:[b.mc],fm:b.ops})},messageHandlers:null,handleMessage:function(b,a,c,d){CU.isEmpty(RS.messageHandlers)&&(window.addEventListener("message",function(g){if(!CU.isEmpty(g.data)&&"string"==typeof g.data){var h=CU.toObject(g.data);if(!(CU.isEmpty(h.post)||CU.isEmpty(h.code)||CU.isEmpty(h.success))){var k=
h.success?h.data:h.message;if(h.post)for(var f in RS.messageHandlers){var l=RS.messageHandlers[f];if(!l.post){var m=null,n=null,q=!0;try{m=l.cb(k,g)}catch(p){n=p+"",q=!1}RS.postMessage({win:g.source,code:h.code,success:q,data:m,message:n,post:!1})}}else l=RS.messageHandlers[h.code],CU.isObject(l)&&(h.success?CU.isFunction(l.cb)&&l.cb(k,g):CU.isFunction(l.errcb)?l.errcb(k,g):!1!==RS.onShowErrMsg(500,k)&&alert("\u8bbf\u95ee\u8fdc\u7a0b\u670d\u52a1\u5668\u5931\u8d25!"),delete RS.messageHandlers[h.code])}}},
!1),RS.messageHandlers={});if(CU.isFunction(c)||CU.isFunction(d))RS.messageHandlers[a]={post:b,code:a,cb:c,errcb:d}},waitMessage:function(b){RS.handleMessage(!1,CU.getUUID(),b,null)},postMessage:function(b){if(CU.isEmpty(b))throw" the config is empty argument! ";if(CU.isEmpty(b.win))throw" the config.win is empty argument! ";var a=$.extend({origin:"*",success:!0},b);CU.isEmpty(a.code)&&(a.code=CU.getUUID());CU.isEmpty(a.post)&&(a.post=!0);var c=CU.toString({post:a.post,code:a.code,success:a.success,
data:a.data,message:a.message});RS.handleMessage(a.post,a.code,b.cb,b.errcb);"string"==typeof b.win&&(b.win=window.frames[b.win]);b.win.postMessage(c,a.origin)}};RS.jx="undefined"!=typeof window.$?new RS.AjaxJQ:new RS.AjaxBS;var REGION_PROV_CITY=[{n:"\u5317\u4eac\u5e02",cs:["\u5317\u4eac\u5e02"]},{n:"\u5929\u6d25\u5e02",cs:["\u5929\u6d25\u5e02"]},{n:"\u6cb3\u5317\u7701",cs:"\u77f3\u5bb6\u5e84\u5e02 \u5510\u5c71\u5e02 \u79e6\u7687\u5c9b\u5e02 \u90af\u90f8\u5e02 \u90a2\u53f0\u5e02 \u4fdd\u5b9a\u5e02 \u5f20\u5bb6\u53e3\u5e02 \u627f\u5fb7\u5e02 \u6ca7\u5dde\u5e02 \u5eca\u574a\u5e02 \u8861\u6c34\u5e02".split(" ")},{n:"\u5c71\u897f\u7701",cs:"\u592a\u539f\u5e02 \u5927\u540c\u5e02 \u9633\u6cc9\u5e02 \u957f\u6cbb\u5e02 \u664b\u57ce\u5e02 \u6714\u5dde\u5e02 \u664b\u4e2d\u5e02 \u8fd0\u57ce\u5e02 \u5ffb\u5dde\u5e02 \u4e34\u6c7e\u5e02 \u5415\u6881\u5e02".split(" ")},
{n:"\u5185\u8499\u53e4\u81ea\u6cbb\u533a",cs:"\u547c\u548c\u6d69\u7279\u5e02 \u5305\u5934\u5e02 \u4e4c\u6d77\u5e02 \u8d64\u5cf0\u5e02 \u901a\u8fbd\u5e02 \u9102\u5c14\u591a\u65af\u5e02 \u547c\u4f26\u8d1d\u5c14\u5e02 \u5df4\u5f66\u6dd6\u5c14\u5e02 \u4e4c\u5170\u5bdf\u5e03\u5e02 \u5174\u5b89\u76df \u9521\u6797\u90ed\u52d2\u76df \u963f\u62c9\u5584\u76df".split(" ")},{n:"\u8fbd\u5b81\u7701",cs:"\u6c88\u9633\u5e02 \u5927\u8fde\u5e02 \u978d\u5c71\u5e02 \u629a\u987a\u5e02 \u672c\u6eaa\u5e02 \u4e39\u4e1c\u5e02 \u9526\u5dde\u5e02 \u8425\u53e3\u5e02 \u961c\u65b0\u5e02 \u8fbd\u9633\u5e02 \u76d8\u9526\u5e02 \u94c1\u5cad\u5e02 \u671d\u9633\u5e02 \u846b\u82a6\u5c9b\u5e02".split(" ")},
{n:"\u5409\u6797\u7701",cs:"\u957f\u6625\u5e02 \u5409\u6797\u5e02 \u56db\u5e73\u5e02 \u8fbd\u6e90\u5e02 \u901a\u5316\u5e02 \u767d\u5c71\u5e02 \u677e\u539f\u5e02 \u767d\u57ce\u5e02 \u5ef6\u8fb9\u671d\u9c9c\u65cf\u81ea\u6cbb\u5dde".split(" ")},{n:"\u9ed1\u9f99\u6c5f\u7701",cs:"\u54c8\u5c14\u6ee8\u5e02 \u9f50\u9f50\u54c8\u5c14\u5e02 \u9e21\u897f\u5e02 \u9e64\u5c97\u5e02 \u53cc\u9e2d\u5c71\u5e02 \u5927\u5e86\u5e02 \u4f0a\u6625\u5e02 \u4f73\u6728\u65af\u5e02 \u4e03\u53f0\u6cb3\u5e02 \u7261\u4e39\u6c5f\u5e02 \u9ed1\u6cb3\u5e02 \u7ee5\u5316\u5e02 \u5927\u5174\u5b89\u5cad\u5730\u533a".split(" ")},
{n:"\u4e0a\u6d77\u5e02",cs:["\u4e0a\u6d77\u5e02"]},{n:"\u6c5f\u82cf\u7701",cs:"\u5357\u4eac\u5e02 \u65e0\u9521\u5e02 \u5f90\u5dde\u5e02 \u5e38\u5dde\u5e02 \u82cf\u5dde\u5e02 \u5357\u901a\u5e02 \u8fde\u4e91\u6e2f\u5e02 \u6dee\u5b89\u5e02 \u76d0\u57ce\u5e02 \u626c\u5dde\u5e02 \u9547\u6c5f\u5e02 \u6cf0\u5dde\u5e02 \u5bbf\u8fc1\u5e02".split(" ")},{n:"\u6d59\u6c5f\u7701",cs:"\u676d\u5dde\u5e02 \u5b81\u6ce2\u5e02 \u6e29\u5dde\u5e02 \u5609\u5174\u5e02 \u6e56\u5dde\u5e02 \u7ecd\u5174\u5e02 \u91d1\u534e\u5e02 \u8862\u5dde\u5e02 \u821f\u5c71\u5e02 \u53f0\u5dde\u5e02 \u4e3d\u6c34\u5e02".split(" ")},
{n:"\u5b89\u5fbd\u7701",cs:"\u5408\u80a5\u5e02 \u829c\u6e56\u5e02 \u868c\u57e0\u5e02 \u6dee\u5357\u5e02 \u9a6c\u978d\u5c71\u5e02 \u6dee\u5317\u5e02 \u94dc\u9675\u5e02 \u5b89\u5e86\u5e02 \u9ec4\u5c71\u5e02 \u6ec1\u5dde\u5e02 \u961c\u9633\u5e02 \u5bbf\u5dde\u5e02 \u516d\u5b89\u5e02 \u4eb3\u5dde\u5e02 \u6c60\u5dde\u5e02 \u5ba3\u57ce\u5e02".split(" ")},{n:"\u798f\u5efa\u7701",cs:"\u798f\u5dde\u5e02 \u53a6\u95e8\u5e02 \u8386\u7530\u5e02 \u4e09\u660e\u5e02 \u6cc9\u5dde\u5e02 \u6f33\u5dde\u5e02 \u5357\u5e73\u5e02 \u9f99\u5ca9\u5e02 \u5b81\u5fb7\u5e02".split(" ")},
{n:"\u6c5f\u897f\u7701",cs:"\u5357\u660c\u5e02 \u666f\u5fb7\u9547\u5e02 \u840d\u4e61\u5e02 \u4e5d\u6c5f\u5e02 \u65b0\u4f59\u5e02 \u9e70\u6f6d\u5e02 \u8d63\u5dde\u5e02 \u5409\u5b89\u5e02 \u5b9c\u6625\u5e02 \u629a\u5dde\u5e02 \u4e0a\u9976\u5e02".split(" ")},{n:"\u5c71\u4e1c\u7701",cs:"\u6d4e\u5357\u5e02 \u9752\u5c9b\u5e02 \u6dc4\u535a\u5e02 \u67a3\u5e84\u5e02 \u4e1c\u8425\u5e02 \u70df\u53f0\u5e02 \u6f4d\u574a\u5e02 \u6d4e\u5b81\u5e02 \u6cf0\u5b89\u5e02 \u5a01\u6d77\u5e02 \u65e5\u7167\u5e02 \u83b1\u829c\u5e02 \u4e34\u6c82\u5e02 \u5fb7\u5dde\u5e02 \u804a\u57ce\u5e02 \u6ee8\u5dde\u5e02 \u83cf\u6cfd\u5e02".split(" ")},
{n:"\u6cb3\u5357\u7701",cs:"\u90d1\u5dde\u5e02 \u5f00\u5c01\u5e02 \u6d1b\u9633\u5e02 \u5e73\u9876\u5c71\u5e02 \u5b89\u9633\u5e02 \u9e64\u58c1\u5e02 \u65b0\u4e61\u5e02 \u7126\u4f5c\u5e02 \u6fee\u9633\u5e02 \u8bb8\u660c\u5e02 \u6f2f\u6cb3\u5e02 \u4e09\u95e8\u5ce1\u5e02 \u5357\u9633\u5e02 \u5546\u4e18\u5e02 \u4fe1\u9633\u5e02 \u5468\u53e3\u5e02 \u9a7b\u9a6c\u5e97\u5e02 \u76f4\u8f96\u5e02\u53bf\u7ea7\u884c\u653f\u533a\u5212".split(" ")},{n:"\u6e56\u5317\u7701",cs:"\u6b66\u6c49\u5e02 \u9ec4\u77f3\u5e02 \u5341\u5830\u5e02 \u5b9c\u660c\u5e02 \u8944\u9633\u5e02 \u9102\u5dde\u5e02 \u8346\u95e8\u5e02 \u5b5d\u611f\u5e02 \u8346\u5dde\u5e02 \u9ec4\u5188\u5e02 \u54b8\u5b81\u5e02 \u968f\u5dde\u5e02 \u6069\u65bd\u571f\u5bb6\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde \u76f4\u8f96\u5e02\u53bf\u7ea7\u884c\u653f\u533a\u5212".split(" ")},
{n:"\u6e56\u5357\u7701",cs:"\u957f\u6c99\u5e02 \u682a\u6d32\u5e02 \u6e58\u6f6d\u5e02 \u8861\u9633\u5e02 \u90b5\u9633\u5e02 \u5cb3\u9633\u5e02 \u5e38\u5fb7\u5e02 \u5f20\u5bb6\u754c\u5e02 \u76ca\u9633\u5e02 \u90f4\u5dde\u5e02 \u6c38\u5dde\u5e02 \u6000\u5316\u5e02 \u5a04\u5e95\u5e02 \u6e58\u897f\u571f\u5bb6\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde".split(" ")},{n:"\u5e7f\u4e1c\u7701",cs:"\u5e7f\u5dde\u5e02 \u97f6\u5173\u5e02 \u6df1\u5733\u5e02 \u73e0\u6d77\u5e02 \u6c55\u5934\u5e02 \u4f5b\u5c71\u5e02 \u6c5f\u95e8\u5e02 \u6e5b\u6c5f\u5e02 \u8302\u540d\u5e02 \u8087\u5e86\u5e02 \u60e0\u5dde\u5e02 \u6885\u5dde\u5e02 \u6c55\u5c3e\u5e02 \u6cb3\u6e90\u5e02 \u9633\u6c5f\u5e02 \u6e05\u8fdc\u5e02 \u4e1c\u839e\u5e02 \u4e2d\u5c71\u5e02 \u6f6e\u5dde\u5e02 \u63ed\u9633\u5e02 \u4e91\u6d6e\u5e02".split(" ")},
{n:"\u5e7f\u897f\u58ee\u65cf\u81ea\u6cbb\u533a",cs:"\u5357\u5b81\u5e02 \u67f3\u5dde\u5e02 \u6842\u6797\u5e02 \u68a7\u5dde\u5e02 \u5317\u6d77\u5e02 \u9632\u57ce\u6e2f\u5e02 \u94a6\u5dde\u5e02 \u8d35\u6e2f\u5e02 \u7389\u6797\u5e02 \u767e\u8272\u5e02 \u8d3a\u5dde\u5e02 \u6cb3\u6c60\u5e02 \u6765\u5bbe\u5e02 \u5d07\u5de6\u5e02".split(" ")},{n:"\u6d77\u5357\u7701",cs:["\u6d77\u53e3\u5e02","\u4e09\u4e9a\u5e02","\u4e09\u6c99\u5e02","\u76f4\u8f96\u5e02\u53bf\u7ea7\u884c\u653f\u533a\u5212"]},{n:"\u91cd\u5e86\u5e02",
cs:["\u91cd\u5e86\u5e02"]},{n:"\u56db\u5ddd\u7701",cs:"\u6210\u90fd\u5e02 \u81ea\u8d21\u5e02 \u6500\u679d\u82b1\u5e02 \u6cf8\u5dde\u5e02 \u5fb7\u9633\u5e02 \u7ef5\u9633\u5e02 \u5e7f\u5143\u5e02 \u9042\u5b81\u5e02 \u5185\u6c5f\u5e02 \u4e50\u5c71\u5e02 \u5357\u5145\u5e02 \u7709\u5c71\u5e02 \u5b9c\u5bbe\u5e02 \u5e7f\u5b89\u5e02 \u8fbe\u5dde\u5e02 \u96c5\u5b89\u5e02 \u5df4\u4e2d\u5e02 \u8d44\u9633\u5e02 \u963f\u575d\u85cf\u65cf\u7f8c\u65cf\u81ea\u6cbb\u5dde \u7518\u5b5c\u85cf\u65cf\u81ea\u6cbb\u5dde \u51c9\u5c71\u5f5d\u65cf\u81ea\u6cbb\u5dde".split(" ")},
{n:"\u8d35\u5dde\u7701",cs:"\u8d35\u9633\u5e02 \u516d\u76d8\u6c34\u5e02 \u9075\u4e49\u5e02 \u5b89\u987a\u5e02 \u6bd5\u8282\u5e02 \u94dc\u4ec1\u5e02 \u9ed4\u897f\u5357\u5e03\u4f9d\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde \u9ed4\u4e1c\u5357\u82d7\u65cf\u4f97\u65cf\u81ea\u6cbb\u5dde \u9ed4\u5357\u5e03\u4f9d\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde".split(" ")},{n:"\u4e91\u5357\u7701",cs:"\u6606\u660e\u5e02 \u66f2\u9756\u5e02 \u7389\u6eaa\u5e02 \u4fdd\u5c71\u5e02 \u662d\u901a\u5e02 \u4e3d\u6c5f\u5e02 \u666e\u6d31\u5e02 \u4e34\u6ca7\u5e02 \u695a\u96c4\u5f5d\u65cf\u81ea\u6cbb\u5dde \u7ea2\u6cb3\u54c8\u5c3c\u65cf\u5f5d\u65cf\u81ea\u6cbb\u5dde \u6587\u5c71\u58ee\u65cf\u82d7\u65cf\u81ea\u6cbb\u5dde \u897f\u53cc\u7248\u7eb3\u50a3\u65cf\u81ea\u6cbb\u5dde \u5927\u7406\u767d\u65cf\u81ea\u6cbb\u5dde \u5fb7\u5b8f\u50a3\u65cf\u666f\u9887\u65cf\u81ea\u6cbb\u5dde \u6012\u6c5f\u5088\u50f3\u65cf\u81ea\u6cbb\u5dde \u8fea\u5e86\u85cf\u65cf\u81ea\u6cbb\u5dde".split(" ")},
{n:"\u897f\u85cf\u81ea\u6cbb\u533a",cs:"\u62c9\u8428\u5e02 \u660c\u90fd\u5730\u533a \u5c71\u5357\u5730\u533a \u65e5\u5580\u5219\u5730\u533a \u90a3\u66f2\u5730\u533a \u963f\u91cc\u5730\u533a \u6797\u829d\u5730\u533a".split(" ")},{n:"\u9655\u897f\u7701",cs:"\u897f\u5b89\u5e02 \u94dc\u5ddd\u5e02 \u5b9d\u9e21\u5e02 \u54b8\u9633\u5e02 \u6e2d\u5357\u5e02 \u5ef6\u5b89\u5e02 \u6c49\u4e2d\u5e02 \u6986\u6797\u5e02 \u5b89\u5eb7\u5e02 \u5546\u6d1b\u5e02".split(" ")},{n:"\u7518\u8083\u7701",cs:"\u5170\u5dde\u5e02 \u5609\u5cea\u5173\u5e02 \u91d1\u660c\u5e02 \u767d\u94f6\u5e02 \u5929\u6c34\u5e02 \u6b66\u5a01\u5e02 \u5f20\u6396\u5e02 \u5e73\u51c9\u5e02 \u9152\u6cc9\u5e02 \u5e86\u9633\u5e02 \u5b9a\u897f\u5e02 \u9647\u5357\u5e02 \u4e34\u590f\u56de\u65cf\u81ea\u6cbb\u5dde \u7518\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde".split(" ")},
{n:"\u9752\u6d77\u7701",cs:"\u897f\u5b81\u5e02 \u6d77\u4e1c\u5730\u533a \u6d77\u5317\u85cf\u65cf\u81ea\u6cbb\u5dde \u9ec4\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde \u6d77\u5357\u85cf\u65cf\u81ea\u6cbb\u5dde \u679c\u6d1b\u85cf\u65cf\u81ea\u6cbb\u5dde \u7389\u6811\u85cf\u65cf\u81ea\u6cbb\u5dde \u6d77\u897f\u8499\u53e4\u65cf\u85cf\u65cf\u81ea\u6cbb\u5dde".split(" ")},{n:"\u5b81\u590f\u56de\u65cf\u81ea\u6cbb\u533a",cs:["\u94f6\u5ddd\u5e02","\u77f3\u5634\u5c71\u5e02","\u5434\u5fe0\u5e02","\u56fa\u539f\u5e02",
"\u4e2d\u536b\u5e02"]},{n:"\u65b0\u7586\u7ef4\u543e\u5c14\u81ea\u6cbb\u533a",cs:"\u4e4c\u9c81\u6728\u9f50\u5e02 \u514b\u62c9\u739b\u4f9d\u5e02 \u5410\u9c81\u756a\u5730\u533a \u54c8\u5bc6\u5730\u533a \u660c\u5409\u56de\u65cf\u81ea\u6cbb\u5dde \u535a\u5c14\u5854\u62c9\u8499\u53e4\u81ea\u6cbb\u5dde \u5df4\u97f3\u90ed\u695e\u8499\u53e4\u81ea\u6cbb\u5dde \u963f\u514b\u82cf\u5730\u533a \u514b\u5b5c\u52d2\u82cf\u67ef\u5c14\u514b\u5b5c\u81ea\u6cbb\u5dde \u5580\u4ec0\u5730\u533a \u548c\u7530\u5730\u533a \u4f0a\u7281\u54c8\u8428\u514b\u81ea\u6cbb\u5dde \u5854\u57ce\u5730\u533a \u963f\u52d2\u6cf0\u5730\u533a \u76f4\u8f96\u5e02\u53bf\u7ea7\u884c\u653f\u533a\u5212".split(" ")},
{n:"\u53f0\u6e7e\u7701",cs:"\u76f4\u8f96\u5e02\u53bf\u7ea7\u884c\u653f\u533a\u5212 \u65b0\u5317\u5e02 \u53f0\u5317\u5e02 \u53f0\u4e2d\u5e02 \u53f0\u5357\u5e02 \u9ad8\u96c4\u5e02".split(" ")},{n:"\u9999\u6e2f\u7279\u522b\u884c\u653f\u533a",cs:["\u9999\u6e2f"]},{n:"\u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a",cs:["\u6fb3\u95e8"]},{n:"\u6d77\u5916",cs:["\u6d77\u5916"]}];
function PrettyImagePreview(b){var a=this;CU.isEmpty(b)&&(b={});CU.isEmpty(b.width)&&(b.width=1E3);CU.isEmpty(b.height)&&(b.height=700);this.navHeight=100;this.imageWidth=b.width-30;this.imageHeight=b.height-this.navHeight;this.previewPageIdx=0;this.previewPageSize=CU.isEmpty(b.previewPageSize)||1>b.previewPageSize?6:b.previewPageSize;this.previewPages=0;this.previewImages=[];var c=[];c.push('<div style="padding:0px;margin:0px;display:none;top:0px;left:0px;z-index:1050;position:fixed;background:#000000;" >',
'   <div class="modal-dialog" style="width:'+b.width+'px;margin:0px;background:#000000;">','      <div class="modal-content" style="border-radius:0px;background:#000000;">','         <div class="modal-header" style="border:0px;">','            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" style="opacity:1;color:#ffffff;">&times;&nbsp;<span style="font-size:14px;">\u5173\u95ed</span></button>','            <h4 class="modal-title" style="color:#ffffff;">\u56fe\u7247\u9884\u89c8</h4>',
"         </div>",'         <div class="modal-body" style="padding:0px;">','         \t<div name="div_img_container" style="width:'+a.imageWidth+"px;height:"+a.imageHeight+"px;text-align:center;line-height:"+a.imageHeight+'px;"></div>','\t\t\t<div class="BaseImagePreview_singleLeft" style="position: absolute;top:40%;left:20px;width:30px;height:40px;padding:4px;cursor: pointer;"><img src="',ContextPath,'/tannux/frame/imgs/core/hover-prev.png"></div>','\t\t\t<div class="BaseImagePreview_singleRight" style="position: absolute;top:40%;right:20px;width:30px;height:40px;padding:4px;cursor: pointer;"><img src="',
ContextPath,'/tannux/frame/imgs/core/hover-next.png"></div>',"         </div>",'         <div class="modal-footer" style="border:0px;">','       \t<table style="width:100%;height:'+a.navHeight+'px;" border=0>',"      \t\t<tr>",'       \t\t<td style="width:40px;" align="center"><div class="BaseImagePreview_left"></div></td>','      \t\t\t<td class="BaseImagePreview_center" ></td>','      \t\t\t<td style="width:40px;" align="center"><div class="BaseImagePreview_right"></div></td>',"      \t\t</tr>",
"      \t</table>","        </div>","      </div>","\t</div>","</div>");this.el_preview=$(c.join(""));this.el_title=$(this.el_preview.find(".modal-title")[0]);this.el_dialog=$(this.el_preview.find(".modal-dialog")[0]);this.el_body=$(this.el_preview.find(".modal-body")[0]);this.el_imgContainer=$(this.el_preview.find("div[name='div_img_container']")[0]);this.el_imagetpl=$(this.el_preview.find(".modal-body").children()[0]);this.el_imageLeft=$(this.el_preview.find(".BaseImagePreview_left")[0]);this.el_imageCenter=
$(this.el_preview.find(".BaseImagePreview_center")[0]);this.el_imageRight=$(this.el_preview.find(".BaseImagePreview_right")[0]);this.el_singleLeft=$(this.el_preview.find(".BaseImagePreview_singleLeft")[0]);this.el_singleRight=$(this.el_preview.find(".BaseImagePreview_singleRight")[0]);a.previewImages=[];$("body").append(a.el_preview);this.prevImage=function(){for(var d=a.el_imageCenter.children(),g=0;g<d.length;g++)if($(d[g]).hasClass("selected")){0==g?a.prevPage()&&(d=a.el_imageCenter.children(),
a.selectImage($(d[d.length-1]))):a.selectImage($(d[g-1]));break}};this.nextImage=function(){for(var d=a.el_imageCenter.children(),g=0;g<d.length;g++)if($(d[g]).hasClass("selected")){g==d.length-1?a.nextPage():a.selectImage($(d[g+1]));break}};this.prevPage=function(){if(0>=a.previewPageIdx)return!1;a.previewPageIdx--;a.refreshImagePreview(a.previewPageIdx);return!0};this.nextPage=function(){if(a.previewPageIdx>=a.previewPages-1)return!1;a.previewPageIdx++;a.refreshImagePreview(a.previewPageIdx);return!0};
this.el_preview.find(".close").bind("click",function(){a.close()});this.el_imageLeft.bind("click",this.prevPage);this.el_imageRight.bind("click",this.nextPage);this.el_singleLeft.bind("click",this.prevImage);this.el_singleRight.bind("click",this.nextImage);this.setTitle=function(d){a.el_title.html("\u56fe\u7247\u9884\u89c8&nbsp;&nbsp;-&nbsp;&nbsp;"+d)};this.resetPreviewImages=function(d){a.previewImages=[];if(!CU.isEmpty(d))for(var g=0;g<d.length;g++){var h=d[g];if(CU.isObject(h)){var k=h.name;var f=
h.path;h=h.thumb}else k=f=h,0<=k.indexOf("/")&&(k=k.substring(k.lastIndexOf("/")+1));CU.isEmpty(h)&&(h=3==PU.getSourceType(f)?CU.getWebRoot()+"/tannux/frame/imgs/core/video60.svg":f);a.previewImages.push({name:k,path:f,thumb:h})}};this.getShowIndex=function(d){if("string"==typeof d){for(var g=-1,h=0;h<a.previewImages.length;h++)if(a.previewImages[h].path.endsWith(d)){g=h;break}-1==g&&(g=0);d=g}d=0>d?0:d>=a.previewImages.length?a.previewImages.length-1:d;return[parseInt(d/a.previewPageSize,10),d%a.previewPageSize]};
this.setWindowSize=function(){var d=$(window).width();a.imageWidth=d-30;a.imageHeight=$(window).height()-a.navHeight-88;a.el_dialog.width(d);a.el_imgContainer.width(a.imageWidth);a.el_imgContainer.height(a.imageHeight);a.el_imgContainer.css("line-height",a.imageHeight+"px");a.previewPageSize=parseInt(a.imageWidth/150,10)};this.show=function(d,g){a.setWindowSize();a.previewImages=[];a.previewPageIdx=0;a.previewPages=0;a.el_imagetpl.html("");a.el_imageCenter.html("");if(!CU.isEmpty(d)&&0<d.length){var h=
parseInt(d.length/a.previewPageSize,10);a.previewPages=0<d.length%a.previewPageSize?h+1:h;a.resetPreviewImages(d);CU.isEmpty(g)&&(g=0);a.selectAt(g)}a.el_preview.css("top",$(window).height()+"px");a.el_preview.css("display","block");a.el_preview.animate({top:0},300)};this.close=function(){a.el_preview.animate({top:$(window).height()},300);setTimeout(function(){a.el_imagetpl.html("");a.el_preview.css("display","none")},300)};this.selectAt=function(d){CU.isEmpty(d)||(a.previewPageIdx=0,d=a.getShowIndex(d),
a.previewPageIdx=d[0],a.refreshImagePreview(a.previewPageIdx,d[1]))};this.selectImage=function(d){d=$(d);var g=$(d.children()[0]),h=g.attr("path");g=g.attr("title");a.setTitle(g);a.el_imagetpl.html("");3==PU.getSourceType(h)?a.el_imagetpl.append($('<video style="max-width:'+a.imageWidth+"px;max-height:"+a.imageHeight+'px;" src="'+RS.toRsmUrl(h)+'" controls="controls" autoplay="autoplay" crossorigin="anonymous">\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 video \u6807\u7b7e\u3002 </video>')):a.el_imagetpl.append($('<img style="max-width:'+
a.imageWidth+"px;max-height:"+a.imageHeight+'px;" src="'+RS.toRsmImageUrl(h)+'">'));h=a.el_imageCenter.children();h.css("border","0px");h.removeClass("selected");d.css("border","solid 1px #adc0d9");d.addClass("selected")};this.refreshImagePreview=function(d,g){if(!CU.isEmpty(a.el_preview)){a.el_imagetpl.html("");a.el_imageCenter.html("");var h=a.previewImages;if(!CU.isEmpty(h)){var k=d*a.previewPageSize;d=k+a.previewPageSize;if(CU.isEmpty(g)||g>=a.previewPageSize||g>=h.length-k)g=0;for(var f=null,
l=0;k<d&&k<h.length;k++,l++){var m=h[k].path,n=h[k].name,q=h[k].thumb,p=RS.toRsmUrl(q,{"x-oss-process":"image/auto-orient,1/resize,m_lfit,w_145/quality,Q_70"});m=$('<div style="width:145px;height:'+a.navHeight+'px;padding:5px;border:solid 0px #adc0d9;float:left;display: flex;align-items: center;text-align:center;justify-content:center;"><img class="BaseImagePreview_smallimg" path="'+m+'" thumb="'+q+'" src="'+p+'" title="'+n+'"></div>');a.el_imageCenter.append(m);l==g&&(f=m);m.bind("click",function(){a.selectImage(this)})}CU.isEmpty(f)||
a.selectImage(f);g=a.el_imageLeft;h=a.el_imageRight;g.css("background-image","url("+ContextPath+"/tannux/frame/imgs/core/"+(0>=a.previewPageIdx?"disabled-prev.png":"hover-prev.png")+")");g.css("cursor",0>=a.previewPageIdx?"default":"pointer");h.css("background-image","url("+ContextPath+"/tannux/frame/imgs/core/"+(a.previewPageIdx>=a.previewPages-1?"disabled-next.png":"hover-next.png")+")");h.css("cursor",a.previewPageIdx>=a.previewPages-1?"default":"pointer")}}}}
function PrettyTextPreview(){var b=this;this.win=$('<div class="modal fade" role="dialog" aria-hidden="true">   <div class="modal-dialog">      <div class="modal-content">         <div class="modal-header">            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>            <h4 class="modal-title"></h4>         </div>         <div class="modal-body form-horizontal" style="padding-top:0px;">         \t<div class="form-group" style="margin:0px 0px 15px 0px;padding-top:10px;">         \t\t<div class="pull-left input-title" style="font-weight: 600;"></div>         \t\t<div class="pull-right"><div>\t\t\t\t\t<label class="control-label pull-left" style="padding-top:4px;">\u5b57\u7b26\u96c6</label>\t\t\t\t\t<div class="pull-left"><select class="form-control input-select-charset" style="width:130px;display: inline-block;height:26px;padding: 2px 12px;">\t\t\t\t\t\t<option value="UTF-8">UTF-8</option>\t\t\t\t\t\t<option value="GB2312">GB2312</option>\t\t\t\t\t\t<option value="BIG5">BIG5</option>\t\t\t\t\t\t<option value="ISO-8859-1">ISO-8859-1</option>\t\t\t\t\t</select></div>&nbsp;&nbsp;\t\t\t\t\t<button type="button" class="btn btn-default btn-prev-index" style="padding: 2px 12px;">\u4e0a\u4e00\u7bc7</button>&nbsp;\t\t\t\t\t<button type="button" class="btn btn-default btn-next-index" style="padding: 2px 12px;">\u4e0b\u4e00\u7bc7</button>\t\t\t\t</div></div>         \t</div>         \t<div class="form-group input-content" style="margin: 0px;">         \t</div>         </div>      </div>\t</div></div>');
$("body").append(this.win);this.el_select_charset=$(this.win.find(".input-select-charset")[0]);this.el_btn_prev=$(this.win.find(".btn-prev-index")[0]);this.el_btn_next=$(this.win.find(".btn-next-index")[0]);this.el_title=$(this.win.find(".input-title")[0]);this.el_content=$(this.win.find(".input-content")[0]);this.data=[];this.index=-1;this.refreshIndex=function(){CU.isEmpty(b.data)?(b.index=-1,b.el_btn_prev.prop("disabled",!0),b.el_btn_next.prop("disabled",!0)):(0>b.index?b.index=0:b.index>=b.data.length&&
(b.index=b.data.length-1),b.el_btn_prev.prop("disabled",0>=b.index),b.el_btn_next.prop("disabled",b.index>=b.data.length-1));b.el_btn_prev.css("display",1<b.data.length?"inline-block":"none");b.el_btn_next.css("display",1<b.data.length?"inline-block":"none")};this.prev=function(){0>=b.index||(b.index--,b.refreshIndex(),b.query())};this.next=function(){0>b.index||b.index>=b.data.length-1||(b.index++,b.refreshIndex(),b.query())};this.query=function(){b.el_title.html("");b.el_content.html("");if(!(0>
b.index||b.index>=b.data.length)){var a=b.data[b.index],c=a.name;a=a.path;CU.isEmpty(c)||b.el_title.html(c);CU.isEmpty(a)||(c=b.el_select_charset.val(),RS.ajax({url:"/sysframe/tool/readRosText",ps:{path:a,charset:c},cb:function(d){CU.isEmpty(d)&&(d="");0<=d.indexOf("<")&&0<=d.indexOf(">")||(d=d.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"));b.el_content.html(d)}}))}};this.show=function(a){a=$.extend({title:"\u6587\u672c\u9884\u89c8",width:1E3,minHeight:500,at:0},a);delete b.data;
b.data=[];b.index=CU.isInteger(a.at)?"string"==typeof a.at?parseInt(CU.trim(a.at)):a.at:0;if(!CU.isEmpty(a.data))for(var c=0;c<a.data.length;c++){var d=a.data[c];"string"==typeof d&&(d={path:d});b.data.push(d)}b.win.find(".modal-title").html(a.title);b.win.find(".modal-dialog").css("width",CU.isNumber(a.width)?a.width+"px":a.width);c=b.win.find(".modal-body");c.css("min-height",CU.isNumber(a.minHeight)?a.minHeight+"px":a.minHeight);CU.isEmpty(a.maxHeight)||c.css("max-height",CU.isNumber(a.maxHeight)?
a.maxHeight+"px":a.maxHeight);b.win.modal("show");b.refreshIndex();b.query()};this.el_select_charset.bind("change",b.query);this.el_btn_prev.bind("click",b.prev);this.el_btn_next.bind("click",b.next)}
function PrettyRsmChooser(){var b=this;this.histDirId="";var a=[];a.push('<div class="modal fade" name="div_rsm_chooser" role="dialog" aria-hidden="true">','   <div class="modal-dialog" style="width:900px;">','      <div class="modal-content">','         <div class="modal-header">','            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>','            <h4 class="modal-title">\u8d44\u6e90\u9009\u62e9</h4>',"         </div>",'         <div class="modal-body" style="padding:0px;">',
'         \t<iframe name="iframe_rsm_chooser" frameborder="0" width="100%" src="" style="height:550px;overflow: hidden;" scrolling="no"></iframe>',"         </div>",'         <div class="modal-footer">','         \t<button type="button" name="btn_submit" class="btn btn-success"><i class="fa fa-check"></i>\u786e\u5b9a</button>&nbsp;','         \t<button type="button" name="btn_close" class="btn btn-default">\u5173\u95ed</button>',"         </div>","      </div>","\t</div>","</div>");this.el_preview=
$(a.join(""));this.el_iframe=$(this.el_preview.find("iframe")[0]);$("body").append(b.el_preview);this.el_preview.find("button[name='btn_submit']").bind("click",function(){RS.postMessage({win:b.el_iframe[0].contentWindow,cb:function(c){CU.isEmpty(c)||CU.isEmpty(c[0])&&CU.isEmpty(c[1])?CC.showTip({type:"error",msg:"\u8bf7\u9009\u62e9"+("1"==b.el_preview[0].onlyDir?"\u76ee\u5f55":"\u8d44\u6e90")}):CU.isFunction(b.el_preview[0].callback)&&!1===b.el_preview[0].callback(c[0],c[1])||(b.setHistDirId(c[2]),
b.close())}})});this.el_preview.find("button[name='btn_close']").bind("click",function(){b.close()});this.getHistDirId=function(){CU.isEmpty(b.histDirId)&&(b.histDirId=window.localStorage.getItem("TANNUX_RSMCHOOSER_HIST_DIRID_"+MENU.id));return b.histDirId};this.setHistDirId=function(c){b.histDirId=c;window.localStorage.setItem("TANNUX_RSMCHOOSER_HIST_DIRID_"+MENU.id,c)};this.show=function(c,d){var g=$.extend({ssl:CU.isWebHttps(),dirId:b.getHistDirId(),addDir:!0,addSource:!0,singleSelect:!1,selectableType:2,
onlyDir:!1,verifyAuth:!1,bgcolor:"#ffffff",maxHeight:495,ppad:0,pad:0},c);CU.isFunction(PU.isToRsmAppendToken)&&(g.appendToken=PU.isToRsmAppendToken(c,g));var h=RS.getRemoteUrl({addroot:c.addroot,act:"simple",url:"/ros/client/forward2SelectSource"});h+=(0>h.indexOf("?")?"?":"&")+CU.parseParams(g,!0);b.el_iframe.attr("src",h);b.el_preview[0].onlyDir=!0===c.onlyDir||"true"==c.onlyDir||"1"==c.onlyDir?"1":"0";b.el_preview[0].callback=d;b.el_preview.modal("show")};this.close=function(){b.el_preview.modal("hide")}}
function PrettyOmstdChooser(){var b=this;this.histDirId="";var a=[];a.push('<div class="modal fade" name="div_omstd_chooser" role="dialog" aria-hidden="true">','   <div class="modal-dialog" style="width:1000px;">','      <div class="modal-content">','         <div class="modal-header">','            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>','            <h4 class="modal-title">\u5bf9\u8c61\u9009\u62e9</h4>',"         </div>",'         <div class="modal-body" style="padding:0px;">',
'         \t<iframe name="iframe_omstd_chooser" frameborder="0" width="100%" src="" style="height:550px;overflow: hidden;" scrolling="no"></iframe>',"         </div>",'         <div class="modal-footer">','         \t<button type="button" name="btn_omstd_submit" class="btn btn-success"><i class="fa fa-check"></i>\u786e\u5b9a</button>&nbsp;','         \t<button type="button" name="btn_omstd_close" class="btn btn-default">\u5173\u95ed</button>',"         </div>","      </div>","\t</div>","</div>");
this.el_preview=$(a.join(""));this.el_iframe=$(this.el_preview.find("iframe")[0]);$("body").append(b.el_preview);this.el_preview.find("button[name='btn_omstd_submit']").bind("click",function(){RS.postMessage({win:b.el_iframe[0].contentWindow,cb:function(c){CU.isEmpty(c)||CU.isEmpty(c[0])&&CU.isEmpty(c[1])?CC.showTip({type:"error",msg:"\u8bf7\u9009\u62e9\u5bf9\u8c61."}):CU.isFunction(b.el_preview[0].callback)&&!1===b.el_preview[0].callback(c[0],c[1])||(b.setHistDirId(c[2]),b.close())}})});this.el_preview.find("button[name='btn_omstd_close']").bind("click",
function(){b.close()});this.getHistDirId=function(){CU.isEmpty(b.histDirId)&&(b.histDirId=window.localStorage.getItem("TANNUX_OMSTDCHOOSER_HIST_DIRID_"+MENU.id));return b.histDirId};this.setHistDirId=function(c){b.histDirId=c;window.localStorage.setItem("TANNUX_OMSTDCHOOSER_HIST_DIRID_"+MENU.id,c)};this.show=function(c,d){var g=c.title;delete c.title;var h=$.extend({dirId:b.getHistDirId(),addDir:!0,addRecord:!0,singleSelect:!1,selectableType:2,bgcolor:"#ffffff",maxHeight:495,ppad:0,pad:0},c);c=RS.getRemoteUrl({addroot:c.addroot,
act:"simple",url:c.url});c+=(0>c.indexOf("?")?"?":"&")+CU.parseParams(h,!0);b.el_preview.find(".modal-title").html(CU.isEmpty(g)?"\u5bf9\u8c61\u9009\u62e9":g);b.el_iframe.attr("src",c);b.el_preview[0].callback=d;b.el_preview.modal("show")};this.close=function(){b.el_preview.modal("hide")}}
function PrettyUploadField(b){if(CU.isEmpty(b))throw" the config is empty argument! ";if(CU.isEmpty(b.bid))throw" the config.bid is empty argument! ";var a=this;$.extend(a,{single:!0,editable:!0,maxSize:10485760,uploadName:"files",addDir:!0,addSource:!0,onlyDir:!1,verifyAuth:!1,selectableType:"2",uploadType:2,showType:1},b);this.formatText=this.formatSuffixs=this.formatFunction=null;if(!CU.isEmpty(b.format))if(CU.isFunction(b.format))a.formatFunction=b.format;else{a.formatSuffixs=[];for(var c=b.format.split("|"),
d=0;d<c.length;d++)a.formatSuffixs.push($.trim(c[d].toUpperCase()));a.formatText=CU.isEmpty(b.formatText)?b.format:b.formatText}"string"==typeof this.bid?this.el_base=$("#"+this.bid):(this.el_base=$(this.bid),this.bid=this.el_base.attr("id"),CU.isEmpty(this.bid)&&(this.bid="PrettyUploadField_"+CU.getId()));b=CU.isEmpty(a.suffix)?"":"."+a.suffix.replace(/,/g,",.");this.el_icon=$('<label style="color:#4A73F7;cursor:pointer;display:'+(a.editable?"block":"none")+';"><i class="fa fa-upload fa-lg"></i></label>');
this.el_file=$('<input type="file" '+(a.single?"":'multiple="multiple"')+' style="opacity: 0; display: none;" accept="'+b+'">');this.el_button=$('<div class="pull-left" style="margin-right:15px;margin-top:4px;"></div>');this.el_button.append(this.el_icon);this.el_button.append(this.el_file);this.el_prefiles=$("<div></div>");this.el_parent=CU.isObject(a.bid)?$(a.bid):$("#"+a.bid);this.el_parent.append(this.el_button);this.el_parent.append(this.el_prefiles);this.el_icon.bind("click",function(){var g=
a.el_icon.attr("disabled");!0!==g&&"disabled"!=g&&(1==a.uploadType?a.el_file.click():PU.showRsmChooser({addroot:a.addroot,dirId:a.dirId,addDir:a.addDir,addSource:a.addSource,onlyDir:a.onlyDir,verifyAuth:a.verifyAuth,singleSelect:a.single,selectableType:a.selectableType,sourceTypes:a.sourceTypes,sourceSuffixs:a.suffix},function(h,k){if(!CU.isEmpty(k)){h=[];for(var f=0;f<k.length;f++){var l=k[f];if(CU.isEmpty(l.sourceSize)||l.sourceSize>a.maxSize)CC.showTip({type:"error",msg:"\u6587\u4ef6["+l.sourceName+
"]\u5927\u5c0f\u8d85\u8fc7\u9650\u5236"+CU.toByteUnit(a.maxSize)+"."});else{var m=l.sourcePath,n=l.thumbImagePath;CU.isEmpty(n)&&2==l.sourceType&&(n=m);h.push({name:l.sourceName,path:m,thumb:n,sourceType:l.sourceType,playTime:l.playTime,width:l.width,height:l.height,sourceSize:l.sourceSize});if(a.single)break}}a.single&&a.clearValue();a.addPreviewFiles(h)}}))});this.el_file.bind("change",function(){var g=this.files;if(!CU.isEmpty(g)&&0!=g.length){for(var h=new FormData,k=[],f=0;f<g.length;f++){var l=
g[f];if(!a.validateFormat(l))return;if(l.size>a.maxSize){CC.showTip({type:"error",msg:"\u6587\u4ef6["+l.name+"]\u5927\u5c0f\u4e0d\u5f97\u8d85\u8fc7"+CU.toByteUnit(a.maxSize)+"."});return}h.append(a.uploadName,l);k.push(l.name)}a.upload(k,h,function(m){a.single?a.setValue(m):a.addPreviewFiles(m);if(CU.isFunction(a.onUpload))a.onUpload(m)});a.el_file.val("")}});this.upload=function(g,h,k){RS.ajax({addroot:a.addroot,url:a.uploadUrl,act:"form",ps:h,bscfg:{processData:!1,contentType:!1},upload:!0,loading:a.el_icon,
cb:function(f){CU.isEmpty(f)||CU.isArray(f)||(f=[f]);if(CU.isFunction(k)){var l=[];if(!CU.isEmpty(g)&&!CU.isEmpty(f))for(var m=g.length>f.length?f.length:g.length,n=0;n<m;n++)l.push({name:g[n],path:f[n]});k(l)}},errcb:function(f,l){!1!==RS.onShowErrMsg(f,l)&&alert("\u8bbf\u95ee\u8fdc\u7a0b\u670d\u52a1\u5668\u5931\u8d25!")}})};this.validateFormat=function(g){return CU.isEmpty(a.formatFunction)?!CU.isEmpty(a.formatSuffixs)&&(g=g.name,CU.isEmpty(g)||0>g.indexOf(".")||0>a.formatSuffixs.indexOf($.trim(g.substring(g.lastIndexOf(".")+
1).toUpperCase())))?(CC.showTip({type:"error",msg:"\u6587\u4ef6["+g+"]\u683c\u5f0f\u4e0d\u7b26\u5408\u8981\u6c42\uff1a"+a.formatText+"!"}),!1):!0:a.formatFunction(g)};this.createPreviewFile=function(g){var h=g.name,k=g.path,f=g.thumb;CU.isEmpty(g.sourceType)&&(g.sourceType=PU.getSourceType(k));CU.isEmpty(f)&&(f=2==g.sourceType||"2"==g.sourceType?k:"");var l=a.editable?'style="padding-right:6px;"':"",m=PU.getSourceType(k);if(CU.isEmpty(f)){switch(m){case 1:f=2==a.showType?"doc60.svg":"doc16.svg";break;
case 2:f=2==a.showType?"image60.svg":"image16.svg";break;case 3:f=2==a.showType?"video60.svg":"video16.svg";break;case 4:f=2==a.showType?"audio60.svg":"audio16.svg";break;case 5:f=2==a.showType?"file60.svg":"file16.svg";break;default:f=2==a.showType?"file60.svg":"file16.svg"}f=ContextPath+"/tannux/frame/imgs/core/"+f}else f=PU.toRsmUrl(f,{"x-oss-process":"image/auto-orient,1/resize,m_lfit,w_60/quality,Q_70"});g=CU.toHtmlAttrs(g);h=$('<a href="'+(2!=m?PU.toRsmUrl(k):"###")+'" '+(2!=m?'target="_blank"':
"")+" "+l+' title="'+h+'" '+g+'><img src="'+f+'" style="'+(2==a.showType?"max-width:60px;max-height:60px;":"width:24px;height:24px;")+'"></a>');k=$('<a href="###" style="color:#FF0000;padding-right:6px;'+(a.editable?"":"display:none;")+'"><i class="fa fa-times"></i></a>');l=$('<div class="form-control" style="padding:0px;height:auto;background-color: #fefefe;"></div>');g=$('<div class="pull-left" style="padding:3px 5px 3px 5px;">');l.append(h);l.append(k);g.append(l);2==m&&h.bind("click",function(){for(var n=
a.getValue(),q=[],p=0;p<n.length;p++)2==PU.getSourceType(n[p].path)&&q.push(n[p]);PU.getImagePreview().show(q,$(this).attr("path"))});k.bind("click",function(){$(this).parent().parent().remove();a.refreshElementValue()});return g};this.addPreviewFiles=function(g){for(var h=0;h<g.length;h++){var k=a.createPreviewFile(g[h]);a.el_prefiles.append(k)}a.refreshElementValue()};this.setEditable=function(g){a.editable=!0===g||"true"==g||1===g||"1"==g;a.el_icon.css("display",a.editable?"block":"none");g=a.getValue();
CU.isEmpty(g)||a.setValue(g)};this.getValue=function(){var g=a.el_prefiles.find("a"),h=[];if(!CU.isEmpty(g)&&0<g.length)for(var k="path name thumb sourceType playTime width height sourceSize".split(" "),f=0;f<g.length;f++){var l=$(g[f]);l=CU.getHtmlAttrs(l,k);if(!CU.isEmpty(l.path)&&(h.push(l),a.single))break}return h};this.setValue=function(g){a.el_prefiles.html("");CU.isEmpty(g)||(a.single&&1<g.length&&(g=[g[0]]),a.addPreviewFiles(g));a.refreshElementValue()};this.getPaths=function(){for(var g=
a.getValue(),h=[],k=0;k<g.length;k++)h.push(g[k].path);return h};this.getPathsAsString=function(){return a.getPaths().join(",")};this.setPaths=function(g){var h=[];if(!CU.isEmpty(g)){"string"==typeof g&&(g=g.split(","));for(var k=0;k<g.length;k++){var f=g[k],l=f,m=f.lastIndexOf("/");-1<m&&(l=l.substring(m+1));h.push({path:f,name:l})}}a.setValue(h)};this.clearValue=function(){a.el_prefiles.html("");a.refreshElementValue()};this.refreshElementValue=function(){var g=a.getValue();a.el_parent.attr("value",
CU.toString(g))};this.attr=function(g,h){if(null===h||void 0===h)return a.el_parent.attr(g);a.el_parent.attr(g,h)}}
function PrettyDataForm(b){if(CU.isEmpty(b))throw" the config is empty argument! ";if(CU.isEmpty(b.bid))throw" the config.bid is empty argument! ";if(CU.isEmpty(b.items))throw" the config.items is empty argument! ";if(CU.isEmpty(b.attrs))throw" the config.attrs is empty argument! ";var a=this;this.bid=b.bid;this.lazyBuild=!0===b.lazyBuild;this.fieldIdPrefix="PRETTY_FORM_FIELD_"+CU.getId()+"_";this.editable=!1!==b.editable;this.formName=b.formName;this.formDesc=b.formDesc;this.colCount=b.colCount;
this.widthType=b.widthType;this.labelWidth=b.labelWidth;this.compWidth=b.compWidth;this.dictDropPrefix=b.dictDropPrefix;this.searchFieldSize=b.searchFieldSize;this.items=b.items;this.attrs=b.attrs;this.attrMap={};this.attrCodeMap={};this.maxColNum=this.maxRowNum=0;this.uploadUrl=b.uploadUrl;this.uploadName=b.uploadName;this.colorSelectors={"#000000":"#000000","#00AAFF":"#00AAFF","#41B314":"#41B314","#e4cb10":"#e4cb10","#F9354C":"#F9354C","#5bc0de":"#5bc0de","#777777":"#777777"};CU.isEmpty(this.widthType)&&
(this.widthType=1);CU.isEmpty(this.labelWidth)&&(this.labelWidth=120);CU.isEmpty(this.compWidth)&&(this.compWidth=250);CU.isEmpty(this.dictDropPrefix)&&(this.dictDropPrefix="FV_DICT_DROP_");CU.isEmpty(this.searchFieldSize)&&(this.searchFieldSize=20);CU.isEmpty(this.uploadUrl)&&(this.uploadUrl="/omdb/upload/uploadFiles");CU.isEmpty(this.uploadName)&&(this.uploadName="files");for(var c=0;c<this.items.length;c++){var d=this.items[c];d.rowNum>this.maxRowNum&&(this.maxRowNum=d.rowNum);d.colNum>this.maxColNum&&
(this.maxColNum=d.colNum)}CU.isEmpty(this.colCount)&&(this.colCount=this.maxColNum);this.formWidth=0>=a.compWidth?null:(a.labelWidth+a.compWidth)*a.colCount+35;2==this.widthType&&(c=this.labelWidth+this.compWidth,this.labelWidth=parseInt(Math.round(100*this.labelWidth/c/this.colCount),10)-1,this.compWidth=parseInt(Math.round(100*this.compWidth/c)/this.colCount,10)-1);this.widthUnit=2==this.widthType?"%":"px";for(c=0;c<this.attrs.length;c++)d=this.attrs[c],this.attrMap[d.id]=d,CU.isEmpty(d.attrCode)||
(this.attrCodeMap[$.trim(d.attrCode.toUpperCase())]=d);if(!CU.isEmpty(b.dictDropMap))for(var g in b.dictDropMap)DROP[a.dictDropPrefix+g]=b.dictDropMap[g];this.el_form=CU.isObject(a.bid)?$(a.bid):$("#"+a.bid);this.el_fieldsMap={};this.getFieldId=function(h){return a.fieldIdPrefix+h};this.getDictDropName=function(h){return a.dictDropPrefix+h};this.getFieldFixProperty=function(h,k){var f=['id="'+h.fieldId+'" componentType="'+h.compType+'"'];h.isRequ&&f.push("required");CU.isEmpty(h.placehold)||f.push('placeholder="'+
h.placehold+'"');CU.isEmpty(h.pattern)||f.push('pattern="'+h.pattern+'"');CU.isEmpty(h.title)||f.push('title="'+h.title+'"');CU.isEmpty(k)||f.push('maxLength="'+k+'"');return f.join(" ")};this.getSelectOptionHtml=function(h){return CU.isEmpty(h)?"":PU.getSelectOptionsHtml(a.getDictDropName(h))};this.getSelectOptionValue=function(h,k){return CU.isEmpty(h)?"":PU.getDropValue(a.getDictDropName(h),k)};this.getRedioOptionHtml=function(h,k,f,l){if(CU.isEmpty(h.dictId))return"";var m=DROP[a.getDictDropName(h.dictId)];
if(CU.isEmpty(m))return"";CU.isEmpty(l)&&(l=1);l=parseInt(l,10);k=CU.getObjectValue(k,"attrStdCode","");for(var n=[],q=0,p=!0;q<m.length;q++){var r=m[q];CU.isEmpty(r.code)||(n.push('<label class="fancy-radio custom-color-blue '+(2!=l?"box-auto-margin":"")+'"><input name="'+h.fieldId+'" form-code="'+k+'" value="'+r.code+'" type="radio" '+(p?"checked":"")+" "+(!0===f?"disabled":"")+"><span><i></i>"+r.name+"</span></label>"),2==l&&n.push("<br>"),p&&(p=!1))}return n.join("")};this.getCheckboxOptionHtml=
function(h,k,f,l){if(CU.isEmpty(h.dictId))return"";h=DROP[a.getDictDropName(h.dictId)];if(CU.isEmpty(h))return"";CU.isEmpty(l)&&(l=1);l=parseInt(l,10);k=CU.getObjectValue(k,"attrStdCode","");for(var m=[],n=0;n<h.length;n++){var q=h[n];CU.isEmpty(q.code)||(m.push('<label class="fancy-checkbox custom-bgcolor-blue '+(2!=l?"box-auto-margin":"")+'"><input type="checkbox" form-code="'+k+'" value="'+q.code+'" '+(!0===f?"disabled":"")+"><span>"+q.name+"</span></label>"),2==l&&m.push("<br>"))}return m.join("")};
this.onSummernoteImageUpload=function(h){PU.onSummernoteUploadFiles($(this),h,a.uploadUrl,a.uploadName)};this.onSearchFieldSetParams=function(h){var k={},f=$(this).attr("dictId");k[RS.PSK]=CU.toString([1,a.searchFieldSize,f,h.term]);return k};this.onSearchFieldQueryResult=function(h){var k=[];CU.isEmpty(this.$element.attr("multiple"))&&k.push({id:0,text:"\u6e05\u7a7a"});if(!CU.isEmpty(h)&&!CU.isEmpty(h.data)){h=h.data;for(var f=0;f<h.length;f++)k.push({id:h[f].code,text:h[f].name})}return{results:k}};
this.appendEditableField=function(h,k){var f=a.attrMap[k.attrId];if(CU.isEmpty(f))return"";k.fieldId=a.getFieldId(k.attrId);CU.isEmpty(k.compType)&&(k.compType=1);k.isRequ=1===k.isRequ||"1"==k.isRequ||"true"==k.isRequ||!0===k.isRequ;CU.isEmpty(k.width)&&(k.width=1);CU.isEmpty(k.label)&&(k.label=f.attrName);CU.isEmpty(k.style)&&(k.style="");CU.isEmpty(k.fileTypeRegex)&&(k.fileTypeRegex="");k.compType=parseInt(k.compType,10);var l=a.labelWidth+a.widthUnit,m=(a.labelWidth+a.compWidth)*k.width-a.labelWidth+
a.widthUnit;0>a.compWidth&&(m="calc(100% - "+-a.compWidth+"px)");var n=1==f.attrType?"16":3==f.attrType?"60":4==f.attrType?"330":"";h.append($('<label for="'+k.fieldId+'" class="control-label pull-left form-label" style="width:'+l+';">'+k.label+(k.isRequ?'<font color="red">*</font>':"")+" </label>"));l=$('<div class="pull-left" style="width:'+m+';"></div>');h.append(l);h=null;if(1===k.compType)h=$('<input class="form-control pretty-form-field" style="width:100%;'+k.style+'"  '+a.getFieldFixProperty(k,
n)+">"),l.append(h);else if(2==k.compType)2==f.attrType||"2"==f.attrType?(CU.isEmpty(k.pattern)&&(k.pattern="[0-9]{0,16}(([.]([0-9]{1,8}))?)"),h=$('<input class="form-control pretty-form-field" style="width:100%;'+k.style+'"  '+a.getFieldFixProperty(k)+">")):(h=$('<input class="form-control pretty-form-field" style="width:100%;'+k.style+'"  '+a.getFieldFixProperty(k,n)+">"),CU.onlyInteger(h)),l.append(h);else if(3==k.compType)h=$('<select class="select-basic form-control pretty-form-field" style="width:100%;'+
k.style+'" '+a.getFieldFixProperty(k)+">"+a.getSelectOptionHtml(k.dictId)+"</select>"),l.append(h);else if(4==k.compType)h=$('<div id="'+k.fieldId+'" class="pretty-form-field" style="width:100%;line-height:34px;'+k.style+'" componentType="4" >'+a.getRedioOptionHtml(k,f,!1,k.boxDispType)+"&nbsp;</div>"),l.append(h);else if(5==k.compType)CU.isEmpty(k.selVal)&&(k.selVal=1),CU.isEmpty(k.notSelVal)&&(k.notSelVal=0),h=$('<div id="'+k.fieldId+'" class="fancy-checkbox custom-bgcolor-blue pretty-form-field" style="line-height:34px;'+
k.style+'" componentType="5" selectValue="'+k.selVal+'" noselectValue="'+k.notSelVal+'" ><label><input type="checkbox"><span></span></label></div>'),l.append(h);else if(11==k.compType||12==k.compType)h=$('<select id="'+k.fieldId+'" class="select-basic pretty-form-field" dictId="'+k.dictId+'" '+(12==k.compType?'multiple="multiple"':"")+' style="width:100%;'+k.style+'" componentType="'+k.compType+'" '+(k.isRequ?"required":"")+" "+(CU.isEmpty(k.title)?"":'title="'+k.title+'"')+"></select>"),l.append(h),
h.select2({placeholder:k.placehold,minimumInputLength:0,maximumInputLength:20,language:"zh-CN",ajax:{url:RS.getRemoteUrl({addroot:a.addroot,url:"/omdb/dict/queryDynamicDataPageList"}),dataType:"json",delay:500,data:a.onSearchFieldSetParams,processResults:a.onSearchFieldQueryResult,cache:!0,allowClear:!0}});else if(13==k.compType)h=$('<div id="'+k.fieldId+'" class="pretty-form-field" style="width:100%;line-height:34px;'+k.style+'" componentType="13" >'+a.getCheckboxOptionHtml(k,f,!1,k.boxDispType)+
"&nbsp;</div>"),l.append(h);else if(21==k.compType)h=$('<div id="'+k.fieldId+'" class="input-group date pretty-form-field" data-provide="datepicker" style="width:100%;'+k.style+'" componentType="21" ><input type="text" class="form-control" '+(k.isRequ?"required":"")+" "+(CU.isEmpty(k.title)?"":'title="'+k.title+'"')+'><span class="input-group-addon"><i class="fa fa-calendar"></i></span></div>'),l.append(h);else if(22==k.compType)h=$('<div id="'+k.fieldId+'" class="input-group basic-clockpicker pretty-form-field" style="width:100%;'+
k.style+'" componentType="22" ></div>'),f=$('<input type="text" class="form-control clockpicker" '+(k.isRequ?"required":"")+">"),h.append(f),h.append($('<span class="input-group-addon" style="cursor:pointer;"><span class="fa fa-clock-o"></span></span>')),h.clockpicker({donetext:"\u786e\u5b9a",autoclose:!0,"default":"now"}),f.bind("blur",function(){var q=$(this).val();/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])(:([0-5][0-9]))?$/.test(q)||$(this).val("")}),l.append(h);else if(23==k.compType)h=$('<div id="'+
k.fieldId+'" class="input-group pretty-form-field" style="width:100%;'+k.style+'" componentType="23" ></div>'),f=$('<input type="text" class="form-control" '+(k.isRequ?"required":"")+">"),n=$('<span class="input-group-addon" style="cursor:pointer;"><i class="fa fa-calendar"></i></span>'),h.append(f),h.append(n),f.datetimepicker($.fn.datetimepicker.defaults),n.bind("click",function(){$($($(this).parent()[0]).children()[0]).focus()}),l.append(h);else if(24==k.compType)h=$('<div id="'+k.fieldId+'" class="input-group colorpicker-component pretty-form-field" style="width:100%;'+
k.style+'" componentType="24" ><input type="text" class="form-control" '+(k.isRequ?"required":"")+'><span class="input-group-addon"><i></i></span></div>'),h.colorpicker({colorSelectors:a.colorSelectors,width:500,height:500}),l.append(h);else if(31==k.compType)CU.isEmpty(k.height)&&(k.height=100),h=$('<textarea class="form-control pretty-form-field" style="width:100%;overflow:auto;height:'+k.height+"px;"+k.style+'" '+a.getFieldFixProperty(k,n)+' componentType="31"></textarea>'),l.append(h);else if(32==
k.compType)CU.isEmpty(k.height)&&(k.height=300),h=$('<div id="'+k.fieldId+'" class="summernote pretty-form-field" style="width:100%;'+k.style+'" componentType="32" ></div>'),l.append(h);else if(41==k.compType||42==k.compType||43==k.compType||44==k.compType)f=43==k.compType||44==k.compType?"image":"file",n=41==k.compType||43==k.compType,h=k.fileTypeRegex,CU.isEmpty(h)&&"image"==f&&(h="bmp|tif|tiff|gif|jpeg|jpg|svg|png|ico"),h=new PrettyUploadField({bid:l,type:f,single:n,format:h,maxSize:k.fileMaxSize,
uploadUrl:a.uploadUrl,uploadName:a.uploadName}),h.attr("id",k.fieldId),h.attr("componentType",k.compType);else if(51==k.compType){f=["<option value=''>&nbsp;</option>"];n="";!CU.isEmpty(k.style)&&0<k.style.indexOf("ipid")&&(n=k.style.substring(k.style.indexOf("ipid")),n=n.substring(n.indexOf('"')+1),0<n.indexOf('"')&&(n=n.substring(0,n.indexOf('"'))),n=","+$.trim(n)+",");for(h=0;h<REGION_PROV_CITY.length;h++)0<=n.indexOf(","+REGION_PROV_CITY[h].id+",")||f.push("<option value='"+REGION_PROV_CITY[h].text+
"'>"+REGION_PROV_CITY[h].text+"</option>");h=$('<select class="select-basic form-control pull-left pretty-form-field" style="width:50%;'+k.style+'" '+a.getFieldFixProperty(k)+">"+f.join("")+"</select>");l.append(h);l.append($('<select class="select-basic form-control pull-left pretty-form-field" style="width:50%;'+k.style+'" '+a.getFieldFixProperty(k)+"></select>"));h.bind("change",function(){var q=$(this),p=$(q.next()),r=q.val();q=["<option value=''>&nbsp;</option>"];if(!CU.isEmpty(r))for(var t=
0;t<REGION_PROV_CITY.length;t++)if(REGION_PROV_CITY[t].text==r){r=REGION_PROV_CITY[t].children;if(!CU.isEmpty(r)){t=p.attr("cicd");CU.isEmpty(t)&&(t="");t=","+$.trim(t)+",";for(var u=0;u<r.length;u++)0<=t.indexOf(","+r[u].id+",")||q.push("<option value='"+r[u].text+"'>"+r[u].text+"</option>")}break}p.html(q.join(""))})}else console.error(" is wrong component-type '"+k.compType+"' ");a.el_fieldsMap[k.attrId]=h};this.appendReadonlyField=function(h,k){var f=a.attrMap[k.attrId];if(CU.isEmpty(f))return"";
k.fieldId=a.getFieldId(k.attrId);CU.isEmpty(k.compType)&&(k.compType=1);k.isRequ=1===k.isRequ||"1"==k.isRequ||"true"==k.isRequ||!0===k.isRequ;CU.isEmpty(k.width)&&(k.width=1);CU.isEmpty(k.label)&&(k.label=f.attrName);CU.isEmpty(k.style)&&(k.style="");k.compType=parseInt(k.compType,10);var l=a.labelWidth+a.widthUnit,m=(a.labelWidth+a.compWidth)*k.width-a.labelWidth+a.widthUnit;0>a.compWidth&&(m="calc(100% - "+-a.compWidth+"px)");var n=1==f.attrType?"16":3==f.attrType?"60":4==f.attrType?"330":"";h.append($('<label for="'+
k.fieldId+'" class="control-label pull-left form-label" style="width:'+l+';">'+k.label+(k.isRequ?'<font color="red">*</font>':"")+" </label>"));l=$('<div class="pull-left" style="width:'+m+';"></div>');h.append(l);h=null;1===k.compType||2==k.compType||3==k.compType||11==k.compType||12==k.compType||21==k.compType||22==k.compType||23==k.compType||24==k.compType||51==k.compType?(CU.isEmpty(k.dictId)&&(k.dictId=""),h=$('<input class="form-control pretty-form-field" dictId="'+k.dictId+'" style="width:100%;'+
k.style+'"  '+a.getFieldFixProperty(k,n)+" readOnly>"),l.append(h)):4==k.compType?(h=$('<div id="'+k.fieldId+'" class="pretty-form-field" style="width:100%;line-height:34px;'+k.style+'" componentType="4" >'+a.getRedioOptionHtml(k,f,!0,k.boxDispType)+"&nbsp;</div>"),l.append(h)):5==k.compType?(CU.isEmpty(k.selVal)&&(k.selVal=1),CU.isEmpty(k.notSelVal)&&(k.notSelVal=0),h=$('<div id="'+k.fieldId+'" class="fancy-checkbox custom-bgcolor-blue pretty-form-field" style="line-height:34px;'+k.style+'" componentType="5" selectValue="'+
k.selVal+'" noselectValue="'+k.notSelVal+'" ><label><input type="checkbox" '+(a.editable?"":"disabled")+"><span></span></label></div>"),l.append(h)):13==k.compType?(h=$('<div id="'+k.fieldId+'" class="pretty-form-field" style="width:100%;line-height:34px;'+k.style+'" componentType="13" >'+a.getCheckboxOptionHtml(k,f,!0,k.boxDispType)+"&nbsp;</div>"),l.append(h)):31==k.compType?(CU.isEmpty(k.height)&&(k.height=100),h=$('<textarea class="form-control pretty-form-field" style="width:100%;overflow:auto;height:'+
k.height+"px;"+k.style+'" '+a.getFieldFixProperty(k,n)+' componentType="31" readOnly></textarea>'),l.append(h)):32==k.compType?(CU.isEmpty(k.height)&&(k.height=300),h=$('<div id="'+k.fieldId+'" class="form-control pretty-form-field" style="width:'+m+";overflow:auto;height:"+k.height+"px;"+k.style+'" componentType="32" ></div>'),l.append(h)):41==k.compType||42==k.compType||43==k.compType||44==k.compType?(h=new PrettyUploadField({bid:l,type:43==k.compType||44==k.compType?"image":"file",single:41==k.compType||
43==k.compType,uploadUrl:a.uploadUrl,uploadName:a.uploadName,editable:!1}),h.attr("id",k.fieldId),h.attr("componentType",k.compType)):console.error(" is wrong component-type '"+k.compType+"' ");a.el_fieldsMap[k.attrId]=h};this.buildForm=function(){delete a.el_fieldsMap;a.el_fieldsMap={};a.el_form.html("");for(var h=a.labelWidth+a.compWidth+a.widthUnit,k={},f=0;f<a.items.length;f++){var l=a.items[f],m=l.rowNum,n=k[m];CU.isEmpty(n)&&(k[m]=n={});n[l.colNum]=l}for(f=1;f<=a.maxRowNum;f++){n=k[f];m=$('<div class="form-group"></div>');
if(CU.isEmpty(n))m.html("&nbsp;"),m.height(10);else{var q=1,p;for(p in n)p>q&&(q=p);for(var r=1;r<=q;r++)l=n[r],CU.isEmpty(l)?m.append($('<div class="pull-left" style="width:'+h+';">&nbsp;</div>')):a.editable?a.appendEditableField(m,l):a.appendReadonlyField(m,l)}a.el_form.append(m)}h=a.el_form.find(".summernote");!CU.isEmpty(h)&&0<h.length&&h.summernote({height:l.height,focus:!1,lang:"zh-CN",callbacks:{onImageUpload:a.onSummernoteImageUpload}})};this.lazyBuild||this.buildForm();this.getFormWidth=
function(){return a.formWidth};this.getFieldValue=function(h){var k="",f=parseInt(h.attr("componentType"),10);if(1===f||2==f||3==f||31==f)k=h.val();else if(4==f||13==f){h=h.find("input");f=[];for(var l=0;l<h.length;l++)k=$(h[l]),k.is(":checked")&&f.push(k.attr("value"));k=f.join(",")}else 5==f?(k=$(h.find("input")[0]),k=k.is(":checked")?h.attr("selectValue"):h.attr("noselectValue")):11==f||12==f?(k=h.val(),CU.isArray(k)&&(k=k.join(","))):21==f||22==f||23==f||24==f?(k=$(h.find("input")[0]).val(),CU.isEmpty(k)||
22!=f||(k=CU.toNumberTime(k),k=k.substring(0,2)+":"+k.substring(2,4)+":"+k.substring(4,6))):32==f?k=h.summernote("code"):41==f||42==f||43==f||44==f?k=CU.toString(h.getValue()):51==f&&(k=h.val(),CU.isEmpty(k)||(h=$(h.next()).val(),CU.isEmpty(h)||(k+=","+h)));return k};this.setFieldValue=function(h,k,f){CU.isEmpty(k)&&(k="");var l=parseInt(h.attr("componentType"),10);if(1===l||2==l||31==l)h.val(k);else if(3==l)a.editable?h.val(k):(k=a.getSelectOptionValue(h.attr("dictId"),k),h.val(k));else if(4==l||
13==l){if(!CU.isEmpty(k))for(k=","+k+",",h=h.find("input"),f=0;f<h.length;f++){l=$(h[f]);var m=","+l.attr("value")+",";l.prop("checked",0<=k.indexOf(m))}}else if(5==l)l=$(h.find("input")[0]),l.prop("checked",k+""==h.attr("selectValue")+"");else if(11==l||12==l){if(m=h.attr("dictId"),l=f[parseInt(m,10)],!(CU.isEmpty(k)||CU.isEmpty(f)||CU.isEmpty(m)||CU.isEmpty(l))){m=[];k=k.split(",");for(f=0;f<k.length;f++){var n=l[k[f]];CU.isEmpty(n)||(a.editable?m.push("<option selected value='"+n.code+"'>"+n.name+
"</option>"):m.push(n.name))}a.editable?h.html(m.join("")):h.val(m.join(","))}}else 21==l||22==l||23==l||24==l?a.editable?$(h.find("input")[0]).val(k):h.val(k):32==l?a.editable?h.summernote("code",k):h.html(k):41==l||42==l||43==l||44==l?!CU.isEmpty(k)&&2<=k.length&&"["==k.substring(0,1)&&"]"==k.substring(k.length-1)&&(k=CU.toObject(k),h.setValue(k)):51==l&&(a.editable?(f=$(h.next()),h.val(""),f.val(""),CU.isEmpty(k)||(m=k.indexOf(","),l=0<=m?k.substring(0,m):k,k=0<=m?k.substring(m+1):"",h.val(l),
h.change(),f.val(k))):h.val(k))};this.clearFieldValue=function(h){var k=parseInt(h.attr("componentType"),10);if(1===k||2==k||3==k||31==k)h.val("");else if(4==k||13==k){h=h.find("input");for(var f=0;f<h.length;f++){var l=$(h[f]);l.prop("checked",0===f&&4==k)}}else 5==k?(l=$(h.find("input")[0]),l.prop("checked",!1)):11==k||12==k?a.editable?h.html(""):h.val(""):21==k||22==k||23==k||24==k?a.editable?$(h.find("input")[0]).val(""):h.val(""):32==k?a.editable?h.summernote("code",""):h.html(""):41==k||42==
k||43==k||44==k?h.clearValue():51==k&&(k=$(h.next()),h.val(""),k.val(""))};this.getFormData=function(h){CU.isEmpty(h)&&(h=1);var k={},f;for(f in a.el_fieldsMap){var l=a.attrMap[f],m=a.el_fieldsMap[f];CU.isEmpty(l)||CU.isEmpty(m)||(l=1===h||"1"==h?l.attrCode:l.id,m=a.getFieldValue(m),null!==m&&void 0!==m&&(k[l]=m))}return k};this.setFormData=function(h,k,f){if(!CU.isEmpty(h)){CU.isEmpty(k)&&(k=1);var l=[];for(r in h)if(!CU.isEmpty(r)){var m=h[r],n=null;n=1===k||"1"==k?a.attrCodeMap[$.trim(r).toUpperCase()]:
a.attrMap[parseInt(r,10)];if(!CU.isEmpty(n)){var q=a.el_fieldsMap[n.id];if(!CU.isEmpty(q)){var p=parseInt(q.attr("componentType"),10);11==p||12==p?CU.isEmpty(m)||CU.isEmpty(q.attr("dictId"))||l.push({a:n,f:q,v:m}):a.setFieldValue(q,m)}}}if(0<l.length){h={};for(k=0;k<l.length;k++){var r=l[k].f.attr("dictId");m=l[k].v;n=h[r];n=CU.isEmpty(n)?m:n+(","+m);h[r]=n}RS.ajax({addroot:a.addroot,url:"/omdb/dict/queryDynamicDataByCodeBatch",ps:[h],cb:function(t){if(!CU.isEmpty(t))for(var u=0;u<l.length;u++)a.setFieldValue(l[u].f,
l[u].v,t);CU.isFunction(f)&&f()}})}else CU.isFunction(f)&&f()}};this.clearFormData=function(){for(var h in a.el_fieldsMap){var k=a.el_fieldsMap[h];CU.isEmpty(k)||a.clearFieldValue(k)}}}
function PrettyOmForm(b){if(CU.isEmpty(b))throw" the config is empty argument! ";if(CU.isEmpty(b.bid))throw" the config.bid is empty argument! ";if(CU.isEmpty(b.record))throw" the config.record is empty argument! ";if(CU.isEmpty(b.form))throw" the config.form is empty argument! ";var a=this;$.extend(a,{editable:!0,items:[],attrs:[],dictMap:{},dictDropPrefix:"OMV_DICT_DROP_"},b);this.attrMap={};this.inputFixAttrNamed={maxLength:"inputMaxlength",required:"isRequ",placeholder:"placehold",pattern:"pattern",
title:"inputTitle",selectValue:"selVal",noselectValue:"notSelVal"};"string"==typeof this.bid?this.el_base=$("#"+this.bid):(this.el_base=$(this.bid),this.bid=this.el_base.attr("id"),CU.isEmpty(this.bid)&&(this.bid="PrettyOmForm_"+CU.getId()));this.filterNull=function(c,d){CU.isEmpty(c)?c="":!0===d&&(c=c.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"));return c};this.getDictDropName=function(c){return a.dictDropPrefix+c};this.getSelectOptionHtml=function(c){return CU.isEmpty(c)?"":PU.getSelectOptionsHtml(a.getDictDropName(c))};
this.getSelectOptionValue=function(c,d){return CU.isEmpty(c)?"":PU.getDropValue(a.getDictDropName(c),d)};this.getRedioOptionHtml=function(c,d,g,h,k){if(CU.isEmpty(c.dictId))return"";var f=DROP[a.getDictDropName(c.dictId)];if(CU.isEmpty(f))return"";CU.isEmpty(h)&&(h=1);h=parseInt(h,10);d=CU.getObjectValue(d,"attrStdCode","");var l=[];c="formField_"+c.attrId;CU.isEmpty(k)&&(k="");for(var m=0,n=!0;m<f.length;m++){var q=f[m];CU.isEmpty(q.code)||1!=q.status||1!=q.isDisp||(l.push('<label class="fancy-radio custom-color-blue '+
(1==h?"box-auto-margin":"")+'" style="margin-bottom:10px;"><input name="',c,'" form-code="',d,'" value="',q.code,'" type="radio" class="form-input" form-input-type="4" '+(n?"checked":"")+" "+(!0===g?"disabled":"")+' style="',k,'"><span><i></i>'+q.name+"</span></label>"),2==h&&l.push("<br>"),n&&(n=!1))}return l.join("")};this.getCheckboxOptionHtml=function(c,d,g,h,k){if(CU.isEmpty(c.dictId))return"";var f=DROP[a.getDictDropName(c.dictId)];if(CU.isEmpty(f))return"";CU.isEmpty(h)&&(h=1);h=parseInt(h,
10);d=CU.getObjectValue(d,"attrStdCode","");var l=[];c="formField_"+c.attrId;CU.isEmpty(k)&&(k="");for(var m=0;m<f.length;m++){var n=f[m];CU.isEmpty(n.code)||1!=n.status||1!=n.isDisp||(l.push('<label class="fancy-checkbox custom-bgcolor-blue '+(1==h?"box-auto-margin":"")+'" style="margin-bottom:10px;"><input name="',c,'" form-code="',d,'" value="',n.code,'" type="checkbox" class="form-input" form-input-type="13" '+(!0===g?"disabled":"")+' style="',k,'"><span>'+n.name+"</span></label>"),2==h&&l.push("<br>"))}return l.join("")};
this.getProvinceOptionHtml=function(){for(var c=['<option value="">&nbsp;</option>'],d=0;d<REGION_PROV_CITY.length;d++){var g=REGION_PROV_CITY[d].n;c.push('<option value="',g,'">',g,"</option>")}return c.join("")};this.getCityOptionHtml=function(c){for(var d=['<option value="">&nbsp;</option>'],g=0;g<REGION_PROV_CITY.length;g++)if(REGION_PROV_CITY[g].n==c){c=REGION_PROV_CITY[g].cs;if(!CU.isEmpty(c))for(g=0;g<c.length;g++)d.push('<option value="',c[g],'">',c[g],"</option>");break}return d.join("")};
this.getInputAttrs=function(c){var d=[],g;for(g in a.inputFixAttrNamed){var h=c[a.inputFixAttrNamed[g]];CU.isEmpty(h)||("required"==g?(1==h||"1"==h)&&d.push(g):d.push(g+'="'+h+'"'))}return d.join(" ")};this.getInputEditHtml=function(c,d,g){var h=[],k="formField_"+c.attrId,f=a.mergeStyle(c.inputStyle,d.inputStyle),l=a.getInputAttrs(c),m=c.inputType+"",n=c.boxDispType;if(CU.isEmpty(n)||0==n||"0"==n)n=d.boxDispType;CU.isEmpty(c.selVal)&&(c.selVal="");CU.isEmpty(c.notSelVal)&&(c.notSelVal="");d=CU.getObjectValue(g,
"attrStdCode","");switch(m){case "1":h.push('<input type="text" name="',k,'" form-code="',d,'" class="form-control form-input" form-input-type="1" style="',f,'" ',l,">");break;case "2":h.push('<input type="number" name="',k,'" form-code="',d,'" class="form-control form-input" form-input-type="2" style="',f,'" ',l,">");break;case "3":h.push('<select name="',k,'" form-code="',d,'" class="select-basic form-control form-input" form-input-type="3" style="',f,'" ',l,">",a.getSelectOptionHtml(c.dictId),
"</select>");break;case "4":h.push(a.getRedioOptionHtml(c,g,!1,n,f));break;case "5":h.push('<div class="fancy-checkbox custom-bgcolor-blue"><label><input type="checkbox" class="form-input" form-input-type="5" name="',k,'" form-code="',d,'" style="',f,'" selectValue="'+c.selVal+'" noselectValue="'+c.notSelVal+'"><span></span></label></div>');break;case "13":h.push(a.getCheckboxOptionHtml(c,g,!1,n,f));break;case "21":h.push('<div class="input-group date" data-provide="datepicker">','<input type="text" class="form-control form-input" form-input-type="21" name="',
k,'" form-code="',d,'" style="',f,'" ',l,">",'<span class="input-group-addon"><i class="fa fa-calendar"></i></span>',"</div>");break;case "22":h.push('<div class="input-group basic-clockpicker form-provider-clockpicker">','<input type="text" class="form-control clockpicker form-input" form-input-type="22" name="',k,'" form-code="',d,'" style="',f,'" ',l,">",'<span class="input-group-addon" style="cursor:pointer;"><i class="fa fa-clock-o"></i></span>',"</div>");break;case "23":h.push('<div class="input-group datetime form-provider-datetimepicker" >',
'<input type="text" class="form-control form-input" form-input-type="23" name="',k,'" form-code="',d,'" style="',f,'" ',l,">",'<span class="input-group-addon form-provider-datetimepicker-icon" style="cursor:pointer;"><i class="fa fa-calendar"></i></span>',"</div>");break;case "31":h.push('<textarea class="form-control form-input" form-input-type="31" maxLength="300" name="',k,'" form-code="',d,'" style="',f,'" ',l,"></textarea>");break;case "51":h.push('<select type="text" name="',k,'" form-code="',
d,'" class="form-control pull-left form-input form-provider-province" form-input-type="51" style="',f,';width:50%;" ',l,">",a.getProvinceOptionHtml(),'</select><select type="text" name="',k,'" form-code="',d,'" class="form-control  pull-left form-input" form-input-type="51" style="',f,';width:50%;" ',l,"></select>");break;case "61":h.push('<input type="text" name="',k,'" form-code="',d,'" class="form-control form-input form-number-3bit" form-input-type="61" style="',f,'" ',l,">")}return h.join("")};
this.getDisabledEditHtml=function(c,d,g){var h=[],k="formField_"+c.attrId,f=a.mergeStyle(c.inputStyle,d.inputStyle),l=a.getInputAttrs(c),m=c.inputType+"",n=c.boxDispType;if(CU.isEmpty(n)||0==n||"0"==n)n=d.boxDispType;CU.isEmpty(c.selVal)&&(c.selVal="");CU.isEmpty(c.notSelVal)&&(c.notSelVal="");switch(m){case "1":h.push('<input type="text" name="',k,'" class="form-control form-input" form-input-type="1" style="',f,'" ',l," readOnly>");break;case "2":h.push('<input type="number" name="',k,'" class="form-control form-input" form-input-type="2" style="',
f,'" ',l," readOnly>");break;case "3":h.push('<input type="text" name="',k,'" class="form-control form-input" form-input-type="3" dictId="',c.dictId,'" style="',f,'" ',l," readOnly>");break;case "4":h.push(a.getRedioOptionHtml(c,g,!0,n,f));break;case "5":h.push('<div class="fancy-checkbox custom-bgcolor-blue"><label><input type="checkbox" class="form-input" form-input-type="5" name="',k,'" style="',f,'" selectValue="'+c.selVal+'" noselectValue="'+c.notSelVal+'" disabled><span></span></label></div>');
break;case "13":h.push(a.getCheckboxOptionHtml(c,g,!0,n,f));break;case "21":h.push('<input type="text" name="',k,'" class="form-control form-input" form-input-type="21" style="',f,'" ',l," readOnly>");break;case "22":h.push('<input type="text" name="',k,'" class="form-control form-input" form-input-type="22" style="',f,'" ',l," readOnly>");break;case "23":h.push('<input type="text" name="',k,'" class="form-control form-input" form-input-type="23" style="',f,'" ',l," readOnly>");break;case "31":h.push('<textarea class="form-control form-input" form-input-type="31" maxLength="300" name="',
k,'" style="',f,'" ',l," readOnly></textarea>");break;case "51":h.push('<input type="text" name="',k,'" class="form-control form-input" form-input-type="51" style="',f,'" ',l," readOnly>");break;case "61":h.push('<input type="text" name="',k,'" class="form-control form-input form-number-3bit" form-input-type="61" style="',f,'" ',l," readOnly>")}return h.join("")};this.render=function(){if(!CU.isEmpty(a.items)&&!CU.isEmpty(a.attrs)){for(var c=[],d=0;d<a.items.length;d++){var g=a.items[d],h=a.attrMap[g.attrId+
""],k=a.mergeStyle(g.labelStyle,a.form.labelStyle),f=a.mergeStyle(g.remarkStyle,a.form.remarkStyle),l=a.mergeStyle(g.inputParentStyle,a.form.inputParentStyle),m=a.mergeStyle(g.formItemStyle,a.form.formItemStyle),n=a.getLabelPost(g,a.form),q=CU.getObjectValue(h,"attrStdCode");c.push('<div class="form-group om-form-group" itemType="',g.itemType,'" style="',m,'">');1==g.itemType?(m=g.inputType,c.push('<label class="control-label om-form-label-name',2==n?" pull-left lw120":"",'" style="',k,'">',1==g.isRequ?
'<font color="red">*</font>':"",a.filterNull(g.labelName,!0),"</label>"),1!=n||CU.isEmpty(g.remarkName)||c.push('<label class="control-label om-form-label-remark" style="',f,'">',a.filterNull(g.remarkName),"</label>"),c.push('<div class="om-form-input-container',2==n?" pull-left":"",'" style="',4==m||5==m||13==m?"padding-top:5px;min-height:32px;":"",l,'">'),a.editable&&1!=g.isReadonly&&(CU.isEmpty(a.disableFields)||CU.isEmpty(q)||0>a.disableFields.indexOf(q))?c.push(a.getInputEditHtml(g,a.form,h)):
c.push(a.getDisabledEditHtml(g,a.form,h)),c.push("</div>"),2!=n||CU.isEmpty(g.remarkName)||c.push('<label class="control-label om-form-label-remark" style="',f,'">',a.filterNull(g.remarkName),"</label>")):2==g.itemType&&c.push(g.textCont);c.push("</div>")}a.el_base.html(c.join(""));if(a.editable){a.el_base.find(".form-provider-clockpicker").clockpicker({donetext:"\u786e\u5b9a",autoclose:!0,"default":"now"});a.el_base.find("input[form-input-type='22']").bind("blur",function(){var p=$(this).val();/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])(:([0-5][0-9]))?$/.test(p)||
$(this).val("")});c=a.el_base.find("input[form-input-type='23']");if(!CU.isEmpty(c)&&0<c.length)for(d=0;d<c.length;d++)g=$(c[d]),g.prop("readOnly")||g.prop("disabled")||g.datetimepicker($.fn.datetimepicker.defaults);a.el_base.find(".form-provider-datetimepicker-icon").bind("click",function(){$($($(this).parent()[0]).children()[0]).focus()});a.el_base.find(".form-provider-province").bind("change",function(){var p=$(this),r=p.val(),t="";CU.isEmpty(r)||(t=a.getCityOptionHtml(r));$(p.next()).html(t)});
a.el_base.find("input[form-input-type='61']").bind("keyup",function(p){a.format3BitNumberField(this)});a.el_base.find("input[form-input-type='61']").bind("keypress",function(p){p=p.keyCode||p.which;return 48<=p&&57>=p});a.el_base.find("input[form-input-type='61']").bind("input",function(p){a.format3BitNumberField(this)});a.el_base.find("input[form-input-type='61']").bind("paste",function(p){var r=this;setTimeout(function(){a.format3BitNumberField(r)},100)})}}};this.setFormItems=function(c){a.items=
c};this.setClassAttrs=function(c){a.attrs=c;a.attrMap={};if(!CU.isEmpty(c))for(var d=0;d<c.length;d++)a.attrMap[c[d].id+""]=c[d]};this.setDictMap=function(c){a.dictMap=c;if(!CU.isEmpty(a.dictMap))for(var d in a.dictMap)DROP[a.dictDropPrefix+d]=a.dictMap[d]};this.format3BitNumberField=function(c){CU.format3BitNumberField(c)};this.to3BitNumberFormat=function(c){return CU.to3BitNumberFormat(c)};this.getLabelPost=function(c,d){var g=1;if(CU.isEmpty(c)||CU.isEmpty(g=c.labelPost)||0==g)if(!CU.isEmpty(d)&&
!CU.isEmpty(d.labelPost)&&0<d.labelPost&&(g=d.labelPost),CU.isEmpty(g)||0==g)g=1;return g};this.mergeStyle=function(c,d){d=CU.parseStyle2Object(d);c=CU.parseStyle2Object(c);$.extend(d,c);return CU.parseObject2Style(d)};this.getInputDemoHtml=function(c,d){var g=[],h="formField_"+c.attrId,k=a.mergeStyle(c.inputStyle,d.inputStyle),f=a.mergeStyle(c.inputParentStyle,d.inputParentStyle);d=1==a.getLabelPost(c,d)?"":"pull-left";switch(c.inputType+""){case "1":case "2":case "61":g.push('<div class="',d,'" style="',
f,'"><input type="text" name="',h,'" class="form-control" style="',k,'" ></div>');break;case "3":g.push('<div class="',d,'" style="',f,'"><select name="',h,'" class="select-basic form-control" style="',k,'" ></select></div>');break;case "4":g.push('<div class="',d,'" style="padding-top:5px;',f,'"><label class="fancy-radio custom-color-blue" style="margin-bottom:10px;"><input type="radio" name="',h,'" style="',k,'"><span><i></i></span></label></div>');break;case "5":case "13":g.push('<div class="',
d,'" style="padding-top:5px;',f,'"><div class="fancy-checkbox custom-bgcolor-blue" style="margin-bottom:10px;"><label><input type="checkbox" name="',h,'" style="',k,'"><span></span></label></div></div>');break;case "21":case "22":case "23":g.push('<div class="',d,'" style="',f,'"><div class="input-group date" data-provide="datepicker"><input type="text" class="form-control" name="',h,'" style="z-index:0;',k,'"><span class="input-group-addon"><i class="fa fa-calendar"></i></span></div></div>');break;
case "31":g.push('<div class="',d,'" style="',f,'"><textarea class="form-control" maxLength="300" name="',h,'" style="',k,'"></textarea></div>');break;case "51":g.push('<div class="',d,'" style="',f,'"><select type="text" name="',h,'" class="form-control pull-left" style="',k,';width:50%;" ></select><select type="text" name="',h,'" class="form-control  pull-left" style="',k,';width:50%;" ></select></div>')}return g.join("")};this.getRadioValue=function(c){for(var d=0;d<c.length;d++){var g=c[d];if(g.is(":checked"))return g.val()}return""};
this.setRadioValue=function(c,d){for(var g=!1,h=0;h<c.length;h++){var k=c[h];g||k.val()!=d?k.prop("checked",!1):(k.prop("checked",!0),g=!0)}!g&&!CU.isEmpty(c)&&0<c.length&&c[0].prop("checked",!0);return""};this.getCheckboxValue=function(c){c.is(":checked")?(c=c.attr("selectValue"),CU.isEmpty(c)&&(c="1")):(c=c.attr("noselectValue"),CU.isEmpty(c)&&(c="0"));return c};this.setCheckboxValue=function(c,d){CU.isEmpty(d)&&(d="");var g=c.attr("selectValue");!CU.isEmpty(g)&&g==d||CU.isEmpty(g)&&("1"==d||1==
d)?c.prop("checked",!0):c.prop("checked",!1)};this.getCheckboxGroupValue=function(c){for(var d=[],g=0;g<c.length;g++){var h=c[g];h.is(":checked")&&(h=h.val(),CU.isEmpty(h)||d.push(h))}return d.join(",")};this.setCheckboxGroupValue=function(c,d){d=","+d+",";for(var g=0;g<c.length;g++){var h=c[g],k=h.val();!CU.isEmpty(k)&&0<=d.indexOf(","+k+",")?h.prop("checked",!0):h.prop("checked",!1)}};this.getRegionValue=function(c){var d=c[0].val();1<c.length&&(c=c[1].val(),CU.isEmpty(c)||(d+=","+c));return d};
this.setRegionValue=function(c,d){var g="",h="";CU.isEmpty(d)||(g=d,d=g.indexOf(","),0<d&&(h=g.substring(d+1),g=g.substring(0,d)));c[0].val(g);c[0].change();c[1].val(h)};this.getFieldValue=function(c,d){var g="";c+="";a.editable?"1"==c||"2"==c||"3"==c||"21"==c||"22"==c||"23"==c||"24"==c||"31"==c?g=d[0].val():"4"==c?g=a.getRadioValue(d):"5"==c?g=a.getCheckboxValue(d[0]):"13"==c?g=a.getCheckboxGroupValue(d):"51"==c?g=a.getRegionValue(d):"61"==c&&(g=d[0].val().replace(/,/g,"")):"1"==c||"2"==c||"21"==
c||"22"==c||"23"==c||"24"==c||"31"==c||"51"==c?g=d[0].val():"3"==c?g=d[0].attr("data-value"):"4"==c?g=a.getRadioValue(d):"5"==c?g=a.getCheckboxValue(d[0]):"13"==c?g=a.getCheckboxGroupValue(d):"61"==c&&(g=d[0].val().replace(/,/g,""));return g};this.setFieldValue=function(c,d,g){CU.isEmpty(g)&&(g="");c+="";a.editable?"1"==c||"2"==c||"3"==c||"21"==c||"22"==c||"23"==c||"24"==c||"31"==c?d[0].val(g):"4"==c?a.setRadioValue(d,g):"5"==c?a.setCheckboxValue(d[0],g):"13"==c?a.setCheckboxGroupValue(d,g):"51"==
c?a.setRegionValue(d,g):"61"==c&&(c=a.to3BitNumberFormat(g),d[0].val(c)):"1"==c||"2"==c||"21"==c||"22"==c||"23"==c||"24"==c||"31"==c||"51"==c?d[0].val(g):"3"==c?(d[0].attr("data-value",""),d[0].val(""),CU.isEmpty(g)||(c=d[0].attr("dictId"),c=a.getSelectOptionValue(c,g),CU.isEmpty(c)||(d[0].attr("data-value",g),d[0].val(c)))):"4"==c?a.setRadioValue(d,g):"5"==c?a.setCheckboxValue(d[0],g):"13"==c?a.setCheckboxGroupValue(d,g):"61"==c&&(c=a.to3BitNumberFormat(g),d[0].val(c));return g};this.getFormFields=
function(){var c=a.el_base.find(".form-input"),d={};if(!CU.isEmpty(c)&&0<c.length)for(var g=0;g<c.length;g++){var h=$(c[g]),k=h.attr("name");k=h.attr("form-input-type")+","+k;var f=d[k];CU.isEmpty(f)&&(f=[],d[k]=f);f.push($(h))}return d};this.getFormData=function(c){CU.isEmpty(c)&&(c=1);var d={},g=a.getFormFields(),h;for(h in g){var k=g[h],f=h.indexOf(","),l=h.substring(0,f);f=h.substring(f+1);f=f.substring(f.lastIndexOf("_")+1);f=a.attrMap[f];CU.isEmpty(f)||(f=1===c||"1"==c?f.attrStdCode:f.id,k=
a.getFieldValue(l,k),null!==k&&void 0!==k&&(d[f]=k))}return d};this.setFormData=function(c,d){CU.isEmpty(d)&&(d=1);CU.isEmpty(c)&&(c={});var g=a.getFormFields(),h;for(h in g){var k=g[h],f=h.indexOf(","),l=h.substring(0,f);f=h.substring(f+1);f=f.substring(f.lastIndexOf("_")+1);f=a.attrMap[f];CU.isEmpty(f)||a.setFieldValue(l,k,c[1===d||"1"==d?f.attrStdCode:f.id])}};this.clearFormData=function(){a.setFormData(1,null)};a.setClassAttrs(a.attrs);a.setDictMap(a.dictMap);a.render()}
function PrettyForm(b){if(CU.isEmpty(b))throw" the config is empty argument! ";if(CU.isEmpty(b.bid))throw" the config.bid is empty argument! ";var a=this;$.extend(a,{key:"id",autoSubmit:!0,submitDataLevel:!1,submitSuccessMsg:!0},b);this.dom=CU.clearlyElement(b.bid);this.form=null;this.recordId="";"form"==this.dom[0].tagName.toLowerCase()?this.form=this.dom:(b=this.dom.find("form"),!CU.isEmpty(b)&&0<b.length&&(this.form=$(b[0])));this.setRecordId=function(c){a.recordId=c};this.getRecordId=function(){return a.recordId};
this.getLoading=function(){CU.isEmpty(a.loading)&&(a.loading=a.dom.find("button"));return a.loading};this.getData=function(c,d,g,h){CU.isEmpty(h)&&(h=a.tags);CU.isEmpty(c)&&(c=a.ignoreNull);CU.isEmpty(d)&&(d=a.prefix);CU.isEmpty(g)&&(g=a.batchFields);return PU.getFormData(a.dom,h,c,d,g)};this.setFixData=function(c,d,g){a.setData(c,!0,d,g)};this.setData=function(c,d,g,h){CU.isEmpty(h)&&(h=a.tags);CU.isEmpty(d)&&(d=a.ignoreNull);CU.isEmpty(g)&&(g=a.prefix);PU.setFormData(c,a.dom,h,d,g)};this.clearData=
function(c,d){CU.isEmpty(d)&&(d=a.tags);CU.isEmpty(c)&&(c=a.prefix);PU.clearFormData(a.dom,d,c);a.recordId=""};this.setFixView=function(c,d,g){a.setView(c,!0,d,g)};this.setView=function(c,d,g,h){PU.setPageData(c,a.dom,g,h,d)};this.load=function(c){CU.isEmpty(c)&&(c={});var d=$.extend({addroot:a.addroot,act:a.act,url:a.loadUrl,loading:a.getLoading(),tags:a.tags,ignoreNull:a.ignoreNull,prefix:a.prefix},c);if(CU.isEmpty(d.ps)){if(CU.isEmpty(a.recordId))return;var g={};g[a.key]=a.recordId;d.ps=g}RS.ajax({addroot:d.addroot,
act:d.act,url:d.url,ps:d.ps,loading:d.loading,cb:function(h){if(CU.isFunction(c.cb)){var k=c.cb(h,a);if(!1===k)return;CU.isObject(k)&&(h=k)}a.setData(h,d.ignoreNull,d.prefix,d.tags)},errcb:c.errcb})};this.submit=function(c){CU.isEmpty(c)&&(c={});var d=$.extend({addroot:a.addroot,act:a.act,url:a.submitUrl,loading:a.getLoading(),submitDataLevel:a.submitDataLevel,submitSuccessMsg:a.submitSuccessMsg,tags:a.tags,ignoreNull:a.ignoreNull,prefix:a.prefix,batchFields:a.batchFields,before:a.beforeSubmit},c),
g=a.getData(d.ignoreNull,d.prefix,d.batchFields,d.tags),h=a.getRecordId();CU.isEmpty(h)||(g[a.key]=h);g=a.resetSubmitDataLevel(g,d.submitDataLevel);if(CU.isFunction(d.before)){h=d.before(g,a);if(!1===h)return;CU.isObject(h)&&(g=h)}RS.ajax({addroot:d.addroot,act:d.act,url:d.url,ps:g,loading:d.loading,cb:function(k){var f=c.cb;CU.isEmpty(f)&&(f=a.afterSubmit);if(CU.isFunction(f)){f=f(k,a);if(!1===f)return;!0===f||CU.isEmpty(f)||(k=f)}a.setRecordId(k);k=a.getSubmitSuccessMsg(d.submitSuccessMsg,g);!1!==
k&&(!0===k&&(k="\u4fdd\u5b58\u6210\u529f."),CC.showTip({type:"success",msg:k}))},errcb:c.errcb})};this.getSubmitSuccessMsg=function(c,d){return c};this.resetSubmitDataLevel=function(c,d){var g=null;"string"==typeof d?g=CU.trim(d):CU.isTrue(d)&&(g="record");CU.isEmpty(g)||(d={},d[g]=c,c=d);return c};this.autoSubmit&&!CU.isEmpty(this.form)&&this.form.submit(function(c){c.preventDefault();a.submit()})};var DATA_TABLE_LANGUAGE={decimal:"",emptyTable:"\u672a\u67e5\u8be2\u5230\u6570\u636e",info:"Showing _START_ to _END_ of _TOTAL_ entries",infoEmpty:"Showing 0 to 0 of 0 entries",infoFiltered:"(filtered from _MAX_ total entries)",infoPostFix:"",thousands:",",lengthMenu:"\u6bcf\u9875 _MENU_ \u6761&nbsp;&nbsp;&nbsp;&nbsp;\u5171 <span name='DATATABLE_TOTALROWS'>0</span> \u6761\u8bb0\u5f55",loadingRecords:"Loading...",processing:"\u641c\u7d22\u4e2d, \u8bf7\u7a0d\u5019...",search:"\u641c\u7d22:",zeroRecords:"No matching records found",
paginate:{first:"\u9996\u9875",next:"\u4e0b\u4e00\u9875",previous:"\u4e0a\u4e00\u9875",last:"\u5c3e\u9875"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}},PrettyDataTable_DefaultRenderer=function(b,a,c,d){if(!CU.isEmpty(b)){a=d.settings.aoColumns[d.col];if(!CU.isEmpty(a)&&!CU.isEmpty(a.view)){b+="";if(0<=b.indexOf(",")){c=[];b=b.split(",");for(d=0;d<b.length;d++){var g=b[d];CU.isEmpty(g)||(g=PU.getDropValue(a.view,g,a.colorable),CU.isEmpty(g)||
c.push(g))}return c.join(",")}return PU.getDropValue(a.view,b,a.colorable)}return b}},PrettyDataTable_Omdb_getParams=function(b,a,c,d,g,h){CU.isEmpty(c)&&(c={});1===h.modelType||"1"==h.modelType?c.classId=h.modelId:c.viewId=h.modelId;CU.isEmpty(h.formId)||(c.formId=h.formId);d=c.searchFieldFuzzy;c.searchFieldFuzzy=null;return{pageNum:b,pageSize:a,fuzzy:d,cdt:c}};
function PrettyDataTable(b){if(CU.isEmpty(b))throw" the config is empty argument! ";if(CU.isEmpty(b.bid))throw" the config.bid is empty argument! ";if(CU.isEmpty(b.url))throw" the config.url is empty argument! ";if(CU.isEmpty(b.columns))throw" the config.columns is empty argument! ";var a=this;b=$.extend({language:DATA_TABLE_LANGUAGE,dom:"ftrlp",pageLength:50,lengthMenu:[10,20,30,40,50,60,70,80,90,100],pagingType:"full_numbers",searching:!1,serverSide:!0,colReorder:!0,pageNum:1,paging:!0,passage:!1,
processing:!0,ordering:!1,order:[],searchFieldWidth:250,showCheckbox:!1,keepCheckbox:!0,dataIdField:"id",classifyUpload:!0},b);"passage"==b.paging&&(b.paging=!0,b.passage=!0);$.extend(a,b);this.conditions=[];this.columnLine=!0===b.columnLine||1===b.columnLine||"1"==b.columnLine;this.showColumnMenus=!1!==b.showColumnMenus;this.showSearchBox=!1!==b.showSearchBox;this.showSearchFilter=!1!==b.showSearchFilter;this.singleSelect=!0===b.singleSelect;this.enumCdtwinMaxHeight=CU.isEmpty(b.enumCdtwinMaxHeight)?
400:b.enumCdtwinMaxHeight;this.pageNum=1;this.pageSize=this.pageLength;this.totalRows=0;"string"==typeof this.bid?this.el_base=$("#"+this.bid):(this.el_base=$(this.bid),this.bid=this.el_base.attr("id"),CU.isEmpty(this.bid)&&(this.bid="PrettyDataTable_"+CU.getId()));this.setTableSettings=function(){for(var f="TANNUX_TABLE_SETTINGS_"+MENU.id+"_"+a.bid,l=["#"],m=0;m<a.columns.length;m++)a.dataTable.DataTable().column(m).visible()&&l.push(m,"#");l=l.join("");window.localStorage.setItem(f,l)};this.getTableSettings=
function(){return window.localStorage.getItem("TANNUX_TABLE_SETTINGS_"+MENU.id+"_"+a.bid)};this.getDataIdValue=function(f){return CU.isFunction(a.dataIdField)?a.dataIdField(f):f[a.dataIdField]};this.parseColumnFormatValue=function(f,l){if(!CU.isEmpty(f)&&!CU.isEmpty(f)&&!CU.isEmpty(l.format))if("byte"==l.format)f=CU.toByteUnit(f);else if("time"==l.format)f=CU.toTimeUnit(f);else if("date"==l.format)f=CU.toStringDate(f);else if("datetime"==l.format)f=CU.toStringDateTime(f);else if("f2"==l.format)f=
(parseFloat(f)/100).toFixed(2);else if("f4"==l.format)f=(parseFloat(f)/1E4).toFixed(4);else if("3num"==l.format)f=CU.to3BitNumberFormat(f);else if("enum"==l.format||"dict"==l.format)CU.isEmpty(l.view)||(f=PU.getDropValue(l.view,f,!0));if(!(CU.isEmpty(f)||CU.isEmpty(l.prefix)&&CU.isEmpty(l.suffix)))if("$sign"==l.prefix||"$sign"==l.suffix){var m=parseFloat(f);CU.isEmpty(l.prefix)||(f=(0<m?"+ ":0>m?"- ":"")+f);CU.isEmpty(l.suffix)||(f+=0<m?" +":0>m?" -":"")}else CU.isEmpty(l.prefix)||(f=l.prefix+f),
CU.isEmpty(l.suffix)||(f+=l.suffix);CU.isEmpty(f)||CU.isEmpty(l.color)&&CU.isEmpty(l.style)||(m=CU.isEmpty(l.style)?"":CU.trim(l.style+""),CU.isEmpty(l.color)||(m+=(0<m.length&&0>m.endsWith(";")?";":"")+"color:"+l.color+";"),f="<span style='"+m+"'>"+f+"</span>");return f};this.defaultRender=function(f,l,m,n){if(!CU.isEmpty(f)&&!CU.isEmpty(n)&&!CU.isEmpty(n.col)){l=a.getColumn(n.col);if(!CU.isEmpty(l)&&l.cdtable)if("number"==l.ctype||"numinval"==l.ctype)m=l.decbit,!CU.isEmpty(m)&&0<(m=parseInt(m,10))&&
(f=(parseFloat(f)/Math.pow(10,m)).toFixed(m));else if("date"==l.ctype||"dateinval"==l.ctype)f="true"==l.dtime||!0===l.dtime?CU.toStringDateTime(f):CU.toStringDate(f);else if("enum"==l.ctype||"dict"==l.ctype)CU.isEmpty(l.view)||(f=PU.getDropValue(l.view,f,!0));f=a.parseColumnFormatValue(f,l)}return f};this.proxyDrawCallback=function(f){a.classifyUpload&&PU.bindClassifyUploadClick(a.el_table);CU.isFunction(a.drawCallback)&&a.drawCallback(f)};var c=a.getTableSettings();CU.isEmpty(c)&&(c="");a.showCheckbox&&
CU.insert(b.columns,0,{title:'<label class="fancy-checkbox custom-bgcolor-blue" style="padding:0px 0px 0px 7px;margin:0px;"><input type="checkbox" class="input_checkbox_all"><span></span></label>',width:33,type:"checkbox",data:"id",visible:!0,className:"text-center",render:function(f,l,m,n){f=CU.isEmpty(a.selectableType)||0<=(","+a.selectableType+",").indexOf(","+m.type+",")?"":"disabled";return'<label class="fancy-checkbox custom-bgcolor-blue" style="padding:0px;margin:0px;"><input data-id="'+a.getDataIdValue(m)+
'" class="input_checkbox_item" type="checkbox" '+f+"><span></span></label>"}});CU.isObject(a.renderRemark)&&!CU.isFunction(a.renderRemark)&&CU.insert(b.columns,0,{title:"",width:33,visible:!0,className:"text-center",data:"id",render:function(f,l,m,n){f=n.row;return'<span id="'+a.bid+"-expander-parent-icon-"+f+'" data-row-index="'+f+'" name="'+a.bid+'-expander-parent-icon" style="cursor:pointer;"><i class="fa fa-plus-square-o"></i></span>'}});for(var d=0;d<b.columns.length;d++){var g=b.columns[d];
g.index=d;if(CU.isEmpty(g.data))throw" the columns["+d+"].data is empty! ";CU.isEmpty(g.defaultContent)&&(g.defaultContent="&nbsp;");CU.isEmpty(g.orderable)&&(g.orderable=!1);CU.isEmpty(g.searchable)&&(g.searchable=!1);CU.isEmpty(g.align)&&(g.align="left");CU.isEmpty(g.render)&&(g.render=a.defaultRender);CU.isEmpty(c)?CU.isEmpty(g.visible)&&(g.visible=!0):g.visible=0<=c.indexOf("#"+d+"#");g.cdtable&&(CU.isEmpty(g.ctype)&&(g.ctype="string"),CU.isEmpty(g.decbit)&&(g.decbit=0),CU.isEmpty(g.dtime)&&(g.dtime=
!1),this.conditions.push(g))}if(!0===a.autoScrollX||"true"==a.autoScrollX){for(d=c=0;d<b.columns.length;d++){g=b.columns[d].width;var h=0;"number"!=typeof g?(g=CU.trim(g+""),/^([0-9]+)([.][0-9]+)?$/.test(g)&&(h=parseInt(g,10)+5)):h=g;0>=h&&(h=100);c+=h}b.sScrollX="100%";b.sScrollXInner=c+"px";b.bScrollCollapse=!0}this.url=b.url;this.getParams=b.getParams;this.errcb=b.errcb;this.config=b;this.columns=b.columns;this.searchFieldWidth=b.searchFieldWidth;this.searchName=b.searchName;CU.isEmpty(this.searchName)&&
(this.searchName="searchFieldFuzzy");this.dataMap={};this.dataArray=[];this.opbtns=[];if(!CU.isEmpty(b.opbtns))if(CU.isArray(b.opbtns))for(d=0;d<b.opbtns.length;d++)this.opbtns.push($(b.opbtns[d]));else this.opbtns.push($(b.opbtns));delete b.url;b.getParams=null;b.errcb=null;b.conditions=null;b.opbtns=null;delete b.searchName;delete b.columnLine;this.setHeadAlign=function(){var f=a.el_base.find("th");if(!CU.isEmpty(f)&&0<f.length)for(var l=0;l<f.length;l++){var m=$(f[l]),n=parseInt(m.attr("data-column-index"),
10);m.addClass("text-"+a.columns[n].align)}};this.setRowAlign=function(f){f=$(f).children();if(!CU.isEmpty(f)&&0<f.length)for(var l=a.el_base.find("th"),m=0;m<l.length;m++){var n=$(l[m]);n=parseInt(n.attr("data-column-index"),10);n=a.columns[n];CU.isEmpty(n)||$(f[m]).addClass("text-"+n.align)}};this.setRowWordStyle=function(f){f=$(f).children();if(!CU.isEmpty(f)&&0<f.length)for(var l=a.el_base.find("th"),m=0;m<l.length;m++){var n=a.columns[q];if(!CU.isEmpty(n)){q=$(l[m]);var q=parseInt(q.attr("data-column-index"),
10);n=n.word;CU.isEmpty(n)&&(n="break");$(f[m]).addClass("text-"+n)}}};this.setColumnAlign=function(f){var l=a.el_base.find("th");if(!CU.isEmpty(l)&&0<l.length)for(var m=0;m<l.length;m++){var n=$(l[m]);if(parseInt(n.attr("data-column-index"),10)==f){n.attr("style","text-align:"+a.columns[f].align+";");l=a.el_base.find("tr");if(!CU.isEmpty(l)&&1<l.length)for(n=1;n<l.length;n++)$(l[n]).find("td:eq("+m+")").attr("style","text-align:"+a.columns[f].align+";");break}}};this.getColumn=function(f){if(!CU.isEmpty(f))if("number"==
typeof f){if(0<=f&&f<a.columns.length)return a.columns[f]}else if(f=CU.trim(f+""),/^[0-9]+$/.test(f)){if(f=parseInt(f,10),0<=f&&f<a.columns.length)return a.columns[f]}else for(var l=0;l<a.columns.length;l++){var m=a.columns[l];if(m.data==f)return m}};this.buildConditionInput=function(){if(!CU.isEmpty(a.conditions)){for(var f=0;f<a.conditions.length&&("enum"==a.conditions[f].ctype||"dict"==a.conditions[f].ctype);f++);CU.isEmpty(PU.DATATABLE_HEADER_INPUTEDIT_WIN)&&(PU.DATATABLE_HEADER_INPUTEDIT_WIN=
$(['<div class="popover fade bottom in editable-container editable-popup" role="tooltip" style="max-width:350px;z-index: 9999;top:100px;left:400px;display:none;">\t<div class="arrow"></div>\t<div class="popover-content">\t\t<div class="form-horizontal" style="padding-top: 10px; padding-left: 15px; padding-right: 15px;">\t\t\t<div class="form-group table-condition-input-row" condition-type="string">\t\t\t\t<div class="pull-left lw260">\t\t\t\t\t<input type="text" ctype="string" class="form-control" maxlength="100">\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="form-group table-condition-input-row" condition-type="number">\t\t\t\t<div class="pull-left lw260">\t\t\t\t\t<input type="text" ctype="number" class="form-control tannux-input-number" maxlength="8">\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="form-group table-condition-input-row" condition-type="date">\t\t\t\t<div class="pull-left lw260">\t\t\t\t\t<div class="input-group date" data-date-autoclose="true" data-provide="datepicker" data-date-autoclose="true" data-date-format="yyyy-mm-dd" >\t\t\t\t\t\t<input type="text" ctype="date" class="form-control">\t\t\t\t\t\t<span class="input-group-addon"><i class="fa fa-calendar"></i></span>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="form-group table-condition-input-row" condition-type="dateinval">\t\t\t\t<div class="pull-left lw260">\t\t\t\t\t<div class="input-daterange input-group" data-provide="datepicker" data-date-format="yyyy-mm-dd">\t\t\t\t\t\t<input ctype="dateinval" data-provide="datepicker" data-date-autoclose="true" class="form-control" data-date-format="yyyy-mm-dd">\t\t\t\t\t\t<span class="input-group-addon">-</span>\t\t\t\t\t\t<input ctype="dateinval" data-provide="datepicker" data-date-autoclose="true" class="form-control" data-date-format="yyyy-mm-dd">\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="form-group table-condition-input-row" condition-type="numinval">\t\t\t\t<div class="pull-left lw260">\t\t\t\t\t<div class="input-daterange input-group">\t\t\t\t\t\t<input type="text" ctype="numinval" class="form-control tannux-input-number" maxlength="8">\t\t\t\t\t\t<span class="input-group-addon">-</span>\t\t\t\t\t\t<input type="text" ctype="numinval" class="form-control tannux-input-number" maxlength="8">\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="form-group table-condition-input-row" condition-type="enum">\t\t\t\t<div class="pull-left lw260" style="max-height:',
a.enumCdtwinMaxHeight,'px;overflow-y:auto;">\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="form-group" style="text-align: center;">\t\t\t\t<button type="button" class="btn btn-success">\u786e\u5b9a</button>&nbsp;&nbsp;<button type="button" class="btn btn-default">\u53d6\u6d88</button>\t\t\t</div>\t\t</div>\t</div></div>'].join("")),$("body").append(PU.DATATABLE_HEADER_INPUTEDIT_WIN),PU.DATATABLE_HEADER_INPUTEDIT_WIN.find("input").bind("keyup",function(l){13===l.keyCode&&PU.DATATABLE_HEADER_INPUTEDIT_WIN.find("button.btn-success").click()}),
PU.DATATABLE_HEADER_INPUTEDIT_WIN.find("button.btn-success").bind("click",function(){var l=PU.DATATABLE_HEADER_INPUTEDIT_WIN,m=l.attr("ctype"),n=l.attr("column-index");if(CU.isFunction(l[0].callback)){var q=l.find("input[ctype='"+m+"']");if("enum"==m||"dict"==m){var p=[];for(var r=0;r<q.length;r++){var t=$(q[r]);t.is(":checked")&&p.push(t.attr("data-value"))}}else if(1==q.length)p=CU.trim($(q[0]).val());else for(p=[],r=0;r<q.length;r++)p.push(CU.trim($(q[r]).val()));l[0].callback(m,n,p)}l.css("display",
"none")}),PU.DATATABLE_HEADER_INPUTEDIT_WIN.find("button.btn-default").bind("click",function(){PU.DATATABLE_HEADER_INPUTEDIT_WIN.css("display","none")}));return PU.DATATABLE_HEADER_INPUTEDIT_WIN}};this.showConditionInput=function(f,l,m){var n=a.buildConditionInput();if(!CU.isEmpty(n)){n.find(".table-condition-input-row").css("display","none");n.find("div[condition-type='"+m.ctype+"']").css("display","block");n.attr("ctype",m.ctype);n.attr("column-index",l);n[0].callback=a.showConditionInputCallback;
if("enum"==m.ctype||"dict"==m.ctype){var q=$(n.find("div[condition-type='"+m.ctype+"']").children(1));q.html("");var p=DROP[m.view];if(!CU.isEmpty(p)){for(var r=[],t=0;t<p.length;t++){var u=p[t];r.push('<div class="fancy-checkbox custom-bgcolor-blue"><label class="control-label" style="padding-left:7px;"><input type="checkbox" ctype="enum" data-column-index="'+l+'" data-value="'+u.code+'" ><span>',u.name,"</span></label></div>")}q.html(r.join(""))}}l=a.getConditionInputValue(l);q=n.find("input[ctype='"+
m.ctype+"']");if(!CU.isEmpty(q)&&0<q.length)if(CU.isEmpty(l)&&(l=""),t=CU.isArray(l),"numinval"==m.ctype||"dateinval"==m.ctype)$(q[0]).val(t?l[0]:""),$(q[1]).val(t?l[1]:"");else if("enum"==m.ctype||"dict"==m.ctype){if(t&&!CU.isEmpty(l))for(t=0;t<q.length;t++)m=$(q[t]),0<=l.indexOf(m.attr("data-value"))&&m.prop("checked",!0)}else $(q[0]).val(t?l[0]:l);f=f.offset();n.css("top",f.top+25);f=f.left+60-200;200>f&&(f=200);n.css("left",f);n.css("display","block")}};this.onHeaderConditionClick=function(){var f=
$(this),l=f.attr("data-column-index"),m=a.getColumn(l);CU.isEmpty(m)||(CU.isFunction(m.cdtor)?m.cdtor(l,m,a):a.showConditionInput(f,l,m))};this.onHeaderEnumConditionShow=function(){var f=$(this),l=f.attr("data-column-index"),m=a.el_table_cdt.find("span[column-index='"+l+"']");l=f.find(".table-header-cdt-enum-option");for(var n=0;n<l.length;n++)$(l[n]).prop("checked",!1);if(!CU.isEmpty(m)&&0<m.length&&(m=$(m[0]).attr("cdt-value"),!CU.isEmpty(m)))for(m=","+m+",",l=f.find(".table-header-cdt-enum-option"),
n=0;n<l.length;n++)el_cb=$(l[n]),0<=m.indexOf(","+el_cb.attr("data-value")+",")&&el_cb.prop("checked",!0)};this.onHeaderEnumConditionClick=function(){var f=$(this),l=f.parent().parent().parent().parent();f=f.attr("data-column-index");var m=[];l=l.find(".table-header-cdt-enum-option");for(var n=0;n<l.length;n++){var q=$(l[n]);q.is(":checked")&&m.push(q.attr("data-value"))}a.setEnumConditionValue(f,m);a.refresh()};this.showConditionInputCallback=function(f,l,m){CU.isEmpty(l)||("numinval"==f||"dateinval"==
f?(f=CU.isArray(m),a.addConditionValue(l,f&&0<m.length?m[0]:"",f&&1<m.length?m[1]:"")):"enum"==f||"dict"==f?a.setEnumConditionValue(l,m):a.addConditionValue(l,m),a.refresh())};this.getQueryCondition=function(){var f=a.getConditionValues(),l=CU.trim(a.el_text_search.val()+"");CU.isEmpty(l)||(0>l.indexOf("%")&&0>l.indexOf("_")&&(l="%"+l+"%"),f[a.searchName]=l);return f};this.getConditionValue=function(){return a.getConditionValues()};this.getConditionValues=function(){var f=a.el_table_cdt.find("span"),
l={};if(!CU.isEmpty(f)&&0<f.length)for(var m=0;m<f.length;m++){var n=$(f[m]),q=n.attr("column-id");if(!CU.isEmpty(q)){var p=a.getConditionInputValueByEl(n);"string"==typeof p&&(p=CU.trim(p));if(!CU.isEmpty(p)){var r=n.attr("column-ctype"),t=parseInt(n.attr("column-decbit"),10),u=0<t?Math.pow(10,t):1;n="true"==n.attr("column-dtime");if("string"==r)0>p.indexOf("%")&&0>p.indexOf("_")&&(p="%"+p+"%"),l[q+"Fuzzy"]=p;else if("number"==r)0<t&&(p=parseInt(parseFloat(p)*u,10)),l[q]=p;else if("enum"==r||"dict"==
r)"string"==typeof p&&(p=p.split(",")),l[q+"s"]=p;else if("date"==r)p=p.replace(/-/g,""),n&&(p+="000000"),l[q]=p;else if(("numinval"==r||"dateinval"==r)&&CU.isArray(p)&&2==p.length){q=CU.upfirstChar(q);var v=CU.trim(p[0]+"");p=CU.trim(p[1]+"");0<v.length&&("numinval"==r&&0<t&&(v=parseInt(parseFloat(v)*u,10)),"dateinval"==r&&(v=v.replace(/-/g,""),n&&(v+="000000")),l["start"+q]=v);0<p.length&&("numinval"==r&&0<t&&(p=parseInt(parseFloat(p)*u,10)),"dateinval"==r&&(p=p.replace(/-/g,""),n&&(p+="235959")),
l["end"+q]=p)}}}}return l};this.setConditionValues=function(f){if(CU.isObject(f))for(var l in f)if(!CU.isEmpty(l)){var m=f[l],n="",q=l.lastIndexOf("."),p=0<=q?l.substring(q+1):l;p.startsWith("start")?0<=q?(p=p.substring(5),l=l.substring(0,q+1),n=f[l+"end"+p],l+=CU.lowerFirstChar(p)):(l=l.substring(5),n=f["end"+l],l=CU.lowerFirstChar(l)):l.startsWith("end")&&(n=m,0<=q?(p=p.substring(3),l=l.substring(0,q+1),m=f[l+"start"+p],l+=CU.lowerFirstChar(p)):(l=l.substring(3),m=f["start"+l],l=CU.lowerFirstChar(l)));
p=a.getColumn(l);if(!(CU.isEmpty(p)||CU.isEmpty(m)&&CU.isEmpty(n)))if(q=p.ctype,"enum"==q||"dict"==q){if(!CU.isEmpty(m))for(CU.isArray(m)||(m=(m+"").split(",")),n=0;n<m.length;n++)a.addConditionValue(p.index,m[n])}else{CU.isEmpty(m)||(m=CU.trim(m+""));CU.isEmpty(n)||(n=CU.trim(n+""));q=0<p.decbit?Math.pow(10,p.decbit):1;var r="true"==p.dtime||!0===p.dtime;if(("number"==p.ctype||"numinval"==p.ctype)&&1<q)CU.isEmpty(m)||(m=parseInt(parseFloat(m)/q,10)),CU.isEmpty(n)||(n=parseInt(parseFloat(n)/q,10));
else if("date"==p.ctype||"dateinval"==p.ctype)CU.isEmpty(m)||(r&&6<m.length&&(m=m.substring(0,m.length-6)),m=CU.toStringDate(m)),CU.isEmpty(n)||(r&&6<n.length&&(n=n.substring(0,n.length-6)),n=CU.toStringDate(n));a.addConditionValue(p.index,m,n)}}};this.removeConditionValues=function(f){if(!CU.isEmpty(f)){"string"==typeof f&&(f=f.split(","));CU.isArray(f)||(f=[f]);var l=a.el_table_cdt.find(".table-condition-remove-item");if(!CU.isEmpty(l)&&0<l.length)for(var m=0;m<l.length;m++){var n=$(l[m]),q=n.attr("column-id");
!CU.isEmpty(q)&&0<=f.indexOf(q)&&n.parent().parent().remove()}}};this.clearConditionValues=function(){a.el_table_cdt.html("")};this.getConditionInputValues=function(){var f=a.el_table_cdt.find("span"),l={};if(!CU.isEmpty(f)&&0<f.length)for(var m=0;m<f.length;m++){var n=$(f[m]),q=n.attr("column-id");CU.isEmpty(q)||(n=a.getConditionInputValueByEl(n),CU.isEmpty(n)||(l[q]=n))}return l};this.getConditionInputValue=function(f){f=a.el_table_cdt.find("span[column-index='"+f+"']");if(!CU.isEmpty(f)&&0<f.length)return f=
$(f[0]),a.getConditionInputValueByEl(f)};this.getConditionInputValueByEl=function(f){var l=f.attr("column-ctype");if("numinval"==l||"dateinval"==l)return l=f.attr("cdt-start-value"),f=f.attr("cdt-end-value"),[l,f];if("enum"==l||"dict"==l){if(f=f.attr("cdt-value"),!CU.isEmpty(f))return f.split(",")}else return f.attr("cdt-value")};this.addConditionValue=function(f,l,m){var n=a.getColumn(f);if(!CU.isEmpty(n)&&!CU.isEmpty(n.data)){var q=CU.trim(n.data+"");0<=q.indexOf(".")&&(q=q.substring(q.lastIndexOf(".")+
1));var p=a.el_table_cdt.find(".table-condition-item-"+q);CU.isEmpty(p)||0==p.length?(p=$(['<div class="pull-left table-condition-item-',q,'" style="padding:7px 5px 7px 5px;">\t<div class="form-control" style="padding: 5px 6px;border-radius: 10px;height: 32px;">\t\t&nbsp;',n.title,'\uff1a<span class="table-condition-value" column-index="',f,'" column-id="',q,'" column-ctype="',n.ctype,'" column-decbit="',n.decbit,'" column-dtime="',n.dtime,'" column-view="',n.view,'"></span></a>\t\t<a href="###" class="table-condition-remove-item" column-id="',
q,'" style="color:#FF0000;"><i class="fa fa-times"></i></a>\t</div></div>'].join("")),a.el_table_cdt.append(p),p.find(".table-condition-remove-item").bind("click",a.removeConditionValue)):p=$(p[0]);CU.isEmpty(l)&&(l="");CU.isEmpty(m)&&(m="");CU.isEmpty(l)&&CU.isEmpty(m)?p.remove():(f=$(p.find(".table-condition-value")[0]),"enum"==n.ctype||"dict"==n.ctype?(m=PU.getDropValue(n.view,l),n=f.html(),q=f.attr("cdt-value"),CU.isEmpty(q)?(f.html(m),f.attr("cdt-value",l)):0>(","+q+",").indexOf(","+l+",")&&
(f.html(n+",&nbsp;"+m),f.attr("cdt-value",q+","+l))):"numinval"==n.ctype||"dateinval"==n.ctype?(n="",CU.isEmpty(l)||CU.isEmpty(m)?CU.isEmpty(l)?CU.isEmpty(m)||(n="\u622a\u6b62"+m):n="\u8d77\u59cb"+l:n=l+"\u81f3"+m,f.html(n),f.attr("cdt-start-value",l),f.attr("cdt-end-value",m)):(f.html(l),f.attr("cdt-value",l)))}};this.removeConditionValue=function(f){$(this).parent().parent().remove();a.refresh()};this.setEnumConditionValue=function(f,l){var m=a.getColumn(f);if(!CU.isEmpty(m)&&!CU.isEmpty(m.data)&&
(m=CU.trim(m.data+""),0<=m.indexOf(".")&&(m=m.substring(m.lastIndexOf(".")+1)),m=a.el_table_cdt.find(".table-condition-item-"+m),!CU.isEmpty(m)&&0<m.length&&(m=$(m[0]),CU.isEmpty(l)?m.remove():(m=$(m.find(".table-condition-value")[0]),m.html(""),m.attr("cdt-value",""))),!CU.isEmpty(l)))for(m=0;m<l.length;m++)a.addConditionValue(f,l[m])};this.addHeaderConditionIcon=function(f,l,m){0<f.find(".table-header-condition-icon").length||!0!==m.cdtable||(l=$('<i class="fa fa-filter table-header-condition-icon" style="cursor:pointer;" data-column-index="'+
l+'"></i>'),f.append(l),l.bind("click",a.onHeaderConditionClick))};this.fillConditionHeader=function(){if(!0!==a.hideHeader&&a.showSearchFilter){var f=a.el_base.find("thead");if(!CU.isEmpty(f)&&0!=f.length){f=$(f[0]);for(var l=0;l<a.columns.length;l++){var m=a.columns[l];if(m.cdtable){var n=f.find("th[data-column-index='"+l+"']");CU.isEmpty(n)||0==n.length||(n=$(n[0]),a.addHeaderConditionIcon(n,l,m))}}}}};b.rowCallback=function(f,l,m,n,q){a.setRowAlign(f);a.setRowWordStyle(f)};this.saveCheckboxStatus=
function(){a.showCheckbox&&a.keepCheckbox&&(a.CheckboxIds=a.getSelectRecordIds())};this.restoreCheckboxStatus=function(){if(a.showCheckbox&&a.keepCheckbox&&!CU.isEmpty(a.CheckboxIds)){var f=a.el_base.find(".input_checkbox_item");if(!CU.isEmpty(f)&&0<f.length)for(var l=0;l<f.length;l++){var m=$(f[l]);0<=a.CheckboxIds.indexOf(m.attr("data-id"))&&m.prop("checked",!0)}}};this.clearCheckboxStatus=function(){delete a.CheckboxIds};this.getTotalRows=function(){return a.totalRows};this.getRecord=function(f){return CU.isEmpty(f,
!0)?null:a.dataMap[f+""]};this.resetDataMap=function(f){a.dataMap={};a.dataArray=[];if(!CU.isEmpty(f)&&CU.isArray(f))for(var l=0;l<f.length;l++){var m=f[l],n=a.getDataIdValue(m);CU.isEmpty(n,!0)||(a.dataMap[n+""]=m);a.dataArray.push(m)}a.el_base.find(".input_checkbox_all").prop("checked",!1)};this.getAllRecords=function(){return a.dataArray};this.getSelectRecords=function(){var f=a.el_base.find(".input_checkbox_item"),l=[];if(!CU.isEmpty(f)&&0<f.length)for(var m=0;m<f.length;m++){var n=$(f[m]);n.is(":checked")&&
(n=n.attr("data-id"),n=a.getRecord(n),CU.isEmpty(n,!0)||l.push(n))}return l};this.getSelectRecordIds=function(){var f=a.el_base.find(".input_checkbox_item"),l=[];if(!CU.isEmpty(f)&&0<f.length)for(var m=0;m<f.length;m++){var n=$(f[m]);n.is(":checked")&&(n=n.attr("data-id"),l.push(n))}return l};this.setSelectRecords=function(f){var l=a.el_base.find(".input_checkbox_item");if(!CU.isEmpty(l)&&0<l.length){var m=!CU.isEmpty(f);m&&"string"==typeof f&&(f=f.split(","));m&&!CU.isArray(f)&&(f=[f]);for(var n=
0;n<l.length;n++){var q=$(l[n]),p=q.attr("data-id");p=m&&!CU.isEmpty(p)&&0<=f.indexOf(p);q.prop("checked",p)}}};this.getLoading=function(){return CU.isEmpty(a.searchLoading)?a.el_search_btn:[a.el_search_btn,a.searchLoading]};this.isPassage=function(){return!0===a.paging&&!0===a.passage};this.correctResult=function(f,l){if(CU.isArray(f))f={pageNum:1,pageSize:f.length,totalRows:f.length,totalPages:1,hasNext:!1,data:f};else if(CU.isEmpty(f)&&(f={}),a.isPassage()&&(f.pageNum=a.pageNum,f.pageSize=l,f.totalRows=
a.totalRows),null===f.data||void 0===f.data)f.data=[];return f};this.ajaxCallback=function(f,l,m,n,q,p,r){r=a.correctResult(r,q);a.resetDataMap(r.data);if(!a.isPassage()||CU.isEmpty(a.passageCountUrl))a.totalRows=r.totalRows;a.el_base.find("span[name=DATATABLE_TOTALROWS]").html(r.totalRows);l({draw:f.draw,recordsTotal:r.totalRows,recordsFiltered:r.totalRows,data:r.data});a.restoreCheckboxStatus();a.doRenderRowRemark(r.data);a.showCheckbox&&a.checkCBColumnSelectAll()};this.passageCountCallback=function(f,
l,m,n){CU.isEmpty(n)&&(n=0);a.totalRows=n;a.el_base.find(".dataTables_length").css("display","block");a.el_base.find(".dataTables_paginate").css("display","block");a.el_base.find("span[name=DATATABLE_TOTALROWS]").html(n);m._iRecordsTotal=n;m._iRecordsDisplay=n};this.ajax=function(f,l,m){var n=parseInt(f.start,10),q=a.pageSize=parseInt(f.length,10),p=a.pageNum=parseInt(n/q,10)+1;n=null;if(a.ordering&&!CU.isEmpty(f.order)){var r=f.order[0].dir;n=a.columns[f.order[0].column].data;CU.isEmpty(r)||CU.isEmpty(n)||
(0<n.indexOf(".")&&(n=n.substring(n.lastIndexOf(".")+1)),n+=" "+r)}r=a.getQueryCondition();var t=[p,q,r,n,""];CU.isFunction(a.getParams)&&(t=a.getParams(p,q,r,n,"",a));!1===t?a.el_base.find(".dataTables_processing").css("display","none"):"simple"==a.act?(CU.isArray(t)||(t=[t]),RS.simple({addroot:a.addroot,url:a.url,ps:t,errcb:a.errcb,loading:a.getLoading(),cb:function(u){a.ajaxCallback(f,l,m,p,q,t,u)}}),!a.isPassage()||CU.isEmpty(a.passageCountUrl)||1!=p&&"1"!=p||RS.simple({addroot:a.addroot,url:a.passageCountUrl,
ps:t,cb:function(u){a.passageCountCallback(f,l,m,u)}})):(CU.isArray(t)&&(t={pageNum:t[0],pageSize:t[1],cdt:t[2],orders:t[3],qs:t[4]}),RS.rest2({addroot:a.addroot,url:a.url,ps:t,errcb:a.errcb,loading:a.getLoading(),cb:function(u){a.ajaxCallback(f,l,m,p,q,t,u)}}),!a.isPassage()||CU.isEmpty(a.passageCountUrl)||1!=p&&"1"!=p||RS.rest2({addroot:a.addroot,url:a.passageCountUrl,ps:t,errcb:a.errcb,cb:function(u){a.passageCountCallback(f,l,m,u)}}))};CU.isEmpty(b.ajax)&&(b.ajax=a.ajax);this.el_text_search=$('<input name="'+
a.searchName+'" type="text" class="form-control">');this.el_search_btn=$('<span class="search-icon"><i class="fa fa-search"></i></span>');this.el_table=$('<table style="width:100%;" class="table table-hover '+(a.columnLine?"table-bordered":"")+'"></table>');this.el_btn_columns=$('<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style="width:45px; padding:6px 10px 6px 14px;"><i class="fa fa-indent"></i></button>');this.el_menu_columns=$('<ul class="dropdown-menu dropdown-menu-right" role="menu" style="padding:10px;"></ul>');
for(d=0;d<this.columns.length;d++)c=this.columns[d],"checkbox"!=c.type&&(c=$(['<li><a href="###" class="fancy-checkbox custom-bgcolor-blue">\t<label>','\t\t<input id="'+(a.bid+"_cb_column_display_"+d)+'" name="'+(a.bid+'_cb_column_display" value="')+d+'" type="checkbox" '+(c.visible?"checked":"")+">","\t\t<span>",c.title,"</span>\t</label></a></li>"].join("")),this.el_menu_columns.append(c));var k=$('<div class="main-box clearfix" style="padding-bottom: 3px;'+(a.showSearchBox?"":"display:none;")+
'"></div>');d=$('<div class="pull-left" style="width:'+a.searchFieldWidth+"px;"+(0>=a.searchFieldWidth?"display:none;":"")+'"></div>');c=$('<div class="input-group-btn"></div>');d.append(c);g=$('<div class="form-group pull-left filter-block" style="width:'+parseInt(a.searchFieldWidth,10)+'px;" ></div>');g.append(this.el_text_search);g.append(this.el_search_btn);d.append(g);d.append(c);c=$('<div class="input-group pull-right" ></div>');k.append(d);k.append(c);g=$('<div class="form-horizontal"></div>');
this.el_table_cdt=$("<div></div>");g.append(this.el_table_cdt);g.append(this.el_table);if(!CU.isEmpty(this.opbtns))for(d=0;d<this.opbtns.length;d++)c.append(this.opbtns[d]);a.showColumnMenus&&(d=$('<div class="btn-group"></div>'),d.append(this.el_btn_columns),d.append(this.el_menu_columns),c.append("&nbsp;"),c.append(d));this.el_base.append(k);this.el_base.append(g);b.drawCallback=this.proxyDrawCallback;this.dataTable=$(this.el_table).dataTable(b);!0===a.hideHeader&&this.el_base.find("thead").css("display",
"none");this.setHeadAlign();this.fillConditionHeader();CU.isEmpty(this.conditions)||this.buildConditionInput();CU.isEmpty(b.scrollY);this.search=function(f,l){null!==f&&void 0!==f&&a.el_text_search.val(f);a.isPassage()&&(a.totalRows=0,a.el_base.find(".dataTables_length").css("display","none"),a.el_base.find(".dataTables_paginate").css("display","none"));a.searchLoading=l;a.clearCheckboxStatus();a.dataTable.DataTable().draw()};this.getSearchFuzzyValue=function(){return a.el_text_search.val()};this.refresh=
function(){a.saveCheckboxStatus();a.dataTable.DataTable().draw(!1)};this.setSearchBoxVisible=function(f){a.showSearchBox=!1!==f;k.css("display",a.showSearchBox?"block":"none")};this.doRenderRowRemark=function(f){var l=a.el_base.find("tbody");if(!CU.isEmpty(l)&&0<l.length&&(l=$(l[0]).children(),!CU.isEmpty(l)&&0<l.length)){var m=$(l[0]).children();if(!CU.isEmpty(m)&&0<m.length)for(var n=0;n<m.length;n++){var q=$(m[n]);q.css("border-top","0")}m=a.columns.length;if(0<m&&!CU.isEmpty(f)){var p=null;CU.isFunction(a.renderRemark)?
p=a.renderRemark:CU.isObject(a.renderRemark)&&(a.renderRemark instanceof PrettyDataTableChildExpander||(a.renderRemark=new PrettyDataTableChildExpander(a.renderRemark)),p=a.renderRemark.render);var r=a.renderRemark instanceof PrettyDataTableChildExpander;if(CU.isFunction(p))for(n=l.length-1;0<=n;n--)if(q=p(n,f[n],a),!CU.isEmpty(q)){var t=$(l[n]);q=$('<tr role="row" class="'+t.attr("class")+' rmk" expander="'+r+'"><td class="text-left text-break" style="border-top: 0px;'+(r?"display:none;":"")+'" colspan="'+
m+'">'+q+"</td></tr>");t.after(q)}r&&a.getChildExpanderIcons().bind("click",function(){var u=$(this).attr("data-row-index");a.renderRemark.expand(u,a)})}}};this.getChildExpander=function(){return a.renderRemark instanceof PrettyDataTableChildExpander?a.renderRemark:null};this.getChildExpanderIcons=function(){return $("span[name='"+a.bid+"-expander-parent-icon']")};this.getChildExpanderIcon=function(f){return $("#"+a.bid+"-expander-parent-icon-"+f)};this.checkCBColumnSelectAll=function(){var f=a.el_base.find(".input_checkbox_all");
f.prop("disabled",!0===a.singleSelect);a.singleSelect&&f.prop("checked",!1);f=a.el_base.find(".input_checkbox_item");f.bind("change",function(l){if(a.singleSelect)a.el_base.find(".input_checkbox_item").prop("checked",!1),$(this).prop("checked",!0);else{if(l=$(this).is(":checked"))for(var m=a.el_base.find(".input_checkbox_item"),n=0;n<m.length&&(l=$(m[n]).is(":checked"),l);n++);a.el_base.find(".input_checkbox_all").prop("checked",l)}});f.bind("click",function(l){if(a.showCheckbox){var m=$(this);m.is(":checked");
m=m.attr("data-id");if(!CU.isEmpty(a.checkboxDataId)&&l.altKey){l=a.el_base.find(".input_checkbox_item");for(var n=-1,q=-1,p=0;p<l.length;p++){var r=$(l[p]).attr("data-id");a.checkboxDataId==r&&(n=p);m==r&&(q=p)}if(0<=n&&q>n)for(m=$(l[n]).is(":checked"),p=n;p<=q;p++)$(l[p]).prop("checked",m)}else a.checkboxDataId=m}})};this.getPageNum=function(){return a.pageNum};this.getPageSize=function(){return a.pageSize};this.el_menu_columns.bind("click",function(f){f.stopPropagation()});CU.isEmpty(this.el_menu_search)||
this.el_menu_search.bind("click",function(f){f.stopPropagation()});this.showCheckbox&&this.el_base.find(".input_checkbox_all").bind("change",function(){var f=$(this).is(":checked"),l=a.el_base.find(".input_checkbox_item");if(!CU.isEmpty(l)&&0<l.length)for(var m=0;m<l.length;m++){var n=$(l[m]),q=n.is(":disabled");n.prop("checked",!q&&f)}});this.el_text_search.bind("keyup",function(f){13===f.keyCode&&a.search()});this.el_search_btn.bind("click",function(){a.search()});this.el_menu_columns.find('input[type="checkbox"]').bind("change",
function(){var f=$(this),l=f.prop("checked");f=parseInt(f.prop("value"),10);a.dataTable.DataTable().column(f).visible(l);l&&a.setColumnAlign(f);a.setTableSettings();a.fillConditionHeader()})}
function PrettyDataTableChildExpander(b){var a=this;$.extend(a,{act:"rest2",lineColor:"",columnLine:!0,hideHeader:!1,tableBorder:!0},b);if(!CU.isEmpty(this.columns))for(b=0;b<this.columns.length;b++){var c=$.extend({title:"",data:"",width:100,align:"left",word:"break"},this.columns[b]);this.columns[b]=c}this.parentRowsMap={};this.getPrefix=function(d,g){return g.bid+"-expander-"+d+"-"};this.ajaxCallback=function(d,g,h,k,f){d=f.correctResult(d,g.pageSize);var l=a.getPrefix(h,f),m=$("#"+l+"tbody");
l=a.parentRowsMap[l];if(!(CU.isEmpty(l)||CU.isEmpty(m)||0>=m.length)){m.html("");var n=d.data,q=a.columns;if(!CU.isEmpty(q)){var p=[];if(!CU.isEmpty(n)&&CU.isArray(n))for(var r=0;r<n.length;r++){k=n[r];p.push('<tr role="row" class="odd">');for(var t=0;t<q.length;t++){var u=q[t];p.push('<td class="text-',u.align," text-",u.word,'" style="border-top: 0px;width:',u.width,'px;"');var v="";CU.isEmpty(u.data)||(v=CU.getObjectValue(k,u.data));CU.isFunction(u.render)&&(v=u.render(v,k,{col:t,row:r},l.index,
l.row,l.grid,a));CU.isEmpty(v)||(v=l.grid.parseColumnFormatValue(v,u));CU.isEmpty(v)&&(v="&nbsp;");p.push(">",v,"</td>")}p.push("</tr>")}else p.push('<tr role="row" class="odd"><td class="text-center" style="border-top: 0px;" colspan="',q.length,'">\u65e0\u6570\u636e</td></tr>');m.html(p.join(""))}CU.isFunction(a.drawCallback)&&a.drawCallback(d,g,h,k,f,a)}};this.ajax=function(d,g,h,k,f){var l=[1,20,{},""];CU.isFunction(a.getParams)&&(l=a.getParams(1,20,d,g,h,a));!1===l?h.el_base.find(".dataTables_processing").css("display",
"none"):"simple"==a.act?(CU.isArray(l)||(l=[l]),RS.simple({addroot:a.addroot,url:a.url,ps:l,errcb:a.errcb,loading:k,cb:function(m){var n={pageNum:1,pageSize:20,ps:l};a.ajaxCallback(m,n,d,g,h);CU.isFunction(f)&&f(m,n,d,g,h)}})):(CU.isArray(l)&&(l={pageNum:l[0],pageSize:l[1],cdt:l[2],orders:l[3],qs:l[4]}),RS.rest2({addroot:a.addroot,url:a.url,ps:l,errcb:a.errcb,loading:k,cb:function(m){var n={pageNum:1,pageSize:20,ps:l};a.ajaxCallback(m,n,d,g,h);CU.isFunction(f)&&f(m,n,d,g,h)}}))};this.render=function(d,
g,h){var k=a.getPrefix(d,h);a.parentRowsMap[k]={index:d,row:g,grid:h};var f=['<div id="',k,'container" style="margin:0px 10px 10px 10px;',CU.isEmpty(a.containerStyle)?"":a.containerStyle,'">'],l=a.title;CU.isFunction(l)&&(l=l(d,g,h,a));CU.isEmpty(l)||f.push('<div style="margin:5px;',CU.isEmpty(a.titleStyle)?"":a.titleStyle,'">',l,"</div>");f.push('<table class="table-hover no-footer dtfc-has-right ',a.columnLine?"table-bordered":"",'" style="',CU.isEmpty(a.lineColor)?"":"border-color:"+a.lineColor+
";",'" role="grid">');if(!a.hideHeader){f.push('<thead><tr role="row">');d=a.columns;if(!CU.isEmpty(d))for(g=0;g<d.length;g++)h=d[g],f.push('<th class="text-',h.align,'" data-column-index="',g,'" style="width:',h.width,"px;",CU.isEmpty(a.headerBackgroundColor)?"":"background-color:"+a.headerBackgroundColor+";",CU.isEmpty(a.lineColor)?"":"border-color:"+a.lineColor+";",'">',h.title,"</th>");f.push("</tr></thead>")}f.push('<tbody id="',k,'tbody" ></tbody>');f.push("</table>");f.push("</div>");return f.join("")};
this.getContainer=function(d,g){d=a.getPrefix(d,g);return $("#"+d+"container")};this.expand=function(d,g){var h=a.getPrefix(d,g);if(!CU.isEmpty(a.parentRowsMap[h])){var k=g.getChildExpanderIcon(d);if(!(CU.isEmpty(k)||0>=k.length||0<=k.html().indexOf("loading"))){h="true"==k.attr("expended");var f="true"==k.attr("queryed"),l=a.getContainer(d,g).parent();h?(l.css("display","none"),k.attr("expended","false"),k.html("<i class='fa fa-plus-square-o' />")):(l.css("display","table-cell"),k.attr("expended",
"true"),k.html("<i class='fa fa-minus-square-o' />"),f||a.search(d,g,function(){k.attr("queryed",!0)},k))}}};this.search=function(d,g,h,k){d=a.getPrefix(d,g);d=a.parentRowsMap[d];CU.isEmpty(d)||a.ajax(d.index,d.row,d.grid,k,h)}}
function PrettyThumbTable(b){if(CU.isEmpty(b))throw" the config is empty argument! ";if(CU.isEmpty(b.bid))throw" the config.bid is empty argument! ";var a=this;$.extend(a,{act:"rest2",paging:!0,minHeight:400,autoScrollY:!0,pageNum:1,pageSize:50,passageGapHeight:200,showSearchBox:!0,style:"",singleSelect:!0},b);CU.isEmpty(a.passageContainer)||(a.passageContainer=$(a.passageContainer));CU.isEmpty(a.passageEntity)||(a.passageEntity=$(a.passageEntity));this.dataMap={};this.dataArray=[];this.searchLoading=
null;this.locked=!1;this.hasNext=!0;this.events={dblclick:[]};this.bind=function(c,d){!CU.isEmpty(c)&&CU.isFunction(d)&&CU.isArray(a.events[c])&&a.events[c].push(d)};this.doEvent=function(c,d,g,h,k,f,l,m,n){c=a.events[c];if(!CU.isEmpty(c))for(var q=0;q<c.length;q++)c[q](d,g,h,k,f,l,m,n)};this.doDblclick=function(c,d,g){a.doEvent("dblclick",c,d,g)};"string"==typeof this.bid?this.el_base=$("#"+this.bid):(this.el_base=$(this.bid),this.bid=this.el_base.attr("id"),CU.isEmpty(this.bid)&&(this.bid="PrettyThumbTable_"+
CU.getId()));b=b.opbtns;b=CU.isEmpty(b)?"":CU.isArray(b)?b.join(""):"";b=['<div class="panel" style="margin: 0px;padding: 0px;',this.style,'">','\t<div class="panel-body" style="padding:0px;">','\t\t<div class="main-box clearfix" style="padding-bottom: 3px;',a.showSearchBox?"":"display:none;",'">','\t\t\t<div class="pull-left" style="width: 250px;">','\t\t\t\t<div class="form-group pull-left filter-block" style="width: 250px;padding:0px;margin:0px;">','\t\t\t\t\t<input type="text" class="form-control input-thumb-search"><span class="search-icon btn-thumb-search"><i class="fa fa-search"></span></i>',
"\t\t\t\t</div>",'\t\t\t\t<div class="input-group-btn"></div>',"\t\t\t</div>",'\t\t\t<div class="input-group pull-right">',b,"</div>","\t\t</div>",'\t\t<div class="dataTables_wrapper form-inline dt-bootstrap no-footer">','\t\t\t<div class="clearfix table-content" style="min-height:',a.minHeight,"px;",CU.isEmpty(a.maxHeight)?"":"max-height:"+a.maxHeight+"px;",a.autoScrollY?"overflow-y:auto;":"",'"></div>','\t\t\t<div class="row" style="',!0===a.paging?"":"display:none;",'">','\t\t\t\t<div class="col-sm-6" style="line-height:40px;">',
'\t\t\t\t\t<label style="font-weight:normal;">','\t\t\t\t\t\t\u6bcf\u9875 <select style="width:75px;" class="form-control input-sm input-pagesize">','\t\t\t\t\t\t\t\t<option value="10">10</option>','\t\t\t\t\t\t\t\t<option value="20">20</option>','\t\t\t\t\t\t\t\t<option value="30">30</option>','\t\t\t\t\t\t\t\t<option value="40">40</option>','\t\t\t\t\t\t\t\t<option value="50" selected>50</option>','\t\t\t\t\t\t\t\t<option value="60">60</option>','\t\t\t\t\t\t\t\t<option value="70">70</option>',
'\t\t\t\t\t\t\t\t<option value="80">80</option>','\t\t\t\t\t\t\t\t<option value="90">90</option>','\t\t\t\t\t\t\t\t<option value="100">100</option>',"\t\t\t\t\t\t\t</select>",'\t\t\t\t\t\t \u6761&nbsp;&nbsp;&nbsp;&nbsp;\u5171 <span class="DATATABLE_TOTALROWS">0</span> \u6761\u8bb0\u5f55',"\t\t\t\t\t</label>","\t\t\t\t</div>",'\t\t\t\t<div class="col-sm-6">','\t\t\t\t\t<div class="dataTables_paginate paging_full_numbers pagination_box">','\t\t\t\t\t\t<ul class="pagination ul_pagination"></ul>',"\t\t\t\t\t</div>",
"\t\t\t\t</div>","\t\t\t</div>","\t\t</div>",'\t\t<div class="panel-floor text-center" style="display:none;"><img src="',ContextPath,'/tannux/frame/imgs/core/loading.gif"></div>',"\t</div>","</div>"];this.el_base.append($(b.join("")));this.findElObject=function(c){c=a.el_base.find(c);return!CU.isEmpty(c)&&0<c.length?$(c[0]):null};this.el_searchinput=this.findElObject(".input-thumb-search");this.el_searchbtn=this.findElObject(".btn-thumb-search");this.el_tcontent=this.findElObject(".table-content");
this.el_pagesize=this.findElObject(".input-pagesize");this.el_pagesize.val(this.pageSize);this.el_totalrows=this.findElObject(".DATATABLE_TOTALROWS");this.el_pagingbox=this.findElObject(".pagination_box");this.el_loading=this.findElObject(".panel-floor");this.getRecord=function(c){return CU.isEmpty(c,!0)?null:a.dataMap[c+""]};this.render=function(c){var d="";var g=CU.isFunction(a.renderImage)?a.renderImage(c,a):CU.getIconHtml(c.icon,"max-width:60px;max-height:60px;");var h=CU.isFunction(a.renderTitle)?
a.renderTitle(c,a):c.text;CU.isFunction(a.renderTools)&&(d=a.renderTools(c,a));CU.isEmpty(g)&&(g="");CU.isEmpty(h)&&(h="");CU.isEmpty(d)&&(d="");g='<div class="gthumb-image" data-id="'+c.id+'" data-text="'+c.text+'" >'+g+"</div>";h='<div class="gthumb-title" title="'+c.text+'">'+h+"</div>";c='<div class="gthumb-box" data-id="'+c.id+'" data-text="'+c.text+'" data-type="'+c.type+'" >';CU.isEmpty(d)||(c+='<div class="gthumb-tools">'+d+"</div>");return c+(g+h+"</div>")};this.fillContent=function(c){a.hasNext=
c.hasNext;if("passage"!=a.paging||"passage"==a.paging&&1==a.pageNum)a.dataMap={},a.dataArray=[],a.el_tcontent.html("");!0===a.paging&&(a.pageNum=c.pageNum,a.el_totalrows.html(c.totalRows),$(a.el_pagingbox.find(".ul_pagination")[0]).remove(),a.el_pagingbox.html('<ul class="pagination ul_pagination"></ul>'),$(a.el_pagingbox.find(".ul_pagination")[0]).twbsPagination({totalPages:c.totalPages?c.totalPages:1,visiblePages:7,startPage:c.pageNum,first:"\u9996\u9875",prev:"\u4e0a\u4e00\u9875",next:"\u4e0b\u4e00\u9875",
last:"\u5c3e\u9875",onPageClick:function(h,k){a.ajax(k)}}));c=c.data;if(!CU.isEmpty(c))for(var d=0;d<c.length;d++){var g=c[d];CU.isEmpty(g.id)&&(g.id=CU.getId());a.dataMap[g.id+""]=g;a.dataArray.push(g);g=a.render(g,a);CU.isEmpty(g)||a.el_tcontent.append($(g))}};this.addContentListener=function(c){if(!CU.isEmpty(c)){c=a.el_base.find(".gthumb-box");var d=a.el_base.find(".gthumb-image");c.unbind("mouseover");c.unbind("mouseout");c.unbind("click");d.unbind("dblclick");c.bind("mouseover",function(){$(this).find(".gthumb-tools").css("display",
"block")});c.bind("mouseout",function(){$(this).find(".gthumb-tools").css("display","none")});c.bind("click",function(){var g=$(this),h=g.hasClass("gthumb-box-active");a.singleSelect&&a.el_base.find(".gthumb-box").removeClass("gthumb-box-active");h?g.removeClass("gthumb-box-active"):(CU.isEmpty(a.selectableType)||0<=(","+a.selectableType+",").indexOf(","+g.attr("data-type")+","))&&g.addClass("gthumb-box-active")});d.bind("dblclick",function(g){var h=$(this).attr("data-id");h=a.getRecord(h);a.doDblclick(g,
h,a)})}};this.getAllRecords=function(){return a.dataArray};this.getSelectRecords=function(){var c=a.el_base.find(".gthumb-box-active"),d=[];if(!CU.isEmpty(c)&&0<c.length)for(var g=0;g<c.length;g++){var h=$(c[g]).attr("data-id");h=a.getRecord(h);CU.isEmpty(h,!0)||d.push(h)}return d};this.getSelectRecordIds=function(){var c=a.el_base.find(".gthumb-box-active"),d=[];if(!CU.isEmpty(c)&&0<c.length)for(var g=0;g<c.length;g++){var h=$(c[g]).attr("data-id");d.push(h)}return d};this.getLoading=function(){return CU.isEmpty(a.searchLoading)?
a.el_searchbtn:[a.el_searchbtn,a.searchLoading]};this.correctResult=function(c,d){CU.isArray(c)?c={pageNum:1,pageSize:c.length,totalRows:c.length,totalPages:1,hasNext:!1,data:c}:"passage"==a.paging&&(c.pageNum=a.pageNum,c.pageSize=d);return c};this.ajax=function(c){if(CU.isEmpty(c)||0>=c)c=1;a.pageNum=c;var d=a.el_searchinput.val(),g=a.el_pagesize.val();c={pageNum:c,pageSize:g,cdt:{searchFieldFuzzy:d}};CU.isFunction(a.getParams)&&(c=a.getParams(c.pageNum,c.pageSize,c.cdt,"","",a));a.el_loading.css("display",
"block");"simple"==a.act?(CU.isArray(c)||(c=[c]),RS.simple({addroot:a.addroot,url:a.url,ps:c,loading:a.getLoading(),cb:function(h){try{h=a.correctResult(h,g),a.fillContent(h),a.addContentListener(h)}finally{a.passageCallbck(h)}CU.isFunction(a.callback)&&a.callback(h,a)},errcb:function(h,k){a.passageCallbck();CU.isFunction(a.errcb)?a.errcb(h,k):RS.defaultErrorCallback(h,k)}})):(CU.isArray(c)&&(c={pageNum:c[0],pageSize:c[1],cdt:c[2],orders:c[3],qs:c[4]}),RS.rest2({addroot:a.addroot,url:a.url,ps:c,loading:a.getLoading(),
cb:function(h){try{h=a.correctResult(h,g),a.fillContent(h),a.addContentListener(h)}finally{a.passageCallbck(h)}CU.isFunction(a.callback)&&a.callback(h,a)},errcb:function(h,k){a.passageCallbck();CU.isFunction(a.errcb)?a.errcb(h,k):RS.defaultErrorCallback(h,k)}}))};this.search=function(c,d){CU.isEmpty(c,!0)||a.el_searchinput.val(c);a.searchLoading=d;a.ajax()};this.refresh=function(){a.ajax(a.pageNum)};this.getPassageContainer=function(){return CU.isEmpty(a.passageContainer)?$(window):$(a.passageContainer)};
this.getPassageEntity=function(){return CU.isEmpty(a.passageEntity)?$("body"):$(a.passageEntity)};this.passage=function(){if("passage"==a.paging&&!a.locked&&!0===a.hasNext){var c=a.getPassageContainer();a.getPassageEntity().height()-c.height()-c.scrollTop()<a.passageGapHeight&&(a.locked=!0,CU.isEmpty(a.pageNum)?a.ajax():a.ajax(a.pageNum+1))}};this.passageCallbck=function(c){a.el_loading.css("display","none");"passage"==a.paging&&setTimeout(function(){a.locked=!1;a.passage()},500)};this.el_searchinput.bind("keyup",
function(c){13===c.keyCode&&a.search()});this.el_searchbtn.bind("click",function(){a.search()});"passage"==this.paging&&$(window).scroll(a.passage)}
function PrettyColumnTable(b){if(CU.isEmpty(b))throw" the config is empty argument! ";if(CU.isEmpty(b.bid))throw" the config.bid is empty argument! ";var a=this;$.extend(a,{act:"rest2",paging:!0,minHeight:500,autoScrollY:!0,style:"",showCheckbox:!1,columnWidth:300},b);this.parentstack=[];this.dataMaps={};this.dataArrays={};this.searchLoading=null;this.events={click:[],dblclick:[]};this.bind=function(c,d){!CU.isEmpty(c)&&CU.isFunction(d)&&CU.isArray(a.events[c])&&a.events[c].push(d)};this.doEvent=
function(c,d,g,h,k,f,l,m,n){c=a.events[c];if(!CU.isEmpty(c))for(var q=0;q<c.length;q++)c[q](d,g,h,k,f,l,m,n)};this.doClick=function(c,d,g){a.doEvent("click",c,d,g)};this.doDblClick=function(c,d,g){a.doEvent("dblclick",c,d,g)};"string"==typeof this.bid?this.el_base=$("#"+this.bid):(this.el_base=$(this.bid),this.bid=this.el_base.attr("id"),CU.isEmpty(this.bid)&&(this.bid="PrettyThumbTable_"+CU.getId()));this.el_base.append($(['<div class="panel" style="margin: 0px;padding: 0px;',this.style,'">\t<div class="dataTables_wrapper form-inline dt-bootstrap no-footer" style="overflow-x: auto;">\t\t<div class="clearfix table-columns-container">\t\t</div>\t</div></div>'].join("")));
this.findElObject=function(c){c=a.el_base.find(c);return!CU.isEmpty(c)&&0<c.length?$(c[0]):null};this.el_columns_container=this.findElObject(".table-columns-container");this.getLastParentId=function(){return CU.isEmpty(a.parentstack)?null:a.parentstack[a.parentstack.length-1]};this.getRecord=function(c){for(var d in a.dataMaps){var g=a.dataMaps[d];if(!CU.isEmpty(g)&&(g=g[c+""],!CU.isEmpty(g,!0)))return g}return null};this.getColumnRecords=function(c){return a.dataArrays[c+""]};this.getAllRecords=
function(c){CU.isEmpty(c)&&(c=a.getLastParentId());return a.getColumnRecords(c)};this.render=function(c){var d="";var g=CU.isFunction(a.renderImage)?a.renderImage(c,a):CU.getIconHtml(c.icon,"max-width:16px;max-height:16px;");var h=CU.isFunction(a.renderTitle)?a.renderTitle(c,a):c.text;CU.isFunction(a.renderTools)&&(d=a.renderTools(c,a));CU.isEmpty(g)&&(g="");CU.isEmpty(h)&&(h="");CU.isEmpty(d)&&(d="");g='<div class="gcolumn-image" data-id="'+c.id+'" data-text="'+c.text+'" >'+g+"</div>";h='<div class="gcolumn-title" title="'+
c.text+'">'+h+"</div>";var k='<tr><td class="text-left table-column-row" data-id="'+c.id+'">';a.showCheckbox&&(k+='<label class="fancy-checkbox custom-bgcolor-blue input_checklabel_columnrow"><input data-id="'+c.id+'" class="input_checkbox_columnrow" type="checkbox"><span></span></label>');k+=g+h;CU.isEmpty(d)||(k+='<div class="gcolumn-tools" parentId="'+c.parentId+'" >'+d+"</div>");return k+"</td></tr>"};this.isLeafColumn=function(c){if(CU.isEmpty(c))return!1;var d=a.el_base.find(".table-column-item");
return!CU.isEmpty(d)&&0<d.length&&$(d[d.length-1]).attr("parentId")==c};this.getColumn=function(c){if(CU.isEmpty(c))return null;c+="";var d=a.el_base.find(".table-column-item");if(!CU.isEmpty(d)&&0<d.length)for(var g=0;g<d.length;g++){var h=$(d[g]);if(h.attr("parentId")==c)return h}return null};this.addColumn=function(c,d){if(!CU.isEmpty(c)){c+="";a.removeColumn(c);var g=['<div class="table-column-item" parentId="',c,'" style="border: 1px solid #d1d6e6 !important;min-height:',a.minHeight,"px;",CU.isEmpty(a.maxHeight)?
"":"max-height:"+a.maxHeight+"px;",a.autoScrollY?"overflow-y:auto;":"","width:",a.columnWidth,'px;"><table class="table"><tbody>'],h=d.data;d={};var k=[];if(!CU.isEmpty(h))for(var f=0;f<h.length;f++){var l=h[f];CU.isEmpty(l.id)&&(l.id=CU.getId());d[l.id+""]=l;k.push(l);l=a.render(l,a);CU.isEmpty(l)||g.push(l)}g.push("</tbody></table></div>");g=$(g.join(""));a.el_columns_container.append(g);a.parentstack.push(c);a.dataMaps[c]=d;a.dataArrays[c]=k;a.resizeContainer();c=g.find(".table-column-row");c.unbind("mouseover");
c.unbind("mouseout");c.unbind("click");c.unbind("dblclick");c.bind("mouseover",function(){var m=$(this).find(".gcolumn-tools");if(!CU.isEmpty(m)&&0<m.length){m=$(m[0]);var n=m.attr("parentId");a.isLeafColumn(n)&&m.css("display","block")}});c.bind("mouseout",function(){$(this).find(".gcolumn-tools").css("display","none")});c.bind("click",function(m){var n=$(this);a.el_base.find(".table-column-row").removeClass("table-column-row-active");n.addClass("table-column-row-active");var q=a.getRecord(n.attr("data-id"));
"1"==q.type&&n.find(".gcolumn-tools").css("display","none");a.doClick(m,q,a)});c.bind("dblclick",function(m){var n=$(this);n=a.getRecord(n.attr("data-id"));a.doDblClick(m,n,a)})}};this.removeColumn=function(c){if(CU.isEmpty(c))return!1;var d=!1,g=a.getRecord(c+"");c="";CU.isEmpty(g)||CU.isEmpty(g.parentId)?d=!0:c=g.parentId;g=[];for(var h=0;h<a.parentstack.length;h++){var k=a.parentstack[h];d||k!=c?d?(delete a.dataMaps[k],delete a.dataArrays[k],k=a.getColumn(k),CU.isEmpty(k)||k.remove()):g.push(k):
(d=!0,g.push(k))}a.parentstack=g;a.resizeContainer();return d};this.clearColumns=function(){a.removeColumn("0")};this.resizeContainer=function(){a.el_columns_container.width((a.columnWidth+20)*a.parentstack.length)};this.getSelectRecords=function(){var c=a.showCheckbox?a.el_base.find(".input_checkbox_columnrow"):a.el_base.find(".table-column-row-active");var d=[];if(!CU.isEmpty(c)&&0<c.length)for(var g=0;g<c.length;g++){var h=$(c[g]),k=h[0].tagName.toLowerCase();if("input"!=k||"input"==k&&h.is(":checked"))h=
h.attr("data-id"),h=a.getRecord(h),CU.isEmpty(h,!0)||d.push(h)}return d};this.getSelectRecordIds=function(){var c=a.showCheckbox?a.el_base.find(".input_checkbox_columnrow"):a.el_base.find(".table-column-row-active");var d=[];if(!CU.isEmpty(c)&&0<c.length)for(var g=0;g<c.length;g++){var h=$(c[g]),k=h[0].tagName.toLowerCase();if("input"!=k||"input"==k&&h.is(":checked"))h=h.attr("data-id"),d.push(h)}return d};this.getLoading=function(){return a.searchLoading};this.search=function(c,d){a.searchLoading=
d;CU.isEmpty(c)&&(c="");d={};CU.isFunction(a.getParams)&&(d=a.getParams(1,1E3,{searchFieldFuzzy:c},null,null,a));var g=d.parentId;CU.isEmpty(g)||(CU.isEmpty(c)||a.clearColumns(),"simple"==a.act?(CU.isArray(d)||(d=[d]),RS.simple({addroot:a.addroot,url:a.url,ps:d,errcb:a.errcb,loading:a.getLoading(),cb:function(h){CU.isArray(h)&&(h={pageNum:1,pageSize:h.length,totalRows:h.length,totalPages:1,data:h});a.addColumn(g,h);CU.isFunction(a.callback)&&a.callback(h,a)}})):(CU.isArray(d)&&(d={pageNum:d[0],pageSize:d[1],
cdt:d[2],orders:d[3],qs:d[4]}),RS.rest2({addroot:a.addroot,url:a.url,ps:d,errcb:a.errcb,loading:a.getLoading(),cb:function(h){CU.isArray(h)&&(h={pageNum:1,pageSize:h.length,totalRows:h.length,totalPages:1,data:h});a.addColumn(g,h);CU.isFunction(a.callback)&&a.callback(h,a)}})))};this.refresh=function(){a.search()}}
function PrettyCompositeTable(b){if(CU.isEmpty(b))throw" the config is empty argument! ";if(CU.isEmpty(b.bid))throw" the config.bid is empty argument! ";var a=this;$.extend(a,{rootIcon:"/tannux/frame/imgs/core/disk25.svg",tables:["gthumb","glist","gcolumn"],showDirPath:!0,paging:!1,showCheckbox:!0,showSearchBox:!0,showSearchInput:!0,minHeight:$(document).height()-230,autoScrollY:!0},b);this.parentDirId=0;this.GTYPE_MAP={};this.events={glistInit:[],gthumbInit:[],gcolumnInit:[],godir:[],titleClick:[],
titleDblClick:[],toolEdit:[]};this.bind=function(f,l){!CU.isEmpty(f)&&CU.isFunction(l)&&CU.isArray(a.events[f])&&a.events[f].push(l)};this.doEvent=function(f,l,m,n,q,p,r,t,u){f=a.events[f];if(!CU.isEmpty(f))for(var v=0;v<f.length;v++)f[v](l,m,n,q,p,r,t,u)};this.doGthumbInit=function(f,l){a.doEvent("gthumbInit",f,l)};this.doGlistInit=function(f,l){a.doEvent("glistInit",f,l)};this.doGcolumnInit=function(f,l){a.doEvent("gcolumnInit",f,l)};this.doGodir=function(f,l,m){a.doEvent("godir",f,l,m)};this.doTitleClick=
function(f,l){a.doEvent("titleClick",f,l)};this.doTitleDblClick=function(f,l,m){a.doEvent("titleDblClick",f,l,m)};this.doToolEditClick=function(f,l,m){a.doEvent("toolEdit",f,l,m)};"string"==typeof this.bid?this.el_base=$("#"+this.bid):(this.el_base=$(this.bid),this.bid=this.el_base.attr("id"),CU.isEmpty(this.bid)&&(this.bid="PrettyCompositeTable_"+CU.getId()));b=b.opbtns;b=CU.isEmpty(b)?"":CU.isArray(b)?b.join(""):"";this.hasTable=function(f){return 0<=a.tables.indexOf(f)};b=['<div class="panel" style="overflow:hidden;">',
'\t<div class="panel-body" style="padding-top: 10px;">','\t\t<div class="main-box clearfix" style="padding-bottom: 3px;">','\t\t\t<div class="pull-left">','\t\t\t\t<div class="btn-group pull-left" style="margin-right:10px;">',a.hasTable("gthumb")?'\t\t\t\t\t<button title="\u4ee5\u7f29\u7565\u56fe\u65b9\u5f0f\u663e\u793a\u8d44\u6e90" type="button" name="btn-gtype" gtype="gthumb" class="btn btn-default btn-onlyicon"><i class="fa fa-th-large"></i></button>':"",a.hasTable("glist")?'\t\t\t\t\t<button title="\u4ee5\u5217\u8868\u65b9\u5f0f\u663e\u793a\u8d44\u6e90" type="button" name="btn-gtype" gtype="glist" class="btn btn-default btn-onlyicon"><i class="fa fa-align-justify"></i></button>':
"",a.hasTable("gcolumn")?'\t\t\t\t\t<button title="\u4ee5\u5206\u680f\u65b9\u5f0f\u663e\u793a\u8d44\u6e90" type="button" name="btn-gtype" gtype="gcolumn" class="btn btn-default btn-onlyicon"><i class="fa fa-columns"></i></button>':"","\t\t\t\t</div>",'\t\t\t\t<div class="pull-left div_dirpath" style="overflow:hidden;line-height:30px;">',"\t\t\t\t</div>","\t\t\t</div>","\t\t\t",'\t\t\t<div class="input-group pull-right" ',a.showSearchInput?"":'style="display:none;"',">",'\t\t\t\t<div class="btn-group" style="margin-right:10px;">',
b,"</div>",'\t\t\t\t<div class="form-group pull-right filter-block lw180">','\t\t\t\t\t<input type="text" class="form-control input-gsearch" placeholder="\u641c\u7d22"><span class="search-icon pull-right btn-gsearch" style="z-index:5;"><i class="fa fa-search"></i></span>',"\t\t\t\t</div>","\t\t\t</div>","\t\t</div>",'\t\t<div class="form-horizontal">','\t\t\t<div class="dt-bootstrap no-footer grid-gthumb" name="grid-gtype" gtype="gthumb" style="display:none;">',"\t\t\t</div>",'\t\t\t<div class="dt-bootstrap no-footer grid-glist" name="grid-gtype" gtype="glist" style="display:none;">',
"\t\t\t</div>",'\t\t\t<div class="dt-bootstrap no-footer grid-gcolumn" name="grid-gtype" gtype="gcolumn" style="display:none;">',"\t\t\t</div>","\t\t</div>","\t</div>","</div>"];this.el_base.append($(b.join("")));this.findElObject=function(f){f=a.el_base.find(f);return!CU.isEmpty(f)&&0<f.length?$(f[0]):null};this.el_dirpath=this.findElObject(".div_dirpath");this.el_searchinput=this.findElObject(".input-gsearch");this.el_searchbtn=this.findElObject(".btn-gsearch");var c=a.el_base.find("button[name='btn-gtype']");
b=a.el_base.find("div[name='grid-gtype']");for(var d=0;d<c.length;d++){var g=$(c[d]),h=g.attr("gtype");a.GTYPE_MAP[h]={el_btn:g}}for(d=0;d<b.length;d++){c=$(b[d]);h=c.attr("gtype");var k=a.GTYPE_MAP[h];CU.isEmpty(k)||(k.el_grid=c)}this.el_base.find("button[name='btn-gtype']").bind("click",function(){var f=$(this).attr("gtype");a.switchGrid(f)});this.el_searchinput.bind("keyup",function(f){13===f.keyCode&&a.el_searchbtn.click()});this.el_searchbtn.bind("click",function(){a.search()});this.getGthumbTab=
function(){return a.GTYPE_MAP.gthumb};this.getGlistTab=function(){return a.GTYPE_MAP.glist};this.getGcolumnTab=function(){return a.GTYPE_MAP.gcolumn};this.getGridTab=function(f){CU.isEmpty(f)&&(f=a.getGridType());return"gthumb"==f?a.getGthumbTab():"glist"==f?a.getGlistTab():"gcolumn"==f?a.getGcolumnTab():null};this.refreshDirPath=function(f){if(a.showDirPath){var l=['<a href="###" dirId="0" dirName="\u6839" class="text-link">'+CU.getIconHtml(a.rootIcon)+"</a>"];CU.isEmpty(f)||"0"==f||0===f?a.createDirPath(l):
RS.ajax({addroot:a.addroot,url:a.getDirCascadeUrl,ps:{dirId:f},cb:function(m){if(!CU.isEmpty(m))for(var n=0;n<m.length;n++){var q=m[n];l.push('<a href="###" dirId="'+q.id+'" dirName="'+q.dirName+'" class="text-link">'+q.dirName+"</a>")}a.createDirPath(l)}})}};this.createDirPath=function(f){a.el_dirpath.html(f.join('<i class="fa fa-angle-right path-separ" />'));a.el_dirpath.find("a").bind("click",function(l){l=$(this).attr("dirId");var m=$(this).attr("dirName");a.godir(l,m)})};this.getParentDirId=
function(){return a.parentDirId};this.godir=function(f,l){CU.isEmpty(f)||(a.parentDirId=f,a.doGodir(window.event,f,l),a.refreshDirPath(f),a.el_searchinput.val(""),a.search())};this.search=function(f){CU.isEmpty(f)&&(f=a.getGridType());f=a.getGridObject(f);if(!CU.isEmpty(f)){var l=a.el_searchinput.val();f.search(l,a.el_searchbtn)}};this.refresh=function(f){CU.isEmpty(f)&&(f=a.getGridType());f=a.getGridObject(f);CU.isEmpty(f)||f.refresh()};this.getRecord=function(f){var l=a.getGridType();return a.getGridObject(l).getRecord(f)};
this.getSelectRecords=function(){var f=a.getGridType();return a.getGridObject(f).getSelectRecords()};this.getSelectRecordIds=function(){var f=a.getGridType();return a.getGridObject(f).getSelectRecordIds()};this.getAllRecords=function(f){var l=a.getGridType();return a.getGridObject(l).getAllRecords(f)};this.getDirAndRecordIds=function(){var f=a.getSelectRecords();if(CU.isEmpty(f))return null;for(var l=[],m=[],n=0;n<f.length;n++){var q=f[n];"1"==q.type?l.push(q.data.id):m.push(q.data.id)}return[l,m]};
this.getGridType=function(){for(var f in a.GTYPE_MAP){var l=a.GTYPE_MAP[f].el_btn;if(l.hasClass("btn-active"))return l.attr("gtype")}return""};this.switchGrid=function(f){if(!CU.isEmpty(f))for(var l in a.GTYPE_MAP){var m=a.GTYPE_MAP[l],n=m.el_btn;n.attr("gtype")==f?n.addClass("btn-active"):n.hasClass("btn-active")&&n.removeClass("btn-active");m=m.el_grid;m.attr("gtype")==f?(m.css("display","block"),a.search(f),a.setGridType2Cache(f)):m.css("display","none")}};this.getGridObject=function(f){CU.isEmpty(f)&&
(f=a.getGridType());if("gthumb"==f)return a.getThumbGridObject();if("glist"==f)return a.getListGridObject();if("gcolumn"==f)return a.getColumnGridObject()};this.toAttrsHtml=function(f,l){return CU.toHtmlAttrs(f,l)};this.getHtmlAttrs=function(f,l){return CU.getHtmlAttrs(f,l)};this.getNodeAttrNames=function(f){var l=null;CU.isFunction(a.nodeAttrNames)?l=a.nodeAttrNames(f):CU.isArray(a.nodeAttrNames)&&(l=a.nodeAttrNames);CU.isEmpty(l)&&(l="1"==f?"id dirName dirType parentId dirLvl dirPath isLeaf icon".split(" "):
"id code name dirType type subType dirId icon status".split(" "));return l};this.toNodeAttrsHtml=function(f){if(CU.isEmpty(f))return"";var l=a.getNodeAttrNames(f.type);l=a.toAttrsHtml(f.data,l);CU.isEmpty(l)&&(l="");return l+=' data-nodeType="'+f.type+'"'};this.getHtmlNodeAttrs=function(f){if(!CU.isEmpty(f)){f=$(f);var l=f.attr("data-nodeType");if(!CU.isEmpty(l)){var m=a.getNodeAttrNames(l);f=a.getHtmlAttrs(f,m);CU.isEmpty(f)&&(f={});f.nodeType=l;return f}}};this.defaultToolsRender=function(f,l){return'<a name="a_gridrow_edit" '+
a.toNodeAttrsHtml(f)+' href="###" class="table-link" style="margin-left:7px;" title="\u7f16\u8f91"><i class="fa fa-edit"></i></a>'};this.defaultTitleRender=function(f,l,m){return f};this.defaultImageRender=function(f,l,m){return f};this.onGridRowTitleClick=function(){var f=$(this);f.attr("dblclick","false");setTimeout(function(){if("false"==f.attr("dblclick")){var l=a.getHtmlNodeAttrs(f);"1"==l.nodeType&&"gcolumn"==a.getGridType()&&a.godir(l.id,l.dirName);a.doTitleClick(f[0],l)}},200)};this.onGridRowTitleDblClick=
function(){var f=$(this);f.attr("dblclick","true");var l=a.getHtmlNodeAttrs(f);"1"==l.nodeType&&a.godir(l.id,l.dirName);a.doTitleDblClick(f[0],l)};this.onGridRowEditClick=function(){var f=$(this),l=a.getHtmlNodeAttrs(f);a.doToolEditClick(f,l)};this.onGridCallbackEvent=function(f,l){var m=P_grid.getGridTab().el_grid;f=m.find("a[name='a_gridrow_title']");l=m.find("div[name='a_gridrow_title']");m=m.find("a[name='a_gridrow_edit']");f.unbind("click");f.unbind("dblclick");l.unbind("click");l.unbind("dblclick");
m.unbind("click");f.bind("click",a.onGridRowTitleClick);f.bind("dblclick",a.onGridRowTitleDblClick);l.bind("click",a.onGridRowTitleClick);l.bind("dblclick",a.onGridRowTitleDblClick);m.bind("click",a.onGridRowEditClick)};this.getQueryParams=function(f,l,m){CU.isEmpty(a.baseParams)||(l=$.extend({},a.baseParams.dircdt,l),m=$.extend({},a.baseParams.recordcdt,m),f=$.extend({},a.baseParams,f));CU.isEmpty(f)&&(f={});f.dircdt=l;f.recordcdt=m;return f};this.defaultThumbGridGetParams=function(f,l,m,n){CU.isEmpty(m)&&
(m={});return a.getQueryParams({dirId:a.getParentDirId(),iconType:1},{searchFieldFuzzy:m.searchFieldFuzzy},PU.parseSearchCondition(m))};this.defaultListGridGetParams=function(f,l,m,n){CU.isEmpty(m)&&(m={});return a.getQueryParams({dirId:a.getParentDirId(),iconType:2},{searchFieldFuzzy:m.searchFieldFuzzy},PU.parseSearchCondition(m))};this.defaultColumnGridGetParams=function(f,l,m,n){CU.isEmpty(m)&&(m={});f=a.getParentDirId();0!=f&&"0"!=f&&(f="DIR_"+f);return a.getQueryParams({parentId:f,dirId:a.getParentDirId(),
iconType:2},{searchFieldFuzzy:m.searchFieldFuzzy},PU.parseSearchCondition(m))};this.getThumbGridObject=function(){var f=a.GTYPE_MAP.gthumb;if(CU.isEmpty(f.grid)){var l=a.toolsRender,m=a.titleRender,n=a.imageRender,q=a.getParams;CU.isEmpty(l)&&(l=a.defaultToolsRender);CU.isEmpty(m)&&(m=a.defaultTitleRender);CU.isEmpty(n)&&(n=a.defaultImageRender);CU.isEmpty(q)&&(q=a.defaultThumbGridGetParams);l={url:a.listUrl,paging:a.paging,pageSize:a.pageSize,style:"padding-top:5px;",minHeight:a.minHeight,maxHeight:a.maxHeight,
autoScrollY:a.autoScrollY,getParams:q,singleSelect:a.singleSelect,selectableType:a.selectableType,renderImage:function(p,r){var t=CU.getIconHtml(p.icon,"max-width:60px;max-height:60px;");return'<a href="###" name="a_gridrow_title" '+a.toNodeAttrsHtml(p)+" >"+n(t,p,r)+"</a>"},renderTitle:function(p,r){return'<div href="###" name="a_gridrow_title" '+a.toNodeAttrsHtml(p)+' style="cursor:pointer;">'+m(p.text,p,r)+"</div>"},renderTools:l,callback:function(p,r){a.onGridCallbackEvent(p,r);CU.isFunction(a.callback)&&
a.callback(p,r)}};CU.isEmpty(l.minHeight)&&!CU.isEmpty(a.minHeight)&&(l.minHeight=a.minHeight);CU.isEmpty(l.maxHeight)&&!CU.isEmpty(a.maxHeight)&&(l.maxHeight=a.maxHeight);CU.isEmpty(l.addroot)&&!CU.isEmpty(a.addroot)&&(l.addroot=a.addroot);$.extend(l,a.gthumbcfg,{bid:f.el_grid,showSearchBox:!1});f.grid=new PrettyThumbTable(l);a.doGthumbInit(window.event,f.grid)}return f.grid};this.getListGridObject=function(){var f=a.GTYPE_MAP.glist;if(CU.isEmpty(f.grid)){var l=a.toolsRender,m=a.titleRender,n=a.imageRender,
q=a.getParams;CU.isEmpty(l)&&(l=a.defaultToolsRender);CU.isEmpty(m)&&(m=a.defaultTitleRender);CU.isEmpty(n)&&(n=a.defaultImageRender);CU.isEmpty(q)&&(q=a.defaultListGridGetParams);var p=a.glistcolumns;if(CU.isEmpty(p)){p=[{title:"\u540d\u79f0",data:"text",align:"left",render:function(t,u,v,w){t=a.GTYPE_MAP.glist.grid;return'<a href="###" name="a_gridrow_title" '+a.toNodeAttrsHtml(v)+" >"+n(CU.getIconHtml(v.icon,"max-width:16px;max-height:16px;"),v,t)+"&nbsp;"+m(v.text,v,t)+"</a>"}},{title:"\u7f16\u8f91",
width:40,data:"id",visible:!0,align:"center",render:function(t,u,v,w){return l(v,a.GTYPE_MAP.glist.grid)}}];if(!CU.isEmpty(a.glistappcols))if(CU.isArray(a.glistappcols))for(var r=0;r<a.glistappcols.length;r++)p.push(a.glistappcols[r]);else CU.isObject(a.glistappcols)&&p.push(a.glistappcols);p.push({title:"\u4fee\u6539\u65f6\u95f4",width:160,data:"data.modifyTime",align:"center",render:function(t,u,v,w){if(!CU.isEmpty(t))return CU.toStringDateTime(t)}})}CU.isEmpty(l)&&(l=a.defaultToolsRender);q={url:a.listUrl,
paging:a.paging,pageLength:a.pageSize,passageCountUrl:a.passageCountUrl,showCheckbox:a.showCheckbox,columns:p,getParams:q,singleSelect:a.singleSelect,selectableType:a.selectableType,drawCallback:function(t){a.onGridCallbackEvent(t.aoData,k);CU.isFunction(a.callback)&&a.callback(t.aoData,k)}};CU.isEmpty(q.scrollY)&&!CU.isEmpty(a.maxHeight)&&(q.scrollY=parseInt(a.maxHeight,10)-50-("passage"==a.paging?25:0)+"px");CU.isEmpty(q.addroot)&&!CU.isEmpty(a.addroot)&&(q.addroot=a.addroot);$.extend(q,a.glistcfg,
{bid:f.el_grid,showSearchBox:!1,showColumnMenus:!1});f.grid=new PrettyDataTable(q);a.doGlistInit(window.event,f.grid)}return f.grid};this.getColumnGridObject=function(){var f=a.GTYPE_MAP.gcolumn;if(CU.isEmpty(f.grid)){var l=a.toolsRender,m=a.titleRender,n=a.imageRender,q=a.getParams;CU.isEmpty(l)&&(l=a.defaultToolsRender);CU.isEmpty(m)&&(m=a.defaultTitleRender);CU.isEmpty(n)&&(n=a.defaultImageRender);CU.isEmpty(q)&&(q=a.defaultColumnGridGetParams);l={url:a.listUrl,minHeight:a.minHeight,getParams:q,
singleSelect:a.singleSelect,selectableType:a.selectableType,renderImage:function(p,r){var t=CU.getIconHtml(p.icon,"max-width:16px;max-height:16px;");return n(t,p,r)},renderTitle:function(p,r){return'<div class="text-ellipsis" style="width:210px;" title="'+p.text+'" name="a_gridrow_title" '+a.toNodeAttrsHtml(p)+" >"+m(p.text,p,r)+"</div>"},renderTools:l,callback:function(p,r){a.onGridCallbackEvent(p,r);CU.isFunction(a.callback)&&a.callback(p,r)}};CU.isEmpty(l.addroot)&&!CU.isEmpty(a.addroot)&&(l.addroot=
a.addroot);$.extend(l,a.gcolumncfg,{bid:f.el_grid});f.grid=new PrettyColumnTable(l);a.doGcolumnInit(window.event,f.grid)}return f.grid};this.setGridType2Cache=function(f){CU.isEmpty(f)&&(f=a.getGridType());if(!CU.isEmpty(f)){var l=PU.getPagePathKey()+a.bid;window.localStorage.setItem(l,f)}};this.getGridType4Cache=function(){var f=PU.getPagePathKey()+a.bid;return window.localStorage.getItem(f)};this.switchGrid4Cache=function(f){var l=a.getGridType4Cache();CU.isEmpty(l)&&(l=CU.isEmpty(f)?"gthumb":f);
a.switchGrid(l)};this.refreshDirPathWidth=function(){var f=$(a.el_dirpath.parent().parent()).width(),l=$($(a.el_dirpath.parent()).children()[0]).width(),m=$($(a.el_dirpath.parent().parent()).children()[1]).width();a.el_dirpath.css("width",f-m-l-80)};this.showDirPath&&setTimeout(a.refreshDirPathWidth,1E3)}
function PrettyTree(b){if(CU.isEmpty(b))throw" the config is empty argument! ";if(CU.isEmpty(b.bid))throw" the config.bid is empty argument! ";if(CU.isEmpty(b.url))throw" the config.url is empty argument! ";var a=this;$.extend(a,{act:"rest2",searchFieldWidth:"100%",searchName:"searchFieldFuzzy",showSearchBox:!1,singleSelect:!0,keepSelectedRow:!0,cascade:!0},b);/^[0-9]+$/.test(this.searchFieldWidth=CU.trim(this.searchFieldWidth+""))&&(this.searchFieldWidth+="px");this.showSearchBox=!0===this.showSearchBox||
"true"==this.showSearchBox;this.bid=CU.clearlyElement(b.bid);this.bid.append(['<div class="main-box clearfix" style="padding-bottom:12px;',a.showSearchBox?"":"display:none;",'">\t<div class="form-group pull-left filter-block" style="width:',a.searchFieldWidth,';">\t\t<input type="text" class="form-control"><span class="search-icon"><i class="fa fa-search"></i></span>\t</div>\t<div class="input-group-btn"></div></div><div class="custom-tree tannux-pretty-tree"></div>'].join(""));this.el_text_search=
$(this.bid.find("input")[0]);this.el_tree=$(this.bid.find(".tannux-pretty-tree")[0]);this.el_search_btn=$(this.bid.find(".search-icon")[0]);this.events={select:[],loaded:[]};this.nodeLinks=null;this.getLoading=function(){var c=[a.el_search_btn];CU.isEmpty(a.searchLoading)||c.push(a.searchLoading);CU.isEmpty(a.loading)||c.push(CU.clearlyElement(a.loading));return c};this.getQueryCondition=function(){var c={},d=CU.trim(a.el_text_search.val()+"");CU.isEmpty(d)||(0>d.indexOf("%")&&0>d.indexOf("_")&&(d=
"%"+d+"%"),c[a.searchName]=d);return c};this.ajaxCallback=function(c,d,g,h){var k=a.callback;CU.isEmpty(k)&&(k=a.cb);CU.isFunction(k)&&(g=k(c,g,h,a),CU.isArray(g)&&(h=g));if(!CU.isEmpty(h)){g=CU.isFunction(a.render);k=null;for(var f=0;f<h.length;f++){var l=h[f];void 0===l.leaf||null===l.leaf||1==l.leaf||void 0!==l.children&&null!==l.children||(l.children=!0);if(g){var m=a.render(l,c,a);if(!1===m){null==k&&(k=[]);continue}else"string"==typeof m?l.text=m:CU.isObject(m)&&(l=m)}null!=k&&k.push(l)}null!=
k&&(h=k)}d.call(a.el_tree,h);a.doEvent("loaded",c,h,a)};this.defaultDataLoader=function(c,d){var g=a.getQueryCondition(),h={addRootNode:a.addRootNode,appendAttrs:a.appendAttrs,cdt:g};if(CU.isFunction(a.getParams)){g=a.getParams(c,h,a);if(!1===g){d.call(a.el_tree,[]);return}CU.isObject(g)&&(h=g)}"simple"==a.act?(CU.isArray(h)||(h=[h]),RS.simple({addroot:a.addroot,url:a.url,ps:h,loading:a.getLoading(),cb:function(k){a.ajaxCallback(c,d,h,k)},errcb:function(k,f){d.call(a.el_tree,[]);CU.isFunction(a.errcb)?
a.errcb(k,f):RS.defaultErrorCallback(k,f)}})):RS.rest2({addroot:a.addroot,url:a.url,ps:h,loading:a.getLoading(),cb:function(k){a.ajaxCallback(c,d,h,k)},errcb:function(k,f){d.call(a.el_tree,[]);CU.isFunction(a.errcb)?a.errcb(k,f):RS.defaultErrorCallback(k,f)}})};this.setConfig=function(c){CU.isEmpty(c)&&(c={});delete a.config;a.config=CU.getObjectFields(c,"core,plugins,checkbox,contextmenu");CU.isEmpty(a.config.core)&&(a.config.core={});CU.isEmpty(a.config.core.data)&&(a.config.core.data=this.defaultDataLoader)};
this.setSingleSelect=function(c){a.singleSelect=!(!1===c||"false"==c);a.singleSelect?(a.config.core.multiple=!1,CU.isEmpty(a.config.plugins)||(c=a.config.plugins.indexOf("checkbox"),0<=c&&CU.remove(a.config.plugins,c)),CU.isObject(a.config.checkbox)&&delete a.config.checkbox):(a.config.core.multiple=!0,CU.isEmpty(a.config.plugins)&&(a.config.plugins=[]),0>a.config.plugins.indexOf("checkbox")&&a.config.plugins.push("checkbox"),CU.isEmpty(a.config.checkbox)&&(a.config.checkbox={keep_selected_style:a.keepSelectedRow,
three_state:a.cascade}))};this.isSingleSelect=function(){return a.singleSelect};this.setConfig(b);this.setSingleSelect(this.singleSelect);this.el_tree.jstree(a.config);this.setUrl=function(c){CU.isEmpty(c)||(a.url=CU.trim(c+""))};this.setSelected=function(c,d){a.el_tree.jstree(!0===d||"true"==d?"select_node":"unselect_node",c)};this.setSelectedAll=function(c){a.el_tree.jstree(!0===c||"true"==c?"select_all":"deselect_all")};this.getNode=function(c){return a.el_tree.jstree("get_node",c+"")};this.isLeaf=
function(c){CU.isObject(c)||(c=a.getNode(c));return CU.isObject(c)?a.el_tree.jstree("is_leaf",c):!1};this.setChecked=function(c,d){if(CU.isArray(c))for(var g=0;g<c.length;g++)a.setChecked(c[g],d);else CU.isObject(c)||(c=a.getNode(c)),CU.isObject(c)&&a.el_tree.jstree(!0===d||"true"==d?"check_node":"uncheck_node",c)};this.setCheckedAll=function(c){a.el_tree.jstree(!0===c||"true"==c?"check_all":"uncheck_all")};this.isSelected=function(c){CU.isObject(c)||(c=a.getNode(c));CU.isObject(c)&&a.el_tree.jstree("is_selected",
c);return!1};this.isChecked=function(c){CU.isObject(c)||(c=a.getNode(c));CU.isObject(c)&&a.el_tree.jstree("is_checked",c);return!1};this.getSelectedNodes=function(){return a.el_tree.jstree("get_selected",!0)};this.fillParentNodes=function(c,d,g){CU.isEmpty(c)||(c=c.parent,CU.isEmpty(c)||0==c||"0"==c||"#"==c||(c=a.getNode(c),!CU.isEmpty(c)&&CU.isEmpty(g[c.id])&&(d.push(c),g[c.id]=c,a.fillParentNodes(c,d.ids))))};this.getCheckedNodes=function(c){var d=a.el_tree.jstree("get_checked",!0);if((!0===c||
"true"==c)&&!CU.isEmpty(d)&&0<d.length){c=[];for(var g={},h=0;h<d.length;h++){var k=d[h];c.push(k);g[k.id]=k}for(h=0;h<d.length;h++)k=d[h],a.fillParentNodes(k,c,g);d=c}return d};this.reload=function(c,d){CU.isObject(c)||(c=a.getNode(c));CU.isObject(c)&&a.el_tree.jstree("load_node",c,d)};this.search=function(){a.el_tree.jstree("destroy");a.el_tree.jstree(a.config);a.afterCreateTree()};this.execNodeLinkClick=function(c,d,g,h){if(!CU.isEmpty(a.nodeLinks)){var k=$(g.target),f=!0;if(0<k.length){var l=
k.attr("link-type"),m=null;if(!CU.isEmpty(l)&&!CU.isEmpty(m=a.nodeLinks[CU.trim(l+"")]))for(l=0;l<m.length&&(f=m[l](k,c,d,g,h),!1!==f);l++);}return f}};this.bindNodeLinkClick=function(c,d){if(!CU.isEmpty(c)&&CU.isFunction(d)){c=CU.trim(c+"");CU.isEmpty(a.nodeLinks)&&(a.nodeLinks={});var g=a.nodeLinks[c];CU.isEmpty(g)&&(g=[],a.nodeLinks[c]=g);g.push(d)}};this.el_text_search.bind("keyup",function(c){13===c.keyCode&&a.search()});this.el_search_btn.bind("click",function(){a.search()});this.on=function(c,
d){a.bind(c,d)};this.bind=function(c,d){!CU.isEmpty(c)&&CU.isFunction(d)&&(c=CU.trim(c+""),c=a.events[c],CU.isArray(c)&&c.push(d))};this.doEvent=function(c,d,g,h,k,f,l,m){if(!CU.isEmpty(c)){c=CU.trim(c+"");c=a.events[c];var n=!0;if(CU.isArray(c))for(var q=0;q<c.length&&(n=c[q](d,g,h,k,f,l,m),!1!==n);q++);return n}};this.afterCreateTree=function(){this.el_tree.bind("select_node.jstree",function(c,d){if(!CU.isEmpty(a.nodeLinks))try{if(!1===a.execNodeLinkClick(d.node,d.selected,d.event,a))return}catch(g){console.error("execNodeLinkClick error : "+
g)}a.doEvent("select",d.node,d.selected,d.event,a)})};this.afterCreateTree();CU.isFunction(a.loaded)&&a.bind("loaded",a.loaded)};
